/**************************************************
LEADTOOLS (C) 1991-2017 LEAD Technologies, Inc. ALL RIGHTS RESERVED.
This software is protected by United States and International copyright laws.
Any copying, duplication, deployment, redistribution, modification or other
disposition hereof is STRICTLY PROHIBITED without an express written license
granted by LEAD Technologies, Inc.. This notice may not be removed or otherwise
altered under any circumstances.
Portions of this product are licensed under US patent 5,327,254 and foreign
counterparts.
For more information, contact LEAD Technologies, Inc. at 704-332-5532 or visit
https://www.leadtools.com
**************************************************/
// Leadtools.Documents.UI.js
// Version:19.0.0.46
(function(){Type.registerNamespace("lt.Documents.UI");window.lt.Documents.UI._lT_VersionNumber=function(){};lt.Documents.UI.DocumentViewerOperation=function(){};lt.Documents.UI.DocumentViewerOperation.prototype={setDocument:0,loadingThumbnails:1,getThumbnail:2,loadingPages:3,getPage:4,runCommand:5,gotoPage:6,itemTypeChanged:7,getText:8,pageTextSelectionChanged:9,textSelectionChanged:10,renderItemPlaceholder:11,renderSelectedText:12,gotoBookmark:13,runLink:14,loadingAnnotations:15,getAnnotations:16,
createAutomation:17,destroyAutomation:18,automationStateChanged:19,selectedTextToReviewObject:20,loadingBookmarks:21,hoverLink:22,printPages:23,pagesAdded:24,pagesRemoved:25};lt.Documents.UI.DocumentViewerOperation.registerEnum("lt.Documents.UI.DocumentViewerOperation",!1);lt.Documents.UI.DocumentViewerSelectTextMode=function(){};lt.Documents.UI.DocumentViewerSelectTextMode.prototype={line:0,word:1,character:2};lt.Documents.UI.DocumentViewerSelectTextMode.registerEnum("lt.Documents.UI.DocumentViewerSelectTextMode",
!1);lt.Documents.UI.DocumentViewerLineSelectionMode=function(){};lt.Documents.UI.DocumentViewerLineSelectionMode.prototype={auto:0,columns:1,flowText:2};lt.Documents.UI.DocumentViewerLineSelectionMode.registerEnum("lt.Documents.UI.DocumentViewerLineSelectionMode",!1);lt.Documents.UI.PrintOrientation=function(){};lt.Documents.UI.PrintOrientation.prototype={portrait:0,landscape:1};lt.Documents.UI.PrintOrientation.registerEnum("lt.Documents.UI.PrintOrientation",!1);lt.Documents.UI.DocumentViewerItemType=
function(){};lt.Documents.UI.DocumentViewerItemType.prototype={image:0,svg:1};lt.Documents.UI.DocumentViewerItemType.registerEnum("lt.Documents.UI.DocumentViewerItemType",!1);lt.Documents.UI.DocumentViewerAsyncOperation=function(){};lt.Documents.UI.DocumentViewerAsyncOperation._run=function(a,b){if(null==a)throw new lt.ArgumentNullException("operation");setTimeout(function(){try{b(),null!=a.get_done()&&a.get_done()(a)}catch(c){null!=a.get_error()&&a.get_error()(a,c)}finally{null!=a.get_always()&&
a.get_always()(a)}},0)};lt.Documents.UI.DocumentViewerAsyncOperation.prototype={_userState:null,get_userState:function(){return this._userState},set_userState:function(a){return this._userState=a},_done:null,get_done:function(){return this._done},set_done:function(a){return this._done=a},_error:null,get_error:function(){return this._error},set_error:function(a){return this._error=a},_always:null,get_always:function(){return this._always},set_always:function(a){return this._always=a}};Object.defineProperty(lt.Documents.UI.DocumentViewerAsyncOperation.prototype,
"userState",{get:lt.Documents.UI.DocumentViewerAsyncOperation.prototype.get_userState,set:lt.Documents.UI.DocumentViewerAsyncOperation.prototype.set_userState,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerAsyncOperation.prototype,"done",{get:lt.Documents.UI.DocumentViewerAsyncOperation.prototype.get_done,set:lt.Documents.UI.DocumentViewerAsyncOperation.prototype.set_done,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerAsyncOperation.prototype,
"error",{get:lt.Documents.UI.DocumentViewerAsyncOperation.prototype.get_error,set:lt.Documents.UI.DocumentViewerAsyncOperation.prototype.set_error,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerAsyncOperation.prototype,"always",{get:lt.Documents.UI.DocumentViewerAsyncOperation.prototype.get_always,set:lt.Documents.UI.DocumentViewerAsyncOperation.prototype.set_always,enumerable:!0,configurable:!0});lt.Documents.UI.DocumentViewerAnnotations=function(a){this._documentViewer=
a};lt.Documents.UI.DocumentViewerAnnotations._updateContainers=function(a){if(null!=a.get_containers())for(var b=1,a=ss.IEnumerator.getEnumerator(a.get_containers());a.moveNext();)a.current.set_pageNumber(b++)};lt.Documents.UI.DocumentViewerAnnotations._getRendererKeys=function(a){var b=[],c;for(c in a)b.push(c);return b};lt.Documents.UI.DocumentViewerAnnotations.prototype={_destroy:function(a){a&&(this._stopWorking(),null!=this._automationManager&&(this._automationManager.remove_userModeChanged(ss.Delegate.create(this,
this._automationManager_UserModeChanged)),this._automationManager=null),a=Type.safeCast(this._automationControl,lt.Documents.UI.ImageViewerAutomationControl),null!=a&&a.dispose(),this._automationControl=null)},_documentViewer:null,get_documentViewer:function(){return this._documentViewer},_automationManager:null,get_automationManager:function(){return this._automationManager},_automation:null,get_automation:function(){return this._automation},_automationControl:null,get_automationControl:function(){return this._automationControl},
_interactiveMode:null,get_interactiveMode:function(){return this._interactiveMode},isContainerModified:function(a){if(!this._documentViewer.get_hasDocument())return!1;this._documentViewer._checkPageNumber(a,!0,"pageNumber");if(a)return this._automation.get_containers().get_item(a-1).get_isModified();for(var a=this._documentViewer.get_document().pages.get_count(),b=1;b<=a;b++)if(this._automation.get_containers().get_item(b-1).get_isModified())return!0;return!1},setContainerModified:function(a,b){if(this._documentViewer.get_hasDocument()){this._documentViewer._checkPageNumber(a,
!0,"pageNumber");a&&this._automation.get_containers().get_item(a-1).set_isModified(b);for(var c=this._documentViewer.get_document().pages.get_count(),d=1;d<=c;d++)this._automation.get_containers().get_item(d-1).set_isModified(b)}},_init:function(){var a=new lt.Documents.UI.ImageViewerAutomationControl;a.set__multiContainerMode(1);a.set_imageViewer(this._documentViewer.get_view().get_imageViewer());var b=new lt.Documents.UI.AnnotationsInteractiveMode;b.set_automationControl(a);this._automationControl=
a;this._interactiveMode=b;this._automationManager=new lt.Annotations.Automation.AnnAutomationManager;this._automationManager.set_redactionRealizePassword("");this._automationManager.set_deselectOnDown(!1);this._automationManager.set_forceSelectionModifierKey(!0);this._automationManager.set_endEditDesignerBeforeDraw(!1);this._automationManager.set_restrictDesigners(!0);this._automationManager.add_userModeChanged(ss.Delegate.create(this,this._automationManager_UserModeChanged));this._updateUseRotateThumbs()},
_automationManager_UserModeChanged:function(){this._updateThumbnails(!0)},get_isLoading:function(){return null!=this._annotationsWorker&&this._annotationsWorker.get_isWorking()},_annotationsWorker:null,_workerContainers:null,_startWorking:function(){this._stopWorking();if(this._documentViewer.get_hasDocument()){var a=new lt.Documents.UI.DocumentViewerOperationEventArgs(15,null,null,null,0,!1);this._documentViewer.onOperation(a);if(!a.get_abort()){a=this._documentViewer.get_document();this._setupPageAnnotations(a);
var b=a.pages.get_count();this._workerContainers=Array(b);this._annotationsWorker=new lt.Documents.UI._annotationsWorker;this._annotationsWorker.add_preProcessItem(ss.Delegate.create(this,this._annotationsWorker_PreProcessItem));this._annotationsWorker.add_postProcessItem(ss.Delegate.create(this,this._annotationsWorker_PostProcessItem));this._annotationsWorker.add_completed(ss.Delegate.create(this,this._annotationsWorker_Completed));this._annotationsWorker.start(a)}}},_stopWorking:function(){this._deleteWorker();
if(null!=this._automation){var a=new lt.Documents.UI.DocumentViewerOperationEventArgs(18,null,this._automation,null,0,!1);this._documentViewer.onOperation(a);if(!a.get_abort()){this._automation.remove_currentDesignerChanged(ss.Delegate.create(this,this._automation_CurrentDesignerChanged));this._automation.remove_dragDrop(ss.Delegate.create(this,this._automation_DragDrop));this._automation.remove_activeContainerChanged(ss.Delegate.create(this,this._automation_ActiveContainerChanged));this._automation.remove_afterObjectChanged(ss.Delegate.create(this,
this._automation_AfterObjectChanged));this._automation.remove_afterUndoRedo(ss.Delegate.create(this,this._automation_AfterUndoRedo));this._automation.get_containers().clear();for(var a=-1,b=this._automationManager.get_automations().get_count(),c=0;c<b&&-1===a;c++)this._automationManager.get_automations().get_item(c)===this._automation&&(a=c);-1!==a&&this._automationManager.get_automations().removeAt(a);this._automation=null;this._ensureSelectObject();a=new lt.Documents.UI.DocumentViewerOperationEventArgs(18,
null,null,null,0,!0);this._documentViewer.onOperation(a)}}},_deleteWorker:function(){null!=this._annotationsWorker&&(this._annotationsWorker.stop(),this._annotationsWorker.remove_preProcessItem(ss.Delegate.create(this,this._annotationsWorker_PreProcessItem)),this._annotationsWorker.remove_postProcessItem(ss.Delegate.create(this,this._annotationsWorker_PostProcessItem)),this._annotationsWorker.remove_completed(ss.Delegate.create(this,this._annotationsWorker_Completed)),this._annotationsWorker.dispose(),
this._annotationsWorker=null,this._documentViewer.onOperation(new lt.Documents.UI.DocumentViewerOperationEventArgs(15,null,null,null,0,!0)))},_createAutomation:function(){this._deleteWorker();var a=this._documentViewer.get_document();if(null!=a){var b=new lt.Documents.UI.DocumentViewerOperationEventArgs(17,null,null,null,0,!1);this._documentViewer.onOperation(b);b.get_abort()||(this._ensureSelectObject(),this._automation=new lt.Annotations.Automation.AnnAutomation(this._automationManager,this._automationControl),
this._automation.set_enableDragDrop(!0),this._automation.get_containers().clear(),this._automation.add_currentDesignerChanged(ss.Delegate.create(this,this._automation_CurrentDesignerChanged)),this._automation.add_dragDrop(ss.Delegate.create(this,this._automation_DragDrop)),this._automation.add_activeContainerChanged(ss.Delegate.create(this,this._automation_ActiveContainerChanged)),this._automation.add_afterObjectChanged(ss.Delegate.create(this,this._automation_AfterObjectChanged)),this._automation.add_afterUndoRedo(ss.Delegate.create(this,
this._automation_AfterUndoRedo)),this._addPages(lt.Documents.UI._documentViewerHelper.getAsList(a.pages),0),b=new lt.Documents.UI.DocumentViewerOperationEventArgs(17,null,this._automation,null,0,!0),this._documentViewer.onOperation(b),null!=this._documentViewer.get_thumbnails()&&this._documentViewer.get_thumbnails().invalidate(lt.LeadRectD.get_empty()),this._workerContainers=null)}},_pageAnnotationsKey:null,_setupPageAnnotations:function(a){this._pageAnnotationsKey=null!=a?a.documentId+"_annotations_":
null},_getPageContainer:function(a){a=a.customData;return Object.keyExists(a,this._pageAnnotationsKey)?Type.safeCast(a[this._pageAnnotationsKey],lt.Annotations.Core.AnnContainer):null},_setPageContainer:function(a,b){a.customData[this._pageAnnotationsKey]=b},_addPages:function(a,b){if(null!=a&&a.length){this._documentViewer.get_document();var c=b,d=this._documentViewer.get_view().get_imageViewer();d.beginUpdate();this._beginCreateAutomationLoop();for(var e=ss.IEnumerator.getEnumerator(a);e.moveNext();){var g=
e.current,f=g.size,h=g.resolution,i=null;null!=this._workerContainers&&c<this._workerContainers.length&&(i=this._workerContainers[c]);null==i&&(i=this._getPageContainer(g));null==i&&(i=new lt.Annotations.Core.AnnContainer,i.set_size(f),i.get_mapper().mapResolutions(h,h,h,h));this._setPageContainer(g,i);i.get_mapper().set_fontRelativeToDevice(!1);this._automation.get_containers().insert(c,i);c++;this._automation.get_active()||this._automation.set_active(!0)}lt.Documents.UI.DocumentViewerAnnotations._updateContainers(this._automation);
this._endCreateAutomationLoop();d.endUpdate();setTimeout(ss.Delegate.create(this,function(){this._documentViewer.get_view().invalidate(lt.LeadRectD.get_empty())}),0)}},_removePages:function(a,b){if(null!=a&&a.length){this._documentViewer.get_document();var c=a.length,d=this._documentViewer.get_view().get_imageViewer();for(d.beginUpdate();0<c;)this._automation.get_containers().removeAt(b),c--;lt.Documents.UI.DocumentViewerAnnotations._updateContainers(this._automation);d.endUpdate();setTimeout(ss.Delegate.create(this,
function(){this._documentViewer.get_view().invalidate(lt.LeadRectD.get_empty())}),0)}},_annotationsWorker_PreProcessItem:function(){},_annotationsWorker_PostProcessItem:function(a,b){ss.Delegate.create(this,function(a,b){if(!(null==this._annotationsWorker||this._annotationsWorker.get_isCancelPending()||this._annotationsWorker!==b.get__itemsWorker())){var e=b.get_itemIndex();if(e){if(0>e||null==this._workerContainers||e>=this._workerContainers.length)return}else if(null==this._workerContainers)return;
if(e){g=new lt.Documents.UI.DocumentViewerOperationEventArgs(16,null,null,null,e+1,!1);this._documentViewer.onOperation(g);if(g.get_abort())return;g=Type.safeCast(b.get_data1(),lt.Annotations.Core.AnnContainer);this._workerContainers[e]=g;g=null!=g&&null==b.get_error()?new lt.Documents.UI.DocumentViewerOperationEventArgs(16,null,g,null,e+1,!0):new lt.Documents.UI.DocumentViewerOperationEventArgs(16,b.get_error(),null,null,e+1,!0)}else{var g=new lt.Documents.UI.DocumentViewerOperationEventArgs(16,
null,null,null,0,!1);this._documentViewer.onOperation(g);if(g.get_abort())return;e=Type.safeCast(b.get_data1(),Array);if(null!=e)for(g=0;g<e.length;g++)g<this._workerContainers.length&&(this._workerContainers[g]=e[g]);g=null!=e&&null==b.get_error()?new lt.Documents.UI.DocumentViewerOperationEventArgs(16,null,this._workerContainers,null,0,!0):new lt.Documents.UI.DocumentViewerOperationEventArgs(16,b.get_error(),null,null,0,!0)}this._documentViewer.onOperation(g)}})(this,b)},_annotationsWorker_Completed:function(a,
b){if(!(null==this._annotationsWorker||this._annotationsWorker.get_isCancelPending()||this._annotationsWorker!==b.get__itemsWorker())){var c=ss.Delegate.create(this,function(){this._createAutomation()});lt.Documents.UI._invoker.beginInvoke0(this._documentViewer.get_view().get_imageViewer(),c)}},_automation_CurrentDesignerChanged:function(){var a=new lt.Documents.UI.DocumentViewerOperationEventArgs(19,null,null,null,0,!1);this._documentViewer.onOperation(a);if(null!=this._automation.get_currentEditObject())a=
this._automation.getObjectInvalidateRect(this._automation.get_currentEditObject()),this._documentViewer.get_view().get_imageViewer().ensureBoundsVisible(a),this._documentViewer.get_text().hasSelectedText(0)&&this._documentViewer.get_text().clearSelection(0);else{var b=Type.safeCast(this._automation.get_currentDesigner(),lt.Annotations.Designers.AnnDrawDesigner);if(null!=b){var c=Type.safeCast(b,lt.Documents.UI._textReviewDrawDesigner);null!=c&&(a=this._automation.get_activeContainer().get_pageNumber(),
this._documentViewer.get_text().hasSelectedText(a)?(b=Type.safeCast(b.get_targetObject().clone(),lt.Annotations.Core.AnnTextReviewObject),this._automation.endDesigner(),this.selectedTextToReviewObject(a,b)):c.set_documentViewer(this._documentViewer))}}a=new lt.Documents.UI.DocumentViewerOperationEventArgs(19,null,null,null,0,!0);this._documentViewer.onOperation(a)},_automation_DragDrop:function(a,b){null==b.get_targetContainer()&&b.set_allowed(!1)},_automation_ActiveContainerChanged:function(){lt.Documents.UI.DocumentViewerAnnotations._updateContainers(this._automation);
this._automationControl.automationInvalidate(lt.LeadRectD.get_empty())},_automation_AfterObjectChanged:function(a,b){if(null!=b.get_objects()&&b.get_objects().get_count())switch(b.get_changeType()){case lt.Annotations.Automation.AnnObjectChangedType.designerEdit:var c=Type.safeCast(this._automation.get_currentDesigner(),lt.Annotations.Designers.AnnEditDesigner);null!=c&&c.get_isModified()&&(this._internalSetContainerModified(this._automation.get_activeContainer()),this._updateObjectsMetadata(b.get_objects()),
c.set_isModified(!1));break;case lt.Annotations.Automation.AnnObjectChangedType.none:break;default:this._internalSetContainerModified(this._automation.get_activeContainer()),this._updateObjectsMetadata(b.get_objects())}},_internalSetContainerModified:function(a){null!=a&&a.set_isModified(!0)},_automation_AfterUndoRedo:function(){this._updateThumbnails(!1)},_updateObjectsMetadata:function(a){if(null!=a&&a.get_count()){for(var b=lt.Annotations.Core.AnnObject.dateToString(Date.get_now()),c=[lt.Annotations.Core.AnnObject.authorMetadataKey,
lt.Annotations.Core.AnnObject.createdMetadataKey,lt.Annotations.Core.AnnObject.modifiedMetadataKey],b=[this._documentViewer.get_userName(),b,b],d=[!0,!1,!0],a=ss.IEnumerator.getEnumerator(a);a.moveNext();)this._updateObjectMetadata(a.current,c,b,d);this._updateThumbnails(!1)}},_updateObjectMetadata:function(a,b,c,d){var e=Type.safeCast(a,lt.Annotations.Core.AnnSelectionObject);if(null!=e)for(a=ss.IEnumerator.getEnumerator(e.get_selectedObjects());a.moveNext();)this._updateObjectMetadata(a.current,
b,c,d);else for(e=0;e<b.length;e++){var g=b[e];if(d[e]||!Object.keyExists(a.get_metadata(),g)||String.isNullOrEmpty(a.get_metadata()[g]))a.get_metadata()[b[e]]=c[e]}},_updateThumbnails:function(a){null!=this._documentViewer.get_thumbnails()&&null!=this._automationManager&&null!=this._automation&&null!=this._automation.get_activeContainer()&&(a?this._documentViewer.get_thumbnails().get_imageViewer().invalidate(lt.LeadRectD.get_empty()):(a=this._automation.get_activeContainer().get_pageNumber(),this._documentViewer.get_thumbnails().get_imageViewer().invalidateItemByIndex(a-
1)))},initialize:function(){if(null!=this._automationManager){this._automationManager.createDefaultObjects();for(var a=lt.Annotations.Designers.AnnTextReviewDrawDesigner,b=lt.Documents.UI._textReviewDrawDesigner,c=ss.IEnumerator.getEnumerator(this._automationManager.get_objects());c.moveNext();){var d=c.current;null!=d&&d.get_drawDesignerType()===a&&d.set_drawDesignerType(b)}a=this._automationManager.get_renderingEngine();b=lt.Documents.UI.DocumentViewerAnnotations._getRendererKeys(a.get_renderers());
for(b=ss.IEnumerator.getEnumerator(b);b.moveNext();)c=b.current,c=a.get_renderers()[c],d=new lt.Annotations.Rendering.AnnLabelRenderer,d.initialize(a),c.set_labelRenderer(d),c=Type.safeCast(c,lt.Annotations.Rendering.AnnTextObjectRenderer),null!=c&&c.set_flipReverseText(!0)}},_ensureSelectObject:function(){null==this._automationManager||this._automationManager.get_currentObjectId()===lt.Annotations.Core.AnnObject.selectObjectId||this._automationManager.set_currentObjectId(lt.Annotations.Core.AnnObject.selectObjectId)},
_ensureSelectObjectKeepDesigners:function(){if(!(null==this._automationManager||this._automationManager.get_currentObjectId()===lt.Annotations.Core.AnnObject.selectObjectId)){var a=this._automationManager.get_cancelInactiveDesigners();this._automationManager.set_cancelInactiveDesigners(!1);this._automationManager.set_currentObjectId(lt.Annotations.Core.AnnObject.selectObjectId);this._automationManager.set_cancelInactiveDesigners(a)}},groupSelectedObjects:function(a){if(null!=this._automation){var b=
this._automation.get_activeContainer(),b=null!=b?b.get_selectionObject():null;if(null!=b&&1<b.get_selectedObjects().get_count())for(b=ss.IEnumerator.getEnumerator(b.get_selectedObjects());b.moveNext();)b.current.set_groupName(a)}},ungroupSelectedObjects:function(){if(null!=this._automation){var a=this._automation.get_activeContainer(),a=null!=a?a.get_selectionObject():null;null!=a&&1<a.get_selectedObjects().get_count()&&a.ungroup(a.get_selectedObjects().get_item(0).get_groupName())}},_useRotateThumbs:!0,
get_useRotateThumbs:function(){return this._useRotateThumbs},set_useRotateThumbs:function(a){this._useRotateThumbs=a;this._updateUseRotateThumbs();return a},_renderOnThumbnails:!0,get_renderOnThumbnails:function(){return this._renderOnThumbnails},set_renderOnThumbnails:function(a){this._renderOnThumbnails!==a&&(this._renderOnThumbnails=a,null!=this._documentViewer.get_thumbnails()&&this._documentViewer.get_thumbnails().get_imageViewer().invalidate(lt.LeadRectD.get_empty()));return a},_updateUseRotateThumbs:function(){null!=
this._automationManager&&(this._automationManager.set_useRotateThumbs(this._useRotateThumbs),null!=this._automation&&this._automation.get_canSelectNone()&&this._automation.get_automationControl().automationInvalidate(lt.LeadRectD.get_empty()))},_deselect:function(){null==this._automation||Type.canCast(this._automation.get_currentDesigner(),lt.Annotations.Designers.AnnDrawDesigner)||this._automation.get_canSelectNone()&&this._automation.selectObjects(null)},_selectAll:function(a){null!=this._automation&&
this._automation.get_canSelectObjects()&&(a||(a=this._documentViewer.get_currentPageNumber()),this._automation.selectObjects(this._automation.get_containers().get_item(a-1).get_children()))},_paste:function(a){if(null!=this._automation){var b=!1;if(!a.get_isEmpty()){var a=lt.Controls.PrimitivesHelper.toLeadPointD(a),c=this._automation.get_activeContainer();null!=c&&(a=c.get_mapper().pointToContainerCoordinates(a),a.get_isEmpty()||(this._automation.pasteAt(a),b=!0))}b||this._automation.paste()}},_renderThumbnail:function(a,
b){if(!(null==this._documentViewer.get_thumbnails()||null==this._automation||null==this._automation.get_containers()||1>a&&a>=this._automation.get_containers().get_count())){var c=this._documentViewer.get_thumbnails().get_imageViewer(),d=b.get_item(),e=c.getItemImageTransform(d),g=d.get_imageSize();if(!lt.Controls.PrimitivesHelper.isEmptyOrZeroSize(g)&&(c=c.getItemViewBounds(d,lt.Controls.ImageViewerItemPart.image,!1),!c.get_isEmpty())){c.set_width(c.get_width()+1);c.set_height(c.get_height()+1);
var d=this._automation.get_containers().get_item(a-1),f=d.get_isVisible();d.set_isVisible(!0);var h=this._automation.get_manager().get_renderingEngine(),i=h.get_renderState();h.set_renderState(lt.Annotations.Core.AnnRenderState.none);var j=b.get_context();h.attach(d,j);var k=lt.Controls.GraphicsHelper.saveContext(j);try{lt.Controls.GraphicsHelper.intersectClip(j,c);lt.Controls.GraphicsHelper.multiplyTransform(j,e);var l=lt.LeadRectD.create(0,0,720*g.get_width()/96,720*g.get_height()/96);h.burnToRectWithDpi(l,
96,96,96,96)}finally{d.get_isVisible()!==f&&d.set_isVisible(f),null!=k&&lt.Controls.GraphicsHelper.restoreContext(j,k),h.get_renderState()!==i&&h.set_renderState(i),h.detach()}}}},selectedTextToReviewObject:function(a,b){if(null==b)throw new lt.ArgumentNullException("textReviewObject");if(!this._documentViewer.get_hasDocument())return!1;var c=this._documentViewer.get_text().getSelectedTextItems(a);if(null==c||!c.length)return!1;var d=new lt.Documents.UI.DocumentViewerOperationEventArgs(20,null,b,
null,a,!1);this._documentViewer.onOperation(d);if(d.get_abort())return!1;var e=this._documentViewer.get_annotations().get_automation(),g=e.get_activeContainer();try{this._setTextReviewRectangles(a,c,b);var f=!g.get_children().contains(b);if(f){e.beginUndo();try{g.get_children().add(b)}finally{e.endUndo()}e.selectObject(b)}var h=new lt.Annotations.Core.AnnObjectCollection;h.add(b);this._updateObjectsMetadata(h);f&&e.invokeAfterObjectChanged(h,lt.Annotations.Automation.AnnObjectChangedType.added);var i=
ss.Delegate.create(this,this._ensureSelectObjectKeepDesigners);lt.Documents.UI._invoker.beginInvoke0(this._documentViewer.get_view().get_imageViewer(),i);d=new lt.Documents.UI.DocumentViewerOperationEventArgs(20,null,b,null,a,!0);this._documentViewer.onOperation(d);this._documentViewer.get_text().clearSelection(a);return!0}catch(j){return d=new lt.Documents.UI.DocumentViewerOperationEventArgs(20,j,null,null,a,!0),this._documentViewer.onOperation(d),!1}},_setTextReviewRectangles:function(a,b,c){var d=
this._documentViewer.get_document(),e=this._automation.get_containers().get_item(a-1),g=this._documentViewer.get_view().get_imageViewer(),a=g.get_items().get_item(a-1),f=null,h=null!=b?b.length:0;0<h&&(f=Array(h));for(var i=0;i<h;i++){var j=lt.Controls.PrimitivesHelper.toLeadRectD(d.rectToPixels(b[i].get_bounds())),j=g.convertRect(a,lt.Controls.ImageViewerCoordinateType.image,lt.Controls.ImageViewerCoordinateType.control,j),j=e.get_mapper().rectToContainerCoordinates(j);f[i]=j}c.setRectangles(f)},
_getModifiedContainers:function(){for(var a=null,b=this._documentViewer.get_document().pages.get_count(),c=1;c<=b;c++){var d=c-1;this._automation.get_containers().get_item(d).get_isModified()&&(null==a&&(a=[]),a.add(this._automation.get_containers().get_item(d)))}return a},_resetModifiedContainers:function(a){if(null!=a)for(a=ss.IEnumerator.getEnumerator(a);a.moveNext();)a.current.set_isModified(!1)},_beginUpdate:function(){},_endUpdate:function(){},dispose:function(){this._destroy(!0)},_beginCreateAutomationLoop:function(){this._automation.beginUpdateContainers()},
_endCreateAutomationLoop:function(){this._automation.endUpdateContainers()},_prepareToSave:function(){var a=this._getModifiedContainers(),b=this._documentViewer.get_document();if(null==a||!a.length)return b.annotations.modifiedContainers=null,!1;new lt.Annotations.Core.AnnCodecs;for(var c=Array(a.length),d=0;d<a.length;d++)c[d]=a[d];b.annotations.modifiedContainers=c;this._resetModifiedContainers(a);return!0}};Object.defineProperty(lt.Documents.UI.DocumentViewerAnnotations.prototype,"documentViewer",
{get:lt.Documents.UI.DocumentViewerAnnotations.prototype.get_documentViewer,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerAnnotations.prototype,"automationManager",{get:lt.Documents.UI.DocumentViewerAnnotations.prototype.get_automationManager,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerAnnotations.prototype,"automation",{get:lt.Documents.UI.DocumentViewerAnnotations.prototype.get_automation,enumerable:!0,configurable:!0});
Object.defineProperty(lt.Documents.UI.DocumentViewerAnnotations.prototype,"automationControl",{get:lt.Documents.UI.DocumentViewerAnnotations.prototype.get_automationControl,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerAnnotations.prototype,"interactiveMode",{get:lt.Documents.UI.DocumentViewerAnnotations.prototype.get_interactiveMode,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerAnnotations.prototype,"isLoading",{get:lt.Documents.UI.DocumentViewerAnnotations.prototype.get_isLoading,
enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerAnnotations.prototype,"useRotateThumbs",{get:lt.Documents.UI.DocumentViewerAnnotations.prototype.get_useRotateThumbs,set:lt.Documents.UI.DocumentViewerAnnotations.prototype.set_useRotateThumbs,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerAnnotations.prototype,"renderOnThumbnails",{get:lt.Documents.UI.DocumentViewerAnnotations.prototype.get_renderOnThumbnails,set:lt.Documents.UI.DocumentViewerAnnotations.prototype.set_renderOnThumbnails,
enumerable:!0,configurable:!0});lt.Documents.UI.ImageViewerAutomationControl=function(){this._containerIndex=-1};lt.Documents.UI.ImageViewerAutomationControl._renderContainer=function(a,b,c,d){var e=a.get_context(),a=a.get_clipRectangle().clone();b.attach(c,e);try{var g=lt.LeadRectD.create(a.get_x(),a.get_y(),a.get_width(),a.get_height()),g=c.get_mapper().rectToContainerCoordinates(g);b.render(g,d)}finally{b.detach()}};lt.Documents.UI.ImageViewerAutomationControl.prototype={get__multiContainerMode:function(){return 1},
set__multiContainerMode:function(a){return a},_fixWarnings:function(){null!=this.__automationEnabledChanged&&this.__automationEnabledChanged(null,null);null!=this.__automationGotFocus&&this.__automationGotFocus(null,null);null!=this.__automationLostFocus&&this.__automationLostFocus(null,null)},dispose:function(){this._unhook()},_imageViewer:null,get_imageViewer:function(){return this._imageViewer},set_imageViewer:function(a){this._imageViewer!==a&&(this._unhook(),this._imageViewer=a,this._hook());
return a},get_automationScrollOffset:function(){return null!=this._imageViewer?this._imageViewer.get_scrollOffset():lt.LeadPointD.create(0,0)},_hook:function(){null!=this._imageViewer&&(this._imageViewer.add_propertyChanged(ss.Delegate.create(this,this._imageViewer_PropertyChanged)),this._imageViewer.add_itemChanged(ss.Delegate.create(this,this._imageViewer_ItemChanged)),this._imageViewer.add_activeItemChanged(ss.Delegate.create(this,this._imageViewer_ActiveItemChanged)),this._imageViewer.add_transformChanged(ss.Delegate.create(this,
this._imageViewer_TransformChanged)),this._imageViewer.add_postRender(ss.Delegate.create(this,this._imageViewer_PostRender)))},_unhook:function(){null!=this._imageViewer&&(this._imageViewer.remove_propertyChanged(ss.Delegate.create(this,this._imageViewer_PropertyChanged)),this._imageViewer.remove_itemChanged(ss.Delegate.create(this,this._imageViewer_ItemChanged)),this._imageViewer.remove_activeItemChanged(ss.Delegate.create(this,this._imageViewer_ActiveItemChanged)),this._imageViewer.remove_transformChanged(ss.Delegate.create(this,
this._imageViewer_TransformChanged)),this._imageViewer.remove_postRender(ss.Delegate.create(this,this._imageViewer_PostRender)),null!=this._automationObject&&this._automationObject.remove_activeContainerChanged(ss.Delegate.create(this,this._automationObject_ActiveContainerChanged)))},_automationObject:null,get_automationObject:function(){return this._automationObject},set_automationObject:function(a){null!=this._automationObject&&this._automationObject.remove_activeContainerChanged(ss.Delegate.create(this,
this._automationObject_ActiveContainerChanged));this._automationObject=Type.safeCast(a,lt.Annotations.Automation.AnnAutomation);null!=this._automationObject&&this._automationObject.add_activeContainerChanged(ss.Delegate.create(this,this._automationObject_ActiveContainerChanged));return a},add_automationPointerDown:function(a){this.__automationPointerDown=ss.Delegate.combine(this.__automationPointerDown,a)},remove_automationPointerDown:function(a){this.__automationPointerDown=ss.Delegate.remove(this.__automationPointerDown,
a)},__automationPointerDown_handler_get:function(){null==this.__automationPointerDown_handler&&(this.__automationPointerDown_handler=ss.EventHandler.create(this,this.add_automationPointerDown,this.remove_automationPointerDown));return this.__automationPointerDown_handler},__automationPointerDown:null,__automationPointerDown_handler:null,add_automationPointerMove:function(a){this.__automationPointerMove=ss.Delegate.combine(this.__automationPointerMove,a)},remove_automationPointerMove:function(a){this.__automationPointerMove=
ss.Delegate.remove(this.__automationPointerMove,a)},__automationPointerMove_handler_get:function(){null==this.__automationPointerMove_handler&&(this.__automationPointerMove_handler=ss.EventHandler.create(this,this.add_automationPointerMove,this.remove_automationPointerMove));return this.__automationPointerMove_handler},__automationPointerMove:null,__automationPointerMove_handler:null,add_automationPointerUp:function(a){this.__automationPointerUp=ss.Delegate.combine(this.__automationPointerUp,a)},
remove_automationPointerUp:function(a){this.__automationPointerUp=ss.Delegate.remove(this.__automationPointerUp,a)},__automationPointerUp_handler_get:function(){null==this.__automationPointerUp_handler&&(this.__automationPointerUp_handler=ss.EventHandler.create(this,this.add_automationPointerUp,this.remove_automationPointerUp));return this.__automationPointerUp_handler},__automationPointerUp:null,__automationPointerUp_handler:null,add_automationDoubleClick:function(a){this.__automationDoubleClick=
ss.Delegate.combine(this.__automationDoubleClick,a)},remove_automationDoubleClick:function(a){this.__automationDoubleClick=ss.Delegate.remove(this.__automationDoubleClick,a)},__automationDoubleClick_handler_get:function(){null==this.__automationDoubleClick_handler&&(this.__automationDoubleClick_handler=ss.EventHandler.create(this,this.add_automationDoubleClick,this.remove_automationDoubleClick));return this.__automationDoubleClick_handler},__automationDoubleClick:null,__automationDoubleClick_handler:null,
onAutomationPointerDown:function(a){null!=this.__automationPointerDown&&this.__automationPointerDown(this,a)},onAutomationPointerMove:function(a){null!=this.__automationPointerMove&&this.__automationPointerMove(this,a)},onAutomationPointerUp:function(a){null!=this.__automationPointerUp&&this.__automationPointerUp(this,a)},onAutomationDoubleClick:function(a){null!=this.__automationDoubleClick&&this.__automationDoubleClick(this,a)},get_automationDpiX:function(){return null!=this._imageViewer?this._imageViewer.get_screenDpi().get_width():
96},get_automationDpiY:function(){return null!=this._imageViewer?this._imageViewer.get_screenDpi().get_height():96},get_automationEnabled:function(){return null!=this._imageViewer},add_automationEnabledChanged:function(a){this.__automationEnabledChanged=ss.Delegate.combine(this.__automationEnabledChanged,a)},remove_automationEnabledChanged:function(a){this.__automationEnabledChanged=ss.Delegate.remove(this.__automationEnabledChanged,a)},__automationEnabledChanged_handler_get:function(){null==this.__automationEnabledChanged_handler&&
(this.__automationEnabledChanged_handler=ss.EventHandler.create(this,this.add_automationEnabledChanged,this.remove_automationEnabledChanged));return this.__automationEnabledChanged_handler},__automationEnabledChanged:null,__automationEnabledChanged_handler:null,add_automationGotFocus:function(a){this.__automationGotFocus=ss.Delegate.combine(this.__automationGotFocus,a)},remove_automationGotFocus:function(a){this.__automationGotFocus=ss.Delegate.remove(this.__automationGotFocus,a)},__automationGotFocus_handler_get:function(){null==
this.__automationGotFocus_handler&&(this.__automationGotFocus_handler=ss.EventHandler.create(this,this.add_automationGotFocus,this.remove_automationGotFocus));return this.__automationGotFocus_handler},__automationGotFocus:null,__automationGotFocus_handler:null,add_automationLostFocus:function(a){this.__automationLostFocus=ss.Delegate.combine(this.__automationLostFocus,a)},remove_automationLostFocus:function(a){this.__automationLostFocus=ss.Delegate.remove(this.__automationLostFocus,a)},__automationLostFocus_handler_get:function(){null==
this.__automationLostFocus_handler&&(this.__automationLostFocus_handler=ss.EventHandler.create(this,this.add_automationLostFocus,this.remove_automationLostFocus));return this.__automationLostFocus_handler},__automationLostFocus:null,__automationLostFocus_handler:null,add_automationSizeChanged:function(a){this.__automationSizeChanged=ss.Delegate.combine(this.__automationSizeChanged,a)},remove_automationSizeChanged:function(a){this.__automationSizeChanged=ss.Delegate.remove(this.__automationSizeChanged,
a)},__automationSizeChanged_handler_get:function(){null==this.__automationSizeChanged_handler&&(this.__automationSizeChanged_handler=ss.EventHandler.create(this,this.add_automationSizeChanged,this.remove_automationSizeChanged));return this.__automationSizeChanged_handler},__automationSizeChanged:null,__automationSizeChanged_handler:null,_imageViewer_ItemChanged:function(a,b){switch(b.get_reason()){case lt.Controls.ImageViewerItemChangedReason.url:case lt.Controls.ImageViewerItemChangedReason.image:case lt.Controls.ImageViewerItemChangedReason.imageChanged:case lt.Controls.ImageViewerItemChangedReason.size:case lt.Controls.ImageViewerItemChangedReason.transform:null!=
this.__automationTransformChanged&&this.__automationTransformChanged(this,lt.LeadEventArgs.Empty),null!=this.__automationSizeChanged&&this.__automationSizeChanged(this,lt.LeadEventArgs.Empty)}},_imageViewer_ActiveItemChanged:function(){this._syncActiveItemContainer(!0)},_automationObject_ActiveContainerChanged:function(){this._syncActiveItemContainer(!1)},_syncActiveItemContainer:function(a){if(!(null==this._automationObject||null==this._imageViewer)){var b=this._imageViewer.get_items().get_count(),
c=this._automationObject.get_containers().get_count();b&&b===c&&(b=this._imageViewer.get_items().indexOf(this._imageViewer.get_activeItem()),c=-1,null!=this._automationObject.get_activeContainer()&&(c=this._automationObject.get_containers().indexOf(this._automationObject.get_activeContainer())),b!==c&&(a?-1!==b&&this._automationObject.set_activeContainer(this._automationObject.get_containers().get_item(b)):-1!==c&&this._imageViewer.set_activeItem(this._imageViewer.get_items().get_item(c))))}},_getItemForCurrentContainer:function(){return null==
this._imageViewer?null:-1!==this._containerIndex?this._containerIndex<this._imageViewer.get_items().get_count()?this._imageViewer.get_items().get_item(this._containerIndex):null:this._imageViewer.get_activeItem()},get_automationTransform:function(){var a=this._getItemForCurrentContainer();return null!=a?this._imageViewer.getItemBounds(a,lt.Controls.ImageViewerItemPart.item).get_isEmpty()?(a=lt.LeadMatrix.get_identity(),a.set_offsetX(-1E5),a.set_offsetY(-1E5),a):this._imageViewer.getItemImageTransformWithDpi(a,
!1):lt.LeadMatrix.get_identity()},add_automationTransformChanged:function(a){this.__automationTransformChanged=ss.Delegate.combine(this.__automationTransformChanged,a)},remove_automationTransformChanged:function(a){this.__automationTransformChanged=ss.Delegate.remove(this.__automationTransformChanged,a)},__automationTransformChanged_handler_get:function(){null==this.__automationTransformChanged_handler&&(this.__automationTransformChanged_handler=ss.EventHandler.create(this,this.add_automationTransformChanged,
this.remove_automationTransformChanged));return this.__automationTransformChanged_handler},__automationTransformChanged:null,__automationTransformChanged_handler:null,_imageViewer_TransformChanged:function(){null!=this.__automationTransformChanged&&this.__automationTransformChanged(this,lt.LeadEventArgs.Empty)},get_automationUseDpi:function(){return null!=this._imageViewer&&this._imageViewer.get_useDpi()},add_automationUseDpiChanged:function(a){this.__automationUseDpiChanged=ss.Delegate.combine(this.__automationUseDpiChanged,
a)},remove_automationUseDpiChanged:function(a){this.__automationUseDpiChanged=ss.Delegate.remove(this.__automationUseDpiChanged,a)},__automationUseDpiChanged_handler_get:function(){null==this.__automationUseDpiChanged_handler&&(this.__automationUseDpiChanged_handler=ss.EventHandler.create(this,this.add_automationUseDpiChanged,this.remove_automationUseDpiChanged));return this.__automationUseDpiChanged_handler},__automationUseDpiChanged:null,__automationUseDpiChanged_handler:null,_imageViewer_PropertyChanged:function(a,
b){switch(b.get_propertyName()){case "UseDpi":null!=this.__automationUseDpiChanged&&this.__automationUseDpiChanged(this,lt.LeadEventArgs.Empty)}},get_automationXResolution:function(){var a=this._getItemForCurrentContainer();return null!=a?a.get_resolution().get_width():96},get_automationYResolution:function(){var a=this._getItemForCurrentContainer();return null!=a?a.get_resolution().get_height():96},automationInvalidate:function(a){null!=this._imageViewer&&this._imageViewer.invalidate(a)},_antiAlias:!1,
get_automationAntiAlias:function(){return this._antiAlias},set_automationAntiAlias:function(a){this._antiAlias=a;null!=this._imageViewer&&this._imageViewer.invalidate(lt.LeadRectD.get_empty());return a},_renderingEngine:null,get_renderingEngine:function(){return this._renderingEngine},set_renderingEngine:function(a){return this._renderingEngine=a},_imageViewer_PostRender:function(a,b){var c=Type.safeCast(this.get_renderingEngine(),lt.Annotations.Rendering.AnnHtml5RenderingEngine);if(null!=c){var d=
!1;null!=this._automationObject&&null!=this._automationObject.get_manager()&&(d=this._automationObject.get_manager().get_userMode()===lt.Annotations.Core.AnnUserMode.run);this.get_automationAntiAlias();if(null!=this._getContainersCallback){var e=this._getContainersCallback(),g=b.get_clipRectangle().clone();if(null!=e)for(var f=0;f<e.get_count();f++)if(f<this._imageViewer.get_items().get_count()&&!this._imageViewer.getItemBounds(this._imageViewer.get_items().get_item(f),lt.Controls.ImageViewerItemPart.item).get_isEmpty()){var h=
e.get_item(f),i=this._imageViewer.get_items().get_item(f),j=this._automationObject.getContainerInvalidRect(h,!0);(!j.get_isEmpty()&&j.intersectsWith(g)||!this._imageViewer.getItemViewBounds(i,lt.Controls.ImageViewerItemPart.item,!0).get_isEmpty())&&lt.Documents.UI.ImageViewerAutomationControl._renderContainer(b,c,h,d)}}else h=this._container,null!=h&&lt.Documents.UI.ImageViewerAutomationControl._renderContainer(b,c,h,d)}},_getContainersCallback:null,get_automationGetContainersCallback:function(){return this._getContainersCallback},
set_automationGetContainersCallback:function(a){return this._getContainersCallback=a},get_automationContainerIndex:function(){return this._containerIndex},set_automationContainerIndex:function(a){return this._containerIndex=a},_container:null,automationAttach:function(a){this._container=a},automationDetach:function(){this._container=null},_dataProvider:null,get_automationDataProvider:function(){return this._dataProvider},set_automationDataProvider:function(a){return this._dataProvider=a}};Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,
"imageViewer",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.get_imageViewer,set:lt.Documents.UI.ImageViewerAutomationControl.prototype.set_imageViewer,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationScrollOffset",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.get_automationScrollOffset,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationObject",
{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.get_automationObject,set:lt.Documents.UI.ImageViewerAutomationControl.prototype.set_automationObject,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationPointerDown",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.__automationPointerDown_handler_get,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationPointerMove",
{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.__automationPointerMove_handler_get,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationPointerUp",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.__automationPointerUp_handler_get,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationDoubleClick",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.__automationDoubleClick_handler_get,
enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationDpiX",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.get_automationDpiX,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationDpiY",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.get_automationDpiY,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,
"automationEnabled",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.get_automationEnabled,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationEnabledChanged",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.__automationEnabledChanged_handler_get,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationGotFocus",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.__automationGotFocus_handler_get,
enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationLostFocus",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.__automationLostFocus_handler_get,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationSizeChanged",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.__automationSizeChanged_handler_get,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,
"automationTransform",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.get_automationTransform,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationTransformChanged",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.__automationTransformChanged_handler_get,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationUseDpi",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.get_automationUseDpi,
enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationUseDpiChanged",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.__automationUseDpiChanged_handler_get,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationXResolution",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.get_automationXResolution,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,
"automationYResolution",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.get_automationYResolution,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationAntiAlias",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.get_automationAntiAlias,set:lt.Documents.UI.ImageViewerAutomationControl.prototype.set_automationAntiAlias,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,
"renderingEngine",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.get_renderingEngine,set:lt.Documents.UI.ImageViewerAutomationControl.prototype.set_renderingEngine,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationGetContainersCallback",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.get_automationGetContainersCallback,set:lt.Documents.UI.ImageViewerAutomationControl.prototype.set_automationGetContainersCallback,
enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationContainerIndex",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.get_automationContainerIndex,set:lt.Documents.UI.ImageViewerAutomationControl.prototype.set_automationContainerIndex,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.ImageViewerAutomationControl.prototype,"automationDataProvider",{get:lt.Documents.UI.ImageViewerAutomationControl.prototype.get_automationDataProvider,
set:lt.Documents.UI.ImageViewerAutomationControl.prototype.set_automationDataProvider,enumerable:!0,configurable:!0});lt.Documents.UI.DocumentViewerBookmarks=function(a){this._documentViewer=a};lt.Documents.UI.DocumentViewerBookmarks.prototype={_destroy:function(a){a&&(this._stopWorking(),this._deleteControls())},_documentViewer:null,get_documentViewer:function(){return this._documentViewer},_init:function(a){this._createControls(a)},get_isLoading:function(){return null!=this._bookmarksWorker&&this._bookmarksWorker.get_isWorking()},
_bookmarksWorker:null,_startWorking:function(){this._stopWorking();if(this._documentViewer.get_hasDocument()){var a=this._documentViewer.get_document();if(a.isStructureSupported&&a.structure.isParsed)this._populateBookmarks(a);else{var b=new lt.Documents.UI.DocumentViewerOperationEventArgs(21,null,null,null,0,!1);this._documentViewer.onOperation(b);b.get_abort()||(this._bookmarksWorker=new lt.Documents.UI._bookmarksWorker,this._bookmarksWorker.add_preProcessItem(ss.Delegate.create(this,this._bookmarksWorker_PreProcessItem)),
this._bookmarksWorker.add_postProcessItem(ss.Delegate.create(this,this._bookmarksWorker_PostProcessItem)),this._bookmarksWorker.add_completed(ss.Delegate.create(this,this._bookmarksWorker_Completed)),this._bookmarksWorker.start(a))}}},_stopWorking:function(){this._deleteWorker();this._clearBookmarks()},_addPages:function(){this._documentViewer.get_hasDocument()&&this._populateBookmarks(this._documentViewer.get_document())},_removePages:function(){this._documentViewer.get_hasDocument()&&this._populateBookmarks(this._documentViewer.get_document())},
_deleteWorker:function(){null!=this._bookmarksWorker&&(this._bookmarksWorker.stop(),this._bookmarksWorker.remove_preProcessItem(ss.Delegate.create(this,this._bookmarksWorker_PreProcessItem)),this._bookmarksWorker.remove_postProcessItem(ss.Delegate.create(this,this._bookmarksWorker_PostProcessItem)),this._bookmarksWorker.remove_completed(ss.Delegate.create(this,this._bookmarksWorker_Completed)),this._bookmarksWorker.dispose(),this._bookmarksWorker=null,this._documentViewer.onOperation(new lt.Documents.UI.DocumentViewerOperationEventArgs(21,
null,null,null,0,!0)))},_gotoBookmark:function(a,b){var c=this._documentViewer.get_document().pages.getTargetPageNumber(a,b.target.pageNumber);if(c!==b.target.pageNumber){var d=b.clone(!1),e=b.target.clone();e.pageNumber=c;d.target=e;b=d}c=new lt.Documents.UI.DocumentViewerOperationEventArgs(13,null,b,null,0,!1);this._documentViewer.onOperation(c);c.get_abort()||(this._documentViewer.gotoBookmark(b),c=new lt.Documents.UI.DocumentViewerOperationEventArgs(13,null,b,null,0,!0),this._documentViewer.onOperation(c))},
_prepareToSave:function(){},_beginUpdate:function(){},_endUpdate:function(){},_bookmarksWorker_PreProcessItem:function(){},_bookmarksWorker_PostProcessItem:function(a,b){ss.Delegate.create(this,function(a,b){if(!(null==this._bookmarksWorker||this._bookmarksWorker.get_isCancelPending()||this._bookmarksWorker!==b.get__itemsWorker())){var e;null==b.get_error()?this._finishLoadingBookmarks(b.get_data1()):(e=new lt.Documents.UI.DocumentViewerOperationEventArgs(21,b.get_error(),null,null,0,!0),this._documentViewer.onOperation(e))}})(this,
b)},_bookmarksWorker_Completed:function(){},dispose:function(){this._destroy(!0)},_list:null,_treeView:null,get_treeView:function(){return this._treeView},_createControls:function(a){null!=a.get_bookmarksContainer()&&(this._treeView=document.createElement("div"),this._list=document.createElement("ul"),this._treeView.appendChild(this._list),this._treeView.style.width="100%",this._treeView.style.height="100%",this._list.addEventListener("click",ss.Delegate.create(this,this._element_OnClick),!1),a.get_bookmarksContainer().appendChild(this._treeView))},
_deleteControls:function(){null!=this._treeView&&(null!=this._treeView.parentNode&&this._treeView.parentNode.removeChild(this._treeView),this._list.removeEventListener("click",ss.Delegate.create(this,this._element_OnClick),!1),this._treeView=this._list=null)},_populateBookmarks:function(a){if(null!=this._treeView&&(this._clearBookmarks(),a.isStructureSupported&&a.structure.isParsed&&null!=a.structure&&null!=a.structure.bookmarks)){this._addBookmarks(a,a.structure.bookmarks,this._list);for(a=ss.IEnumerator.getEnumerator(a.documents);a.moveNext();){var b=
a.current;b.isStructureSupported&&b.structure.isParsed&&this._addBookmarks(b,b.structure.bookmarks,this._list)}}},_addBookmarks:function(a,b,c){if(null!=b)for(b=ss.IEnumerator.getEnumerator(b);b.moveNext();){var d=b.current,e=a.createElement("li");e.textContent=d.title;c.appendChild(e);var g=new lt.Documents.UI._myDocumentBookmark;g.document=a;g.bookmark=d;e.setAttribute("data-lead",g);g=e;0<d.children.length&&(g=a.createElement("ul"),e.appendChild(g),this._addBookmarks(a,d.children,g))}},_clearBookmarks:function(){if(null!=
this._treeView)for(var a=this._list.childNodes.length-1;0<=a;a--)this._list.removeChild(this._list.childNodes[a])},_element_OnClick:function(a){a=a.target.getAttribute("data-lead");null!=a&&this._gotoBookmark(a.document,a.bookmark)},_finishLoadingBookmarks:function(a){var b=Type.safeCast(a,IDeferred);null!=b&&(a=ss.Delegate.create(this,function(){var a;b.done(ss.Delegate.create(this,function(){null!=this._documentViewer.get_document()&&null!=this._documentViewer.get_document().structure&&this._documentViewer.get_document().structure.isParsed&&
this._populateBookmarks(this._documentViewer.get_document());a=new lt.Documents.UI.DocumentViewerOperationEventArgs(21,null,this._documentViewer.get_document().structure,null,0,!0);this._documentViewer.onOperation(a)}));b.fail(ss.Delegate.create(this,function(b){b=lt.Documents.ServiceError.parseError(b,"error",Type.safeCast(b.statusText,String));a=new lt.Documents.UI.DocumentViewerOperationEventArgs(21,Error(b.isParseError?b.errorThrown:b.detail),null,null,0,!0);this._documentViewer.onOperation(a)}))}),
lt.Documents.UI._invoker.beginInvoke0(null,a))}};Object.defineProperty(lt.Documents.UI.DocumentViewerBookmarks.prototype,"documentViewer",{get:lt.Documents.UI.DocumentViewerBookmarks.prototype.get_documentViewer,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerBookmarks.prototype,"isLoading",{get:lt.Documents.UI.DocumentViewerBookmarks.prototype.get_isLoading,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerBookmarks.prototype,
"treeView",{get:lt.Documents.UI.DocumentViewerBookmarks.prototype.get_treeView,enumerable:!0,configurable:!0});lt.Documents.UI._myDocumentBookmark=function(){};lt.Documents.UI._myDocumentBookmark.prototype={document:null,bookmark:null};lt.Documents.UI.DocumentViewerCommand=function(){};lt.Documents.UI.DocumentViewerCommand._create=function(a,b,c,d){return lt.Documents.UI.DocumentViewerCommand._doCreate(a,b,c,null,d,!1,!1)};lt.Documents.UI.DocumentViewerCommand._createState=function(a,b,c,d,e){return lt.Documents.UI.DocumentViewerCommand._doCreate(a,
b,c,null,d,!0,e)};lt.Documents.UI.DocumentViewerCommand._createSlow=function(a,b,c,d,e){return lt.Documents.UI.DocumentViewerCommand._doCreate(a,b,c,d,e,!1,!1)};lt.Documents.UI.DocumentViewerCommand._doCreate=function(a,b,c,d,e,g,f){var h=new lt.Documents.UI.DocumentViewerCommand;h._name=a;h._canRunHandler=b;h._runHandler=c;h._isSlowHandler=d;h._tag=e;h._value=null;h._hasState=g;h._state=f;return h};lt.Documents.UI.DocumentViewerCommand.prototype={_name:null,get_name:function(){return this._name},
set_name:function(a){return this._name=a},_canRunHandler:null,get_canRunHandler:function(){return this._canRunHandler},set_canRunHandler:function(a){return this._canRunHandler=a},_runHandler:null,get_runHandler:function(){return this._runHandler},set_runHandler:function(a){return this._runHandler=a},_isSlowHandler:null,get_isSlowHandler:function(){return this._isSlowHandler},set_isSlowHandler:function(a){return this._isSlowHandler=a},_tag:null,get_tag:function(){return this._tag},set_tag:function(a){return this._tag=
a},_value:null,get_value:function(){return this._value},set_value:function(a){return this._value=a},_hasState:!1,get_hasState:function(){return this._hasState},set_hasState:function(a){return this._hasState=a},_state:!1,get_state:function(){return this._state},set_state:function(a){return this._state=a},preRun:function(a,b){if(null==a)throw new lt.ArgumentNullException("documentViewer");var c=new lt.Documents.UI.DocumentViewerOperationEventArgs(5,null,this,b,0,!1);a.onOperation(c);return!c.get_abort()},
postRun:function(a,b){if(null==a)throw new lt.ArgumentNullException("documentViewer");var c=new lt.Documents.UI.DocumentViewerOperationEventArgs(5,null,this,b,0,!0);a.onOperation(c)}};Object.defineProperty(lt.Documents.UI.DocumentViewerCommand.prototype,"name",{get:lt.Documents.UI.DocumentViewerCommand.prototype.get_name,set:lt.Documents.UI.DocumentViewerCommand.prototype.set_name,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerCommand.prototype,"canRunHandler",
{get:lt.Documents.UI.DocumentViewerCommand.prototype.get_canRunHandler,set:lt.Documents.UI.DocumentViewerCommand.prototype.set_canRunHandler,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerCommand.prototype,"runHandler",{get:lt.Documents.UI.DocumentViewerCommand.prototype.get_runHandler,set:lt.Documents.UI.DocumentViewerCommand.prototype.set_runHandler,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerCommand.prototype,"isSlowHandler",
{get:lt.Documents.UI.DocumentViewerCommand.prototype.get_isSlowHandler,set:lt.Documents.UI.DocumentViewerCommand.prototype.set_isSlowHandler,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerCommand.prototype,"tag",{get:lt.Documents.UI.DocumentViewerCommand.prototype.get_tag,set:lt.Documents.UI.DocumentViewerCommand.prototype.set_tag,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerCommand.prototype,"value",{get:lt.Documents.UI.DocumentViewerCommand.prototype.get_value,
set:lt.Documents.UI.DocumentViewerCommand.prototype.set_value,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerCommand.prototype,"hasState",{get:lt.Documents.UI.DocumentViewerCommand.prototype.get_hasState,set:lt.Documents.UI.DocumentViewerCommand.prototype.set_hasState,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerCommand.prototype,"state",{get:lt.Documents.UI.DocumentViewerCommand.prototype.get_state,set:lt.Documents.UI.DocumentViewerCommand.prototype.set_state,
enumerable:!0,configurable:!0});lt.Documents.UI.DocumentViewerCommands=function(a){this._documentViewer=a};lt.Documents.UI.DocumentViewerCommands.prototype={_commands:null,get__commands:function(){return this._commands},getCommand:function(a){return this._commands[a]},_init:function(){this._commands={};lt.Documents.UI._commandHelper.initCommands(this._commands)},_destroy:function(){Object.clearKeys(this._commands);this._commands=null},_documentViewer:null,get_documentViewer:function(){return this._documentViewer},
canRun:function(a,b){var c=!1;if(Object.keyExists(this._commands,a)){var d=this._commands[a];null!=d.get_canRunHandler()&&(c=d.get_canRunHandler()(this._documentViewer,d,b))}return c},run:function(a,b){if(Object.keyExists(this._commands,a)){var c=this._commands[a];if(null!=c.get_runHandler()&&null!=c.get_canRunHandler()&&c.get_canRunHandler()(this._documentViewer,c,b))return c.get_runHandler()(this._documentViewer,c,b)}return null},isSlow:function(a,b){var c=!1;if(Object.keyExists(this._commands,
a)){var d=this._commands[a];null!=d.get_isSlowHandler()&&(c=d.get_isSlowHandler()(this._documentViewer,d,b))}return c}};Object.defineProperty(lt.Documents.UI.DocumentViewerCommands.prototype,"documentViewer",{get:lt.Documents.UI.DocumentViewerCommands.prototype.get_documentViewer,enumerable:!0,configurable:!0});lt.Documents.UI.DocumentViewerCreateOptions=function(){this._init()};lt.Documents.UI.DocumentViewerCreateOptions.prototype={_viewContainer:null,get_viewContainer:function(){return this._viewContainer},
set_viewContainer:function(a){return this._viewContainer=a},_thumbnailsContainer:null,get_thumbnailsContainer:function(){return this._thumbnailsContainer},set_thumbnailsContainer:function(a){return this._thumbnailsContainer=a},_bookmarksContainer:null,get_bookmarksContainer:function(){return this._bookmarksContainer},set_bookmarksContainer:function(a){return this._bookmarksContainer=a},_useAnnotations:!0,get_useAnnotations:function(){return this._useAnnotations},set_useAnnotations:function(a){return this._useAnnotations=
a},_init:function(){this._viewCreateOptions=new lt.Controls.ImageViewerCreateOptions(null);this._thumbnailsCreateOptions=new lt.Controls.ImageViewerCreateOptions(null);this._viewCreateOptions.set_useElements(!0);this._thumbnailsCreateOptions.set_useElements(!0);var a=new lt.Controls.ImageViewerElementsModeCreateOptions;a.set_classPrefix("lt-thumb");this._thumbnailsCreateOptions.set_elementsModeOptions(a)},_viewCreateOptions:null,get_viewCreateOptions:function(){return this._viewCreateOptions},_thumbnailsCreateOptions:null,
get_thumbnailsCreateOptions:function(){return this._thumbnailsCreateOptions}};Object.defineProperty(lt.Documents.UI.DocumentViewerCreateOptions.prototype,"viewContainer",{get:lt.Documents.UI.DocumentViewerCreateOptions.prototype.get_viewContainer,set:lt.Documents.UI.DocumentViewerCreateOptions.prototype.set_viewContainer,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerCreateOptions.prototype,"thumbnailsContainer",{get:lt.Documents.UI.DocumentViewerCreateOptions.prototype.get_thumbnailsContainer,
set:lt.Documents.UI.DocumentViewerCreateOptions.prototype.set_thumbnailsContainer,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerCreateOptions.prototype,"bookmarksContainer",{get:lt.Documents.UI.DocumentViewerCreateOptions.prototype.get_bookmarksContainer,set:lt.Documents.UI.DocumentViewerCreateOptions.prototype.set_bookmarksContainer,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerCreateOptions.prototype,"useAnnotations",{get:lt.Documents.UI.DocumentViewerCreateOptions.prototype.get_useAnnotations,
set:lt.Documents.UI.DocumentViewerCreateOptions.prototype.set_useAnnotations,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerCreateOptions.prototype,"viewCreateOptions",{get:lt.Documents.UI.DocumentViewerCreateOptions.prototype.get_viewCreateOptions,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerCreateOptions.prototype,"thumbnailsCreateOptions",{get:lt.Documents.UI.DocumentViewerCreateOptions.prototype.get_thumbnailsCreateOptions,
enumerable:!0,configurable:!0});lt.Documents.UI.DocumentViewerDiagnostics=function(a){this._documentViewer=a};lt.Documents.UI.DocumentViewerDiagnostics._hiliteBounds=function(a,b,c,d,e){if(!c.get_isEmpty()&&!(1>c.get_width()||1>c.get_height()))c=lt.Controls.PrimitivesHelper.getCornerPoints(lt.Controls.PrimitivesHelper.toLeadRectD(c)),d.get_isIdentity()||d.transformPoints(c),d=lt.Controls.PrimitivesHelper.getBoundingRect(c),lt.Documents.UI.DocumentViewerDiagnostics._drawAndFill(a,b,c),String.isNullOrEmpty(e)||
lt.Documents.UI.DocumentViewerDiagnostics._drawText(a,e,lt.LeadPointD.create(d.get_x(),d.get_y()))};lt.Documents.UI.DocumentViewerDiagnostics._drawAndFill=function(a,b,c){var d=lt.Documents.UI.DocumentViewerDiagnostics._fills[b],b=lt.Documents.UI.DocumentViewerDiagnostics._strokes[b];if(!(null==d&&null==b)){a.save();null!=d&&(a.fillStyle=d);null!=b&&(a.strokeStyle=b);a.beginPath();for(var e=c.length,g=0;g<e;g++)g?a.lineTo(c[g].get_x(),c[g].get_y()):a.moveTo(c[0].get_x(),c[0].get_y()),g===e-1&&a.lineTo(c[g].get_x(),
c[g].get_y());null!=d&&a.fill();null!=b&&a.stroke();a.restore()}};lt.Documents.UI.DocumentViewerDiagnostics._drawText=function(a,b,c){null==lt.Documents.UI.DocumentViewerDiagnostics._font||null==lt.Documents.UI.DocumentViewerDiagnostics._textColor||(a.save(),a.fillStyle=lt.Documents.UI.DocumentViewerDiagnostics._textColor,a.fillText(b,c.get_x(),c.get_y()),a.restore())};lt.Documents.UI.DocumentViewerDiagnostics.prototype={_documentViewer:null,get_documentViewer:function(){return this._documentViewer},
_showLinks:!1,get_showLinks:function(){return this._showLinks},set_showLinks:function(a){this._showLinks!==a&&(this._showLinks=a,this._update());return a},_showTextCharacters:!1,get_showTextCharacters:function(){return this._showTextCharacters},set_showTextCharacters:function(a){this._showTextCharacters!==a&&(this._showTextCharacters=a,this._update());return a},_update:function(){null!=this._documentViewer.get_view()&&this._documentViewer.get_view().get_imageViewer().invalidate(lt.LeadRectD.get_empty())},
_postRenderViewItem:function(a,b){var c=this._documentViewer.get_document();if(!(null==c||!this.get_showLinks()&&!this.get_showTextCharacters())){var d=b.get_item();if(null!=d){var e=this._documentViewer.get_view();if(null!=e){var g=e.get_imageViewer(),e=g.get_items().indexOf(d)+1,d=g.getItemImageTransform(d);if(this.get_showLinks()&&(g=c.pages.get_item(e-1).getLinks(),null!=g))for(var f=ss.IEnumerator.getEnumerator(g);f.moveNext();)g=c.rectToPixels(f.current.bounds),lt.Documents.UI.DocumentViewerDiagnostics._hiliteBounds(b.get_context(),
0,g,d,null);if(this.get_showTextCharacters()&&(e=this._documentViewer.get_text()._doGetDocumentPageText(e,!1,null),null!=e))for(e=ss.IEnumerator.getEnumerator(e.characters);e.moveNext();)f=e.current,g=f.bounds,g=c.rectToPixels(g),f=lt.Documents.UI._documentViewerHelper.getDocumentCharacterCodeAsString(f),lt.Documents.UI.DocumentViewerDiagnostics._hiliteBounds(b.get_context(),0,g,d,f)}}}}};Object.defineProperty(lt.Documents.UI.DocumentViewerDiagnostics.prototype,"documentViewer",{get:lt.Documents.UI.DocumentViewerDiagnostics.prototype.get_documentViewer,
enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerDiagnostics.prototype,"showLinks",{get:lt.Documents.UI.DocumentViewerDiagnostics.prototype.get_showLinks,set:lt.Documents.UI.DocumentViewerDiagnostics.prototype.set_showLinks,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerDiagnostics.prototype,"showTextCharacters",{get:lt.Documents.UI.DocumentViewerDiagnostics.prototype.get_showTextCharacters,set:lt.Documents.UI.DocumentViewerDiagnostics.prototype.set_showTextCharacters,
enumerable:!0,configurable:!0});lt.Documents.UI.DocumentViewer=function(a){this._usePDFRendering=lt.Documents.UI.DocumentViewer.get_isPDFRenderingSupported();if(null==a)throw new lt.ArgumentNullException("createOptions");this._commands=new lt.Documents.UI.DocumentViewerCommands(this);this._commands._init();this._text=new lt.Documents.UI.DocumentViewerText(this);null!=a.get_viewContainer()&&(this._view=new lt.Documents.UI.DocumentViewerView(this),this._view._init(a,Type.safeCast(this._commands.get__commands()["Layout.Vertical"].get_tag(),
lt.Controls.ImageViewerViewLayout)));null!=a.get_thumbnailsContainer()&&(this._thumbnails=new lt.Documents.UI.DocumentViewerThumbnails(this),this._thumbnails._init(a));null!=a.get_bookmarksContainer()&&(this._bookmarks=new lt.Documents.UI.DocumentViewerBookmarks(this),this._bookmarks._init(a));a.get_useAnnotations()&&null!=this._view&&(this._annotations=new lt.Documents.UI.DocumentViewerAnnotations(this),this._annotations._init(a));this._diagnostics=new lt.Documents.UI.DocumentViewerDiagnostics(this);
null!=this._view&&this._view._initInteractiveModes("Interactive.SelectText")};lt.Documents.UI.DocumentViewer._disposeDocument=function(a){a.dispose()};lt.Documents.UI.DocumentViewer.get_isPDFRenderingSupported=function(){return"undefined"!==typeof PDFJS&&!!PDFJS.getDocument&&(lt.LTHelper.browser===lt.LTBrowser.chrome||lt.LTHelper.browser===lt.LTBrowser.firefox||lt.LTHelper.browser===lt.LTBrowser.internetExplorer&&10<=lt.LTHelper.version&&lt.LTHelper.device===lt.LTDevice.desktop||lt.LTHelper.browser===
lt.LTBrowser.opera||lt.LTHelper.browser===lt.LTBrowser.safari||lt.LTHelper.browser===lt.LTBrowser.edge&&lt.LTHelper.device===lt.LTDevice.desktop)};lt.Documents.UI.DocumentViewer.prototype={_documentPrint:null,print:function(a,b){if(!lt.Documents.UI._documentViewerPrintHandler.isSupported())throw Error("This browser does not support printing.");if(null==a)throw Error("element cannot be null");null!=this._documentPrint&&this._documentPrint.dispose();this._documentPrint=new lt.Documents.UI._documentViewerPrintHandler(this,
a,b);this._documentPrint.print()},dispose:function(){null!=this._documentPrint&&(this._documentPrint.dispose(),this._documentPrint=null);this._destroy(!0)},tag:null,_useAjaxImageLoading:!1,get_useAjaxImageLoading:function(){return this._useAjaxImageLoading},set_useAjaxImageLoading:function(a){return this._useAjaxImageLoading=a},_documentUseAjaxImageLoading:!1,get__documentUseAjaxImageLoading:function(){return this._documentUseAjaxImageLoading},get_usePDFRendering:function(){return this._usePDFRendering},
set_usePDFRendering:function(a){return this._usePDFRendering=a},_pdfRenderingHandler:null,get_isUsingPDFRendering:function(){return null!=this._pdfRenderingHandler},_tryCreatePDFRendering:function(a){var b=!1;if(null!=this._document&&(this._usePDFRendering||!a&&null!=this._pdfRenderingHandler))if("application/pdf"===this._document.mimeType&&null!=this._document.cacheUri)b=!0;else for(var c=ss.IEnumerator.getEnumerator(this._document.documents);c.moveNext();){var d=c.current;if("application/pdf"===
d.mimeType&&null!=d.cacheUri){b=!0;break}}if((a||!b)&&null!=this._pdfRenderingHandler)this._pdfRenderingHandler.dispose(),this._pdfRenderingHandler=null;return b&&null==this._pdfRenderingHandler?(a=null!=this.get_view()?this.get_view().get_imageViewer():null,b=null!=this.get_thumbnails()?this.get_thumbnails().get_imageViewer():null,this._pdfRenderingHandler=new lt.Documents.UI._pdfRenderingHandler(this._document,a,b,ss.Delegate.create(this,function(a,b,d){this.onOperation(new lt.Documents.UI.DocumentViewerOperationEventArgs(a,
b,null,null,d,!0))})),!0):!1},getPDFRenderingObject:function(a){return null==this._pdfRenderingHandler?null:this._pdfRenderingHandler.getPDFDocument(a)},_updateForNewDocument:function(){this._documentUseAjaxImageLoading=this._useAjaxImageLoading;null!=this._documentPrint&&(this._documentPrint.dispose(),this._documentPrint=null);this._tryCreatePDFRendering(!0)},prepareToSave:function(){if(!this.get_hasDocument())return!1;var a=!1;null!=this._view&&this._view._prepareToSave();null!=this._thumbnails&&
this._thumbnails._prepareToSave();null!=this._bookmarks&&this._bookmarks._prepareToSave();null!=this._text&&this._text._prepareToSave();null!=this._annotations&&(a=this._annotations._prepareToSave());return a},_destroy:function(a){if(a&&(this.setDocument(null),null!=this._thumbnails&&(this._thumbnails.dispose(),this._thumbnails=null),null!=this._view&&(this._view.dispose(),this._view=null),null!=this._bookmarks&&(this._bookmarks.dispose(),this._bookmarks=null),null!=this._annotations&&(this._annotations.dispose(),
this._annotations=null),null!=this._commands&&(this._commands._destroy(),this._commands=null),null!=this._text&&(this._text.dispose(),this._text=null),null!=this._diagnostics&&(this._diagnostics=null),null!=this._document&&this._autoDisposeDocument))lt.Documents.UI.DocumentViewer._disposeDocument(this._document),this._document=null},_document:null,get_document:function(){return this._document},_autoDisposeDocument:!0,get_autoDisposeDocument:function(){return this._autoDisposeDocument},set_autoDisposeDocument:function(a){return this._autoDisposeDocument=
a},get_hasDocument:function(){return null!=this._document},get_pageCount:function(){return null!=this._document?this._document.pages.get_count():0},_view:null,get_view:function(){return this._view},_thumbnails:null,get_thumbnails:function(){return this._thumbnails},_bookmarks:null,get_bookmarks:function(){return this._bookmarks},_annotations:null,get_annotations:function(){return this._annotations},_commands:null,get_commands:function(){return this._commands},_text:null,get_text:function(){return this._text},
_userName:null,get_userName:function(){return this._userName},set_userName:function(a){return this._userName=a},_diagnostics:null,get_diagnostics:function(){return this._diagnostics},setDocument:function(a){var b=this._document===a,c=new lt.Documents.UI.DocumentViewerOperationEventArgs(0,null,a,null,0,!1);this.onOperation(c);c.get_abort()||(null!=this._thumbnails&&this._thumbnails._stopWorking(!1),null!=this._bookmarks&&this._bookmarks._stopWorking(),null!=this._annotations&&this._annotations._stopWorking(),
null!=this._view&&this._view._stopWorking(),this._text._stopWorking(),null!=this._document&&this._document.pages.remove_collectionChanged(ss.Delegate.create(this,this._documentPages_CollectionChanged)),null!=this._document&&this._autoDisposeDocument&&!b&&lt.Documents.UI.DocumentViewer._disposeDocument(this._document),this._document=a,this._updateForNewDocument(),null!=this._thumbnails&&this._thumbnails._startWorking(),null!=this._bookmarks&&this._bookmarks._startWorking(),null!=this._annotations&&
this._annotations._startWorking(),null!=this._view&&this._view._startWorking(),this._text._startWorking(),c=new lt.Documents.UI.DocumentViewerOperationEventArgs(0,null,a,null,0,!0),this.onOperation(c),null!=this._document&&this._document.pages.add_collectionChanged(ss.Delegate.create(this,this._documentPages_CollectionChanged)))},_documentPages_CollectionChanged:function(a,b){var c=null;if(b.get_action()===lt.NotifyLeadCollectionChangedAction.add){if(c=new lt.Documents.UI.DocumentViewerOperationEventArgs(24,
null,b.get_newStartingIndex(),b.get_newItems(),0,!1),this.onOperation(c),!c.get_abort()){this.beginUpdate();try{for(var d=[],e=ss.IEnumerator.getEnumerator(b.get_newItems());e.moveNext();){var g=e.current;d.add(g)}this._text._addPages(d,b.get_newStartingIndex());var f=this._tryCreatePDFRendering(!1);null!=this._view&&this._view._addPages(d,b.get_newStartingIndex());this.get_isUsingPDFRendering()&&!f&&this._pdfRenderingHandler.addPages(d,b.get_newStartingIndex());null!=this._thumbnails&&this._thumbnails._addPages(d,
b.get_newStartingIndex());null!=this._annotations&&this._annotations._addPages(d,b.get_newStartingIndex());null!=this._bookmarks&&this._bookmarks._addPages(d,b.get_newStartingIndex());c=new lt.Documents.UI.DocumentViewerOperationEventArgs(24,null,b.get_newStartingIndex(),b.get_newItems(),0,!0);this.onOperation(c)}catch(h){c=new lt.Documents.UI.DocumentViewerOperationEventArgs(24,h,b.get_newStartingIndex(),b.get_newItems(),0,!0),this.onOperation(c)}finally{this.endUpdate()}}}else if(b.get_action()===
lt.NotifyLeadCollectionChangedAction.remove||b.get_action()===lt.NotifyLeadCollectionChangedAction.reset)if(c=new lt.Documents.UI.DocumentViewerOperationEventArgs(25,null,b.get_oldStartingIndex(),b.get_newItems(),0,!1),this.onOperation(c),!c.get_abort()){this.beginUpdate();try{for(var d=[],i=ss.IEnumerator.getEnumerator(b.get_newItems());i.moveNext();)g=i.current,d.add(g);this._tryCreatePDFRendering(!1);this._text._removePages(d,b.get_oldStartingIndex());this.get_isUsingPDFRendering()&&this._pdfRenderingHandler.removePages(d,
b.get_oldStartingIndex());null!=this._view&&this._view._removePages(d,b.get_oldStartingIndex());null!=this._thumbnails&&this._thumbnails._removePages(d,b.get_oldStartingIndex());null!=this._annotations&&this._annotations._removePages(d,b.get_oldStartingIndex());null!=this._bookmarks&&this._bookmarks._removePages(d,b.get_oldStartingIndex());c=new lt.Documents.UI.DocumentViewerOperationEventArgs(25,null,b.get_oldStartingIndex(),b.get_newItems(),0,!0);this.onOperation(c)}catch(j){c=new lt.Documents.UI.DocumentViewerOperationEventArgs(25,
j,b.get_oldStartingIndex(),b.get_newItems(),0,!0),this.onOperation(c)}finally{this.endUpdate()}}},_updateCounter:0,get__isUpdating:function(){return!!this._updateCounter},beginUpdate:function(){this._updateCounter++;1===this._updateCounter&&(this._text._beginUpdate(),null!=this._view&&this._view._beginUpdate(),null!=this._thumbnails&&this._thumbnails._beginUpdate(),null!=this._annotations&&this._annotations._beginUpdate(),null!=this._bookmarks&&this._bookmarks._beginUpdate())},endUpdate:function(){if(!this._updateCounter)throw new lt.InvalidOperationException("'EndUpdate' called without a matching 'BeginUpdate'");
this._updateCounter--;this._updateCounter||(this._text._endUpdate(),null!=this._view&&this._view._endUpdate(),null!=this._thumbnails&&this._thumbnails._endUpdate(),null!=this._annotations&&this._annotations._endUpdate(),null!=this._bookmarks&&this._bookmarks._endUpdate())},add_operation:function(a){this.__operation=ss.Delegate.combine(this.__operation,a)},remove_operation:function(a){this.__operation=ss.Delegate.remove(this.__operation,a)},__operation_handler_get:function(){null==this.__operation_handler&&
(this.__operation_handler=ss.EventHandler.create(this,this.add_operation,this.remove_operation));return this.__operation_handler},__operation:null,__operation_handler:null,onOperation:function(a){null!=this.__operation&&this.__operation(this,a);switch(a.get_operation()){case 10:a.get_isPostOperation()&&null!=this._annotations&&this.get_text().hasSelectedText(0)&&this._annotations._deselect();break;case 9:a.get_isPostOperation()&&this.get_text().get_renderSelection()&&null!=this._view&&(a=a.get_pageNumber(),
this._view.get_imageViewer().invalidateItemByIndex(a-1))}},get_currentPageNumber:function(){if(null==this._view)return 0;var a=0,b=this._view.get_imageViewer(),c=b.get_activeItem();null!=c&&(a=b.get_items().indexOf(c)+1);return a},gotoPage:function(a){this._doGotoPage(a,!0,!0)},_doGotoPage:function(a,b,c){if(null!=this._document){this._checkPageNumber(a,!1,"pageNumber");if(c){var d=new lt.Documents.UI.DocumentViewerOperationEventArgs(6,null,null,null,a,!1);this.onOperation(d);if(d.get_abort())return}var e=
d=null,g=a-1;null!=this._view&&(d=this._view.get_imageViewer(),d.disableTransitions(),e=d.get_items().get_item(g),e!==d.get_activeItem()&&d.set_activeItem(e),b&&d.gotoItem(e),d.enableTransitions());null!=this._thumbnails&&(d=this._thumbnails.get_imageViewer(),e=d.get_items().get_item(g),d.get_items().select([e]),d.ensureItemVisible(e));b&&null!=this._annotations&&null!=this._annotations.get_automation()&&(d=this._annotations.get_automation().get_containers().get_item(g),d!==this._annotations.get_automation().get_activeContainer()&&
this._annotations.get_automation().set_activeContainer(d));b&&null!==this.get_text()&&this.get_text().clearLastFindText();c&&(d=new lt.Documents.UI.DocumentViewerOperationEventArgs(6,null,null,null,a,!0),this.onOperation(d))}},gotoBookmark:function(a){if(null==a)throw new lt.ArgumentNullException("bookmark");null!=this._document&&this.runLinkTarget(a.target)},runLinkTarget:function(a){lt.Controls.ControlsHelper.checkIfNull(a,"linkTarget");this._checkPageNumber(a.pageNumber,!0,"PageNumber");var b=
a.pageNumber;b&&a.pageNumber!==this.get_currentPageNumber()&&this.gotoPage(a.pageNumber);null!=this._view&&b&&this._view.runLinkTarget(a)},_checkPageNumber:function(a,b,c){if(!this.get_hasDocument())throw new lt.InvalidOperationException("This operation is not allowed without a valid document");var d=this.get_pageCount();if(b){if(a&&(1>a||a>d))throw new lt.ArgumentOutOfRangeException(c,a,"Must be a valid page number in the document or 0");}else if(1>a||a>d)throw new lt.ArgumentOutOfRangeException(c,
a,"Must be a valid page number in the document");},_postRenderViewItem:function(a,b){null!=this._document&&(null!=this._text&&this._text._postRenderViewItem(a,b),null!=this._diagnostics&&this._diagnostics._postRenderViewItem(a,b))}};Object.defineProperty(lt.Documents.UI.DocumentViewer.prototype,"useAjaxImageLoading",{get:lt.Documents.UI.DocumentViewer.prototype.get_useAjaxImageLoading,set:lt.Documents.UI.DocumentViewer.prototype.set_useAjaxImageLoading,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewer,
"isPDFRenderingSupported",{get:lt.Documents.UI.DocumentViewer.get_isPDFRenderingSupported,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewer.prototype,"usePDFRendering",{get:lt.Documents.UI.DocumentViewer.prototype.get_usePDFRendering,set:lt.Documents.UI.DocumentViewer.prototype.set_usePDFRendering,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewer.prototype,"isUsingPDFRendering",{get:lt.Documents.UI.DocumentViewer.prototype.get_isUsingPDFRendering,
enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewer.prototype,"document",{get:lt.Documents.UI.DocumentViewer.prototype.get_document,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewer.prototype,"autoDisposeDocument",{get:lt.Documents.UI.DocumentViewer.prototype.get_autoDisposeDocument,set:lt.Documents.UI.DocumentViewer.prototype.set_autoDisposeDocument,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewer.prototype,
"hasDocument",{get:lt.Documents.UI.DocumentViewer.prototype.get_hasDocument,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewer.prototype,"pageCount",{get:lt.Documents.UI.DocumentViewer.prototype.get_pageCount,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewer.prototype,"view",{get:lt.Documents.UI.DocumentViewer.prototype.get_view,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewer.prototype,"thumbnails",
{get:lt.Documents.UI.DocumentViewer.prototype.get_thumbnails,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewer.prototype,"bookmarks",{get:lt.Documents.UI.DocumentViewer.prototype.get_bookmarks,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewer.prototype,"annotations",{get:lt.Documents.UI.DocumentViewer.prototype.get_annotations,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewer.prototype,"commands",
{get:lt.Documents.UI.DocumentViewer.prototype.get_commands,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewer.prototype,"text",{get:lt.Documents.UI.DocumentViewer.prototype.get_text,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewer.prototype,"userName",{get:lt.Documents.UI.DocumentViewer.prototype.get_userName,set:lt.Documents.UI.DocumentViewer.prototype.set_userName,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewer.prototype,
"diagnostics",{get:lt.Documents.UI.DocumentViewer.prototype.get_diagnostics,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewer.prototype,"operation",{get:lt.Documents.UI.DocumentViewer.prototype.__operation_handler_get,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewer.prototype,"currentPageNumber",{get:lt.Documents.UI.DocumentViewer.prototype.get_currentPageNumber,enumerable:!0,configurable:!0});lt.Documents.UI.AnnotationsInteractiveMode=
function(){lt.Documents.UI.AnnotationsInteractiveMode.initializeBase(this);this.set_mouseButtons(lt.Controls.MouseButtons.left|lt.Controls.MouseButtons.right);this.set_autoItemMode(lt.Controls.ImageViewerAutoItemMode.autoSet);this.set_itemPart(lt.Controls.ImageViewerItemPart.image);this.set_workOnBounds(!1)};lt.Documents.UI.AnnotationsInteractiveMode._convertPointerEventArgs$1=function(a,b){var c=lt.LeadPointD.create(a.get_position().get_x(),a.get_position().get_y()),d=lt.Annotations.Core.AnnMouseButton.none;
if(b)d=lt.Annotations.Core.AnnMouseButton.left;else if(a.get_mouseButton()===lt.Controls.MouseButtons.left&&(d=lt.Annotations.Core.AnnMouseButton.left),a.get_mouseButton()===lt.Controls.MouseButtons.right)d=lt.Annotations.Core.AnnMouseButton.right;c=lt.Annotations.Core.AnnPointerEventArgs.create(d,c);c.set_isHandled(a.get_isHandled());return c};lt.Documents.UI.AnnotationsInteractiveMode.prototype={get_id:function(){return 100},_automationControl$1:null,get_automationControl:function(){return this._automationControl$1},
set_automationControl:function(a){return this._automationControl$1=a},get_name:function(){return"Annotations"},canStartWork:function(a){return lt.Documents.UI.AnnotationsInteractiveMode.callBaseMethod(this,"canStartWork",[a])&&null!=this.get_automationControl()},start:function(a){lt.Documents.UI.AnnotationsInteractiveMode.callBaseMethod(this,"start",[a]);a=lt.Documents.UI.AnnotationsInteractiveMode.callBaseMethod(this,"get_interactiveService");a.add_dragStarted(ss.Delegate.create(this,this._interactiveService_DragStarted$1));
a.add_dragDelta(ss.Delegate.create(this,this._interactiveService_DragDelta$1));a.add_dragCompleted(ss.Delegate.create(this,this._interactiveService_DragCompleted$1));a.add_tap(ss.Delegate.create(this,this._interactiveService_Tap$1));a.add_doubleTap(ss.Delegate.create(this,this._interactiveService_DoubleTap$1));a.add_move(ss.Delegate.create(this,this._interactiveService_Move$1))},stop:function(a){if(this.get_isStarted()){var b=lt.Documents.UI.AnnotationsInteractiveMode.callBaseMethod(this,"get_interactiveService");
b.remove_dragStarted(ss.Delegate.create(this,this._interactiveService_DragStarted$1));b.remove_dragDelta(ss.Delegate.create(this,this._interactiveService_DragDelta$1));b.remove_dragCompleted(ss.Delegate.create(this,this._interactiveService_DragCompleted$1));b.remove_tap(ss.Delegate.create(this,this._interactiveService_Tap$1));b.remove_doubleTap(ss.Delegate.create(this,this._interactiveService_DoubleTap$1));b.remove_move(ss.Delegate.create(this,this._interactiveService_Move$1));lt.Documents.UI.AnnotationsInteractiveMode.callBaseMethod(this,
"stop",[a])}},_interactiveService_DragStarted$1:function(a,b){if(this.canStartWork(b)&&!b.get_isMouseWheel()){this.onWorkStarted(lt.LeadEventArgs.Empty);var c=lt.Documents.UI.AnnotationsInteractiveMode._convertPointerEventArgs$1(b,!1);if(!b.get_isHandled()&&(this.get_automationControl().onAutomationPointerDown(c),b.set_isHandled(c.get_isHandled()),!b.get_isHandled()))this.onWorkCompleted(lt.LeadEventArgs.Empty)}},_interactiveService_DragDelta$1:function(a,b){if(this.get_isWorking()){var c=lt.Documents.UI.AnnotationsInteractiveMode._convertPointerEventArgs$1(b,
!1);b.get_isHandled()||(this.get_automationControl().onAutomationPointerMove(c),b.set_isHandled(c.get_isHandled()))}},_interactiveService_DragCompleted$1:function(a,b){if(this.get_isWorking()){var c=lt.Documents.UI.AnnotationsInteractiveMode._convertPointerEventArgs$1(b,!1);b.get_isHandled()||(this.get_automationControl().onAutomationPointerUp(c),b.set_isHandled(c.get_isHandled()),this.onWorkCompleted(lt.LeadEventArgs.Empty))}},_interactiveService_Tap$1:function(a,b){if(!this.get_isWorking()&&this.canStartWork(b)){var c=
lt.Documents.UI.AnnotationsInteractiveMode._convertPointerEventArgs$1(b,!1);b.get_isHandled()||(this.get_automationControl().onAutomationPointerUp(c),b.set_isHandled(c.get_isHandled()))}},_interactiveService_DoubleTap$1:function(a,b){if(this.canStartWork(b)){var c=lt.Documents.UI.AnnotationsInteractiveMode._convertPointerEventArgs$1(b,!0);b.get_isHandled()||(this.onWorkStarted(lt.LeadEventArgs.Empty),this.get_automationControl().onAutomationDoubleClick(c),b.set_isHandled(c.get_isHandled()),this.onWorkCompleted(lt.LeadEventArgs.Empty))}},
_interactiveService_Move$1:function(a,b){if(null!=this.get_automationControl()){var c=lt.Documents.UI.AnnotationsInteractiveMode._convertPointerEventArgs$1(b,!1);this.get_automationControl().onAutomationPointerMove(c)}}};Object.defineProperty(lt.Documents.UI.AnnotationsInteractiveMode.prototype,"id",{get:lt.Documents.UI.AnnotationsInteractiveMode.prototype.get_id,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.AnnotationsInteractiveMode.prototype,"automationControl",{get:lt.Documents.UI.AnnotationsInteractiveMode.prototype.get_automationControl,
set:lt.Documents.UI.AnnotationsInteractiveMode.prototype.set_automationControl,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.AnnotationsInteractiveMode.prototype,"name",{get:lt.Documents.UI.AnnotationsInteractiveMode.prototype.get_name,enumerable:!0,configurable:!0});lt.Documents.UI.DocumentViewerPageLinksInteractiveMode=function(a){this._runLinkKeyModifier$1=lt.Controls.Keys.none;this._lastMovePosition$1=lt.LeadPointD.get_empty();this._lastLink$1=new lt.Documents.DocumentLink;
lt.Documents.UI.DocumentViewerPageLinksInteractiveMode.initializeBase(this);this._documentViewer$1=a;this.set_autoItemMode(lt.Controls.ImageViewerAutoItemMode.autoSet);this.set_itemPart(lt.Controls.ImageViewerItemPart.image);this.set_workOnBounds(!0);this.set_isDragMouseWheelEnabled(!1)};lt.Documents.UI.DocumentViewerPageLinksInteractiveMode._checkKeyModifier$1=function(a,b,c){return!a.get_supportsMouse()?!0:c!==lt.Controls.Keys.none?lt.Controls.InteractiveService.checkKeyModifier(b.get_nativeEvent(),
c):lt.Controls.InteractiveService.checkKeyModifier(b.get_nativeEvent(),lt.Controls.Keys.alt)||lt.Controls.InteractiveService.checkKeyModifier(b.get_nativeEvent(),lt.Controls.Keys.control)||lt.Controls.InteractiveService.checkKeyModifier(b.get_nativeEvent(),lt.Controls.Keys.shift)?!1:!0};lt.Documents.UI.DocumentViewerPageLinksInteractiveMode.prototype={_documentViewer$1:null,get_documentViewer:function(){return this._documentViewer$1},get_name:function(){return"PageLinks"},get_id:function(){return 101},
get_runLinkKeyModifier:function(){return this._runLinkKeyModifier$1},set_runLinkKeyModifier:function(a){switch(a){case lt.Controls.Keys.none:case lt.Controls.Keys.alt:case lt.Controls.Keys.shift:case lt.Controls.Keys.control:this._runLinkKeyModifier$1=a;break;default:throw new lt.ArgumentException("Invalid value","RunLinkKeyModifier");}return a},start:function(a){lt.Documents.UI.DocumentViewerPageLinksInteractiveMode.callBaseMethod(this,"start",[a]);a=lt.Documents.UI.DocumentViewerPageLinksInteractiveMode.callBaseMethod(this,
"get_interactiveService");this._isDragging$1=this._canCheckLinks$1=!1;a.get_supportsMouse()&&a.add_move(ss.Delegate.create(this,this._service_Move$1));a.add_dragStarted(ss.Delegate.create(this,this._service_DragStarted$1));a.add_dragDelta(ss.Delegate.create(this,this._service_DragDelta$1));a.add_dragCompleted(ss.Delegate.create(this,this._service_DragCompleted$1));this._lastMovePosition$1=lt.LeadPointD.get_empty();this._lastLink$1=new lt.Documents.DocumentLink;this._lastLink$1.bounds=lt.LeadRectD.get_empty()},
stop:function(a){if(this.get_isStarted()){var b=lt.Documents.UI.DocumentViewerPageLinksInteractiveMode.callBaseMethod(this,"get_interactiveService");b.get_supportsMouse()&&b.remove_move(ss.Delegate.create(this,this._service_Move$1));b.remove_dragStarted(ss.Delegate.create(this,this._service_DragStarted$1));b.remove_dragDelta(ss.Delegate.create(this,this._service_DragDelta$1));b.remove_dragCompleted(ss.Delegate.create(this,this._service_DragCompleted$1));lt.Documents.UI.DocumentViewerPageLinksInteractiveMode.callBaseMethod(this,
"stop",[a])}},canStartWork:function(a){return lt.Documents.UI.DocumentViewerPageLinksInteractiveMode.callBaseMethod(this,"canStartWork",[a])&&null!=this._documentViewer$1&&this._documentViewer$1.get_hasDocument()},_service_Move$1:function(a,b){if(this.get_isEnabled()&&!lt.LeadPointD.equals(b.get_position(),this._lastMovePosition$1)&&(this._lastMovePosition$1=b.get_position(),!(null==this._documentViewer$1||!this._documentViewer$1.get_hasDocument()||this._isDragging$1&&!this._canCheckLinks$1))){var c=
!1,d=!1,e=0,g=this.get_imageViewer(),f=g.hitTestItem(b.get_position());if(null!=f){var h=this._hitTestLink$1(f,b.get_position());if(c=!h.bounds.get_isEmpty()){if(this._lastLink$1.bounds.get_isEmpty()||!lt.LeadRectD.equals(this._lastLink$1.bounds,h.bounds))e=g.get_items().indexOf(f)+1,this._lastLink$1=h,d=!0}else this._lastLink$1.bounds.get_isEmpty()||(e=g.get_items().indexOf(f)+1,this._lastLink$1=new lt.Documents.DocumentLink,this._lastLink$1.bounds=lt.LeadRectD.get_empty(),d=!0)}this.get_hitTestState()!==
c&&this.set_hitTestState(c);if(d&&(c=null,this._lastLink$1.bounds.get_isEmpty()||(c=this._lastLink$1),d=new lt.Documents.UI.DocumentViewerOperationEventArgs(22,null,c,b,e,!1),this._documentViewer$1.onOperation(d),!d.get_abort()))d=new lt.Documents.UI.DocumentViewerOperationEventArgs(22,null,c,b,e,!0),this._documentViewer$1.onOperation(d)}},_canCheckLinks$1:!1,_isDragging$1:!1,_service_DragStarted$1:function(a,b){this._canCheckLinks$1=!b.get_isHandled();this._isDragging$1=!0},_service_DragDelta$1:function(a,
b){if(this.canStartWork(b)&&lt.Documents.UI.DocumentViewerPageLinksInteractiveMode._checkKeyModifier$1(this.get_interactiveService(),b,this.get_runLinkKeyModifier())&&null!=this._documentViewer$1&&this._documentViewer$1.get_hasDocument()&&this._canCheckLinks$1){var c=Math.abs(b.get_position().get_x()-b.get_origin().get_x()),d=Math.abs(b.get_position().get_y()-b.get_origin().get_y());this._canCheckLinks$1=2>c&&2>d}},_service_DragCompleted$1:function(a,b){this._isDragging$1=!1;if(this.canStartWork(b)&&
lt.Documents.UI.DocumentViewerPageLinksInteractiveMode._checkKeyModifier$1(this.get_interactiveService(),b,this.get_runLinkKeyModifier())&&null!=this._documentViewer$1&&this._documentViewer$1.get_hasDocument()&&this._canCheckLinks$1){var c=this.get_item();if(null!=c&&(c=this._hitTestLink$1(c,b.get_position()),!c.bounds.get_isEmpty())){var d=new lt.Documents.UI.DocumentViewerOperationEventArgs(14,null,c,b,0,!1);this._documentViewer$1.onOperation(d);d.get_abort()||(c.linkType===lt.Documents.DocumentLinkType.targetPage&&
this._documentViewer$1.runLinkTarget(c.target),d=new lt.Documents.UI.DocumentViewerOperationEventArgs(14,null,c,b,0,!0),this._documentViewer$1.onOperation(d),b.set_isHandled(!0),this.onWorkStarted(lt.LeadEventArgs.Empty),this.onWorkCompleted(lt.LeadEventArgs.Empty))}}},_hitTestLink$1:function(a,b){var c=new lt.Documents.DocumentLink;c.bounds=lt.LeadRectD.get_empty();var d=this.get_imageViewer(),e=d.get_items().indexOf(a)+1,g=this._documentViewer$1.get_document(),e=g.pages.get_item(e-1),f=e.getLinks();
if(null==f||!f.length)return c;for(var h=lt.Controls.PrimitivesHelper.toLeadPointD(b),h=d.convertPoint(a,lt.Controls.ImageViewerCoordinateType.control,lt.Controls.ImageViewerCoordinateType.image,h),h=g.pointToDocument(lt.Controls.PrimitivesHelper.toLeadPoint(h)),f=ss.IEnumerator.getEnumerator(f);f.moveNext();)if(d=f.current,d.bounds.containsPoint(h))return d.linkType===lt.Documents.DocumentLinkType.targetPage&&(c=g.pages.getTargetPageNumber(e.document,d.target.pageNumber),c!==d.target.pageNumber)?
(g=d.clone(),e=g.target.clone(),e.pageNumber=c,g.target=e,g):d;return c}};Object.defineProperty(lt.Documents.UI.DocumentViewerPageLinksInteractiveMode.prototype,"documentViewer",{get:lt.Documents.UI.DocumentViewerPageLinksInteractiveMode.prototype.get_documentViewer,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerPageLinksInteractiveMode.prototype,"name",{get:lt.Documents.UI.DocumentViewerPageLinksInteractiveMode.prototype.get_name,enumerable:!0,configurable:!0});
Object.defineProperty(lt.Documents.UI.DocumentViewerPageLinksInteractiveMode.prototype,"id",{get:lt.Documents.UI.DocumentViewerPageLinksInteractiveMode.prototype.get_id,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerPageLinksInteractiveMode.prototype,"runLinkKeyModifier",{get:lt.Documents.UI.DocumentViewerPageLinksInteractiveMode.prototype.get_runLinkKeyModifier,set:lt.Documents.UI.DocumentViewerPageLinksInteractiveMode.prototype.set_runLinkKeyModifier,enumerable:!0,
configurable:!0});lt.Documents.UI.DocumentViewerSelectTextInteractiveMode=function(){lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.initializeBase(this);this.set_autoItemMode(lt.Controls.ImageViewerAutoItemMode.autoSet);this.set_itemPart(lt.Controls.ImageViewerItemPart.image);this.set_workOnBounds(!0);this.set_isDragMouseWheelEnabled(!1);this._init$2()};lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.prototype={_documentViewer$2:null,get_documentViewer:function(){return this._documentViewer$2},
set_documentViewer:function(a){return this._documentViewer$2=a},get_shape:function(){return lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.callBaseMethod(this,"get_shape")},set_shape:function(a){if(a!==lt.Controls.ImageViewerRubberBandShape.rectangle)throw new lt.InvalidOperationException("Only rectangle Shape is supported by this interactive mode");lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.callBaseMethod(this,"set_shape",[a]);return a},get_name:function(){return"SelectText"},
get_id:function(){return 102},start:function(a){lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.callBaseMethod(this,"start",[a]);this.get_isStarted()&&this.get_interactiveService().add_doubleTap(ss.Delegate.create(this,this._interactiveService_DoubleTap$2))},stop:function(a){this.get_isStarted()&&this.get_interactiveService().remove_doubleTap(ss.Delegate.create(this,this._interactiveService_DoubleTap$2));lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.callBaseMethod(this,"stop",[a])},
_interactiveService_DoubleTap$2:function(a,b){if(!(null==this._documentViewer$2||null==this.get_item())){var c=this.get_imageViewer().get_items().indexOf(this.get_item())+1,d=lt.LeadPointD.create(b.get_position().get_x()+1,b.get_position().get_y()+1);this._documentViewer$2.get_text()._trySelect(c,lt.Controls.PrimitivesHelper.toLeadPointD(b.get_position()),lt.Controls.PrimitivesHelper.toLeadPointD(d),4,b)}},onRubberBandStarted:function(a){lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.callBaseMethod(this,
"onRubberBandStarted",[a]);null==this._documentViewer$2||null==this.get_item()||(a=this.get_imageViewer().get_items().indexOf(this.get_item())+1,this._documentViewer$2.get_text().hasDocumentPageText(a)||this._documentViewer$2.get_text().getDocumentPageText(a))},onRubberBandDelta:function(a){lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.callBaseMethod(this,"onRubberBandDelta",[a]);if(!(null==this._documentViewer$2||null==this.get_item())){var b=this.get_imageViewer().get_items().indexOf(this.get_item())+
1;this._documentViewer$2.get_text()._trySelect(b,lt.Controls.PrimitivesHelper.toLeadPointD(a.get_points()[0]),lt.Controls.PrimitivesHelper.toLeadPointD(a.get_points()[1]),3,a.get_interactiveEventArgs())}},onRubberBandCompleted:function(a){lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.callBaseMethod(this,"onRubberBandCompleted",[a]);if(!(null==this._documentViewer$2||null==this.get_item())){var b=this.get_imageViewer().get_items().indexOf(this.get_item())+1;a.get_isCanceled()?this._documentViewer$2.get_text().clearSelection(b):
this._documentViewer$2.get_text()._trySelect(b,lt.Controls.PrimitivesHelper.toLeadPointD(a.get_points()[0]),lt.Controls.PrimitivesHelper.toLeadPointD(a.get_points()[1]),4,a.get_interactiveEventArgs())}},_init$2:function(){this.set_borderThickness(0)}};Object.defineProperty(lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.prototype,"documentViewer",{get:lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.prototype.get_documentViewer,set:lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.prototype.set_documentViewer,
enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.prototype,"shape",{get:lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.prototype.get_shape,set:lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.prototype.set_shape,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.prototype,"name",{get:lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.prototype.get_name,enumerable:!0,
configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.prototype,"id",{get:lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.prototype.get_id,enumerable:!0,configurable:!0});lt.Documents.UI.DocumentViewerOperationEventArgs=function(a,b,c,d,e,g){lt.Documents.UI.DocumentViewerOperationEventArgs.initializeBase(this);this._operation$1=a;this._data1$1=c;this._data2$1=d;this._pageNumber$1=e;this._isPostOperation$1=g;this._abort$1=!1;this._error$1=b};lt.Documents.UI.DocumentViewerOperationEventArgs.prototype=
{_operation$1:0,get_operation:function(){return this._operation$1},_error$1:null,get_error:function(){return this._error$1},_data1$1:null,get_data1:function(){return this._data1$1},_data2$1:null,get_data2:function(){return this._data2$1},_pageNumber$1:0,get_pageNumber:function(){return this._pageNumber$1},_isPostOperation$1:!1,get_isPostOperation:function(){return this._isPostOperation$1},_abort$1:!1,get_abort:function(){return this._abort$1},set_abort:function(a){return this._abort$1=a}};Object.defineProperty(lt.Documents.UI.DocumentViewerOperationEventArgs.prototype,
"operation",{get:lt.Documents.UI.DocumentViewerOperationEventArgs.prototype.get_operation,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerOperationEventArgs.prototype,"error",{get:lt.Documents.UI.DocumentViewerOperationEventArgs.prototype.get_error,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerOperationEventArgs.prototype,"data1",{get:lt.Documents.UI.DocumentViewerOperationEventArgs.prototype.get_data1,enumerable:!0,configurable:!0});
Object.defineProperty(lt.Documents.UI.DocumentViewerOperationEventArgs.prototype,"data2",{get:lt.Documents.UI.DocumentViewerOperationEventArgs.prototype.get_data2,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerOperationEventArgs.prototype,"pageNumber",{get:lt.Documents.UI.DocumentViewerOperationEventArgs.prototype.get_pageNumber,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerOperationEventArgs.prototype,"isPostOperation",{get:lt.Documents.UI.DocumentViewerOperationEventArgs.prototype.get_isPostOperation,
enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerOperationEventArgs.prototype,"abort",{get:lt.Documents.UI.DocumentViewerOperationEventArgs.prototype.get_abort,set:lt.Documents.UI.DocumentViewerOperationEventArgs.prototype.set_abort,enumerable:!0,configurable:!0});lt.Documents.UI.DocumentViewerFindText=function(){};lt.Documents.UI.DocumentViewerFindText.prototype={clone:function(){var a=new lt.Documents.UI.DocumentViewerFindText;a._pageNumber=this._pageNumber;a._text=
this._text;a._matchCase=this._matchCase;a._wholeWordsOnly=this._wholeWordsOnly;a._gotoNextPage=this._gotoNextPage;a._recursive=this._recursive;a._autoSelect=this._autoSelect;a._autoEnsureVisible=this._autoEnsureVisible;a._result=null!=this._result?this._result.clone():null;return a},_pageNumber:1,get_pageNumber:function(){return this._pageNumber},set_pageNumber:function(a){this._pageNumber=a;this._clearResults();return a},_found:function(a,b){this._pageNumber=a;this._result=null!=b?b.clone():null},
_text:null,get_text:function(){return this._text},set_text:function(a){this._text=a;this._clearResults();return a},_matchCase:!1,get_matchCase:function(){return this._matchCase},set_matchCase:function(a){return this._matchCase=a},_wholeWordsOnly:!1,get_wholeWordsOnly:function(){return this._wholeWordsOnly},set_wholeWordsOnly:function(a){return this._wholeWordsOnly=a},_gotoNextPage:!0,get_gotoNextPage:function(){return this._gotoNextPage},set_gotoNextPage:function(a){return this._gotoNextPage=a},_recursive:!1,
get_recursive:function(){return this._recursive},set_recursive:function(a){return this._recursive=a},_autoSelect:!0,get_autoSelect:function(){return this._autoSelect},set_autoSelect:function(a){return this._autoSelect=a},_autoEnsureVisible:!0,get_autoEnsureVisible:function(){return this._autoEnsureVisible},set_autoEnsureVisible:function(a){return this._autoEnsureVisible=a},_clearResults:function(){},_result:null,get__result:function(){return this._result},_find:function(a,b,c){if(String.isNullOrEmpty(this._text)||
null==a||null==a.text||null==a.textMap)return!1;var d=this._text,e=d.length,g=a.text;this._matchCase||(g=null!=g?g.toLowerCase():null,d=d.toLowerCase());var f=-1,h=c.startIndex;b?f=g.indexOf(d,h):0<h-e-1&&(f=g.remove(h-e-1).lastIndexOf(d));if(-1===f)return!1;h=f;d=b=-1;g=h+e-1;for(f=h;f<=g;f++){var i=a.textMap[f];0<=i&&(-1===b&&(b=i),d=i)}if(-1===b||this._wholeWordsOnly&&(a=a.characters,b&&!a[b-1].isEndOfWord||!a[d].isEndOfWord))return!1;c.startIndex=h+e;c.firstCharacterIndex=b;c.lastCharacterIndex=
d;return!0}};Object.defineProperty(lt.Documents.UI.DocumentViewerFindText.prototype,"pageNumber",{get:lt.Documents.UI.DocumentViewerFindText.prototype.get_pageNumber,set:lt.Documents.UI.DocumentViewerFindText.prototype.set_pageNumber,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerFindText.prototype,"text",{get:lt.Documents.UI.DocumentViewerFindText.prototype.get_text,set:lt.Documents.UI.DocumentViewerFindText.prototype.set_text,enumerable:!0,configurable:!0});
Object.defineProperty(lt.Documents.UI.DocumentViewerFindText.prototype,"matchCase",{get:lt.Documents.UI.DocumentViewerFindText.prototype.get_matchCase,set:lt.Documents.UI.DocumentViewerFindText.prototype.set_matchCase,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerFindText.prototype,"wholeWordsOnly",{get:lt.Documents.UI.DocumentViewerFindText.prototype.get_wholeWordsOnly,set:lt.Documents.UI.DocumentViewerFindText.prototype.set_wholeWordsOnly,enumerable:!0,configurable:!0});
Object.defineProperty(lt.Documents.UI.DocumentViewerFindText.prototype,"gotoNextPage",{get:lt.Documents.UI.DocumentViewerFindText.prototype.get_gotoNextPage,set:lt.Documents.UI.DocumentViewerFindText.prototype.set_gotoNextPage,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerFindText.prototype,"recursive",{get:lt.Documents.UI.DocumentViewerFindText.prototype.get_recursive,set:lt.Documents.UI.DocumentViewerFindText.prototype.set_recursive,enumerable:!0,configurable:!0});
Object.defineProperty(lt.Documents.UI.DocumentViewerFindText.prototype,"autoSelect",{get:lt.Documents.UI.DocumentViewerFindText.prototype.get_autoSelect,set:lt.Documents.UI.DocumentViewerFindText.prototype.set_autoSelect,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerFindText.prototype,"autoEnsureVisible",{get:lt.Documents.UI.DocumentViewerFindText.prototype.get_autoEnsureVisible,set:lt.Documents.UI.DocumentViewerFindText.prototype.set_autoEnsureVisible,enumerable:!0,
configurable:!0});lt.Documents.UI.DocumentViewerText=function(a){this._lineSelectionMode=0;this._lineKeyModifier=lt.Controls.Keys.none;this._wordKeyModifier=lt.Controls.Keys.alt;this._characterKeyModifier=lt.Controls.Keys.control;this._documentViewer=a};lt.Documents.UI.DocumentViewerText._removeLastEndOfLine=function(a){if(String.isNullOrEmpty(a))return a;var b=a.length;2<=b&&"\r"===a[b-2]&&"\n"===a[b-1]&&(a=a.substring(0,b-2));return a};lt.Documents.UI.DocumentViewerText._endsWithEndOfLine=function(a){if(String.isNullOrEmpty(a))return!1;
var b=a.length;return 2<=b&&"\r"===a[b-2]&&"\n"===a[b-1]};lt.Documents.UI.DocumentViewerText._getRealLineSelectionMode=function(a,b,c){if(null==a||c)return c;c=a.mimeType;a.hasDocuments&&(c=a.pages.get_item(b-1).document.mimeType);switch(c){case "application/vnd.ms-excel":case "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return 2;default:return 1}};lt.Documents.UI.DocumentViewerText._updateTextItemSelection=function(a,b,c){for(var d=c.get_firstCharacterIndex(),e=c.get_lastCharacterIndex(),
g=-1,f=!1,h=d;h<=e;h++)if(b[h].isLineBreak&&(g=h),a.intersectsWith(b[h].bounds)&&!f&&(-1!==g&&(d=g!==h?g+1:g),f=!0),!a.intersectsWith(b[h].bounds)&&f){if(-1!==g&&(g===h-1||b[h].isLineBreak))e=g;else for(a=h;a<=e;a++)if(b[a].isLineBreak){e=a;break}break}if(d!==c.get_firstCharacterIndex()||e!==c.get_lastCharacterIndex()){c.set_firstCharacterIndex(d);c.set_lastCharacterIndex(e);c.set_bounds(b[c.get_firstCharacterIndex()].bounds);for(a=c.get_firstCharacterIndex();a<=c.get_lastCharacterIndex();a++)c.set_bounds(lt.LeadRectD.unionRects(c.get_bounds(),
b[a].bounds))}};lt.Documents.UI.DocumentViewerText.get_selectedFill=function(){return lt.Documents.UI.DocumentViewerText._selectedFill};lt.Documents.UI.DocumentViewerText.set_selectedFill=function(a){return lt.Documents.UI.DocumentViewerText._selectedFill=a};lt.Documents.UI.DocumentViewerText.get__canRenderText=function(){return null!=lt.Documents.UI.DocumentViewerText.get_selectedFill()};lt.Documents.UI.DocumentViewerText._nativeCopy=function(){};lt.Documents.UI.DocumentViewerText._checkKeyModifier=
function(a,b){return null==a?!1:lt.Controls.InteractiveService.checkKeyModifier(a.get_nativeEvent(),b)};lt.Documents.UI.DocumentViewerText.prototype={_destroy:function(){},_documentViewer:null,get_documentViewer:function(){return this._documentViewer},get_lineSelectionMode:function(){return this._lineSelectionMode},set_lineSelectionMode:function(a){return this._lineSelectionMode=a},_pageTextKey:null,_isEmptyPageText:!0,_setupPageText:function(a){this._pageTextKey=null!=a?a.documentId+"_pagetext_":
null;this._isEmptyPageText=!0},_setPageText:function(a,b,c){null==a||null==this._pageTextKey||(a.pages.get_item(b-1).customData[this._pageTextKey]=c,this._isEmptyPageText=!1)},_deletePageText:function(a){if(!(null==a||null==this._pageTextKey)){for(a=ss.IEnumerator.getEnumerator(a.pages);a.moveNext();){var b=a.current.customData;Object.keyExists(b,this._pageTextKey)&&delete b[this._pageTextKey]}this._isEmptyPageText=!0}},_hasEmptyPageText:function(){return this._isEmptyPageText},_pageTextContains:function(a,
b){var c=a.pages.get_item(b-1);return Object.keyExists(c.customData,this._pageTextKey)},_getPageText:function(a,b){var c=a.pages.get_item(b-1);return Type.safeCast(c.customData[this._pageTextKey],lt.Documents.DocumentPageText)},_startWorking:function(){this._stopWorking();this._selectedTextItems={};this._setupPageText(this._documentViewer.get_document());this._lastFindText=null;this._hasAnySelectedText=!1},_stopWorking:function(){this._addOrReplaceSelectedText(0,null);this._hasAnySelectedText=!1;
this._deletePageText(this._documentViewer.get_document());null!=this._lastFindText&&(this._lastFindText=null)},_addPages:function(a){null!=a&&a.length&&(this.clearSelection(0),this.clearLastFindText())},_removePages:function(a){null!=a&&a.length&&(this.clearSelection(0),this.clearLastFindText())},_postRenderViewItem:function(a,b){if(this.get_renderSelection()&&lt.Documents.UI.DocumentViewerText.get__canRenderText()&&null!=this._selectedTextItems){var c=b.get_item(),d=this._documentViewer.get_document(),
c=c.get_leadIndex()+1;if(Object.keyExists(this._selectedTextItems,c)){var e=this._selectedTextItems[c];if(0<e.length){var g=new lt.Documents.UI.DocumentViewerOperationEventArgs(12,null,b,e,c,!1);this._documentViewer.onOperation(g);g.get_abort()||(this._doRenderSelectedText(d,g),g=new lt.Documents.UI.DocumentViewerOperationEventArgs(12,null,b,e,c,!0),this._documentViewer.onOperation(g))}}}},_renderSelection:!0,get_renderSelection:function(){return this._renderSelection},set_renderSelection:function(a){return this._renderSelection=
a},_autoGetText:!1,get_autoGetText:function(){return this._autoGetText},set_autoGetText:function(a){return this._autoGetText=a},getDocumentPageText:function(a){return this._doGetDocumentPageText(a,!0,null)},getAllDocumentPageText:function(){if(this._documentViewer.get_hasDocument()){var a=this._documentViewer.get_pageCount(),b=new lt.Documents.UI.DocumentViewerOperationEventArgs(8,null,null,null,0,!1);b.set_abort(!1);for(var c=1;c<=a&&!b.get_abort();c++)this._doGetDocumentPageText(c,!0,b)}},hasAnyDocumentPageText:function(){if(!this._documentViewer.get_hasDocument())return!1;
var a=this._documentViewer.get_document();if(this._hasEmptyPageText(a))return!1;for(var b=this._documentViewer.get_pageCount(),c=0;c<=b;c++)if(this._pageTextContains(a,c)&&null!=this._getPageText(a,c))return!0;return!1},hasDocumentPageText:function(a){if(!this._documentViewer.get_hasDocument())return!1;var b=this._documentViewer.get_document();if(this._hasEmptyPageText(b))return!1;for(var c=this._documentViewer.get_pageCount(),c=a?a:c,a=a?a:1;a<=c;a++)if(!this._pageTextContains(b,a)||null==this._getPageText(b,
a))return!1;return!0},_doGetDocumentPageText:function(a,b,c){if(!this._documentViewer.get_hasDocument())return null;var d=this._documentViewer.get_document();this._documentViewer._checkPageNumber(a,!1,"pageNumber");if(this._pageTextContains(d,a))return this._getPageText(d,a);if(!b)return null;b=new lt.Documents.UI.DocumentViewerOperationEventArgs(8,null,null,null,a,!1);this._documentViewer.onOperation(b);null!=c&&b.get_abort()&&c.set_abort(!0);if(b.get_abort())return null;d=d.pages.get_item(a-1);
if(d.isLocal)return this._finishGetText(null,a,null,c),null;d=d.getText(lt.LeadRectD.get_empty());d.done(ss.Delegate.create(this,function(b){this._finishGetText(Type.safeCast(b,lt.Documents.DocumentPageText),a,null,c)}));d.fail(ss.Delegate.create(this,function(b){b=lt.Documents.ServiceError.parseError(b,"error",Type.safeCast(b.statusText,String));this._finishGetText(null,a,Error(b.isParseError?b.errorThrown:b.detail),c)}));return null},_finishGetText:function(a,b,c,d){var e=this._documentViewer.get_document();
null!=a&&null==c?(a.buildTextWithMap(),this._setPageText(e,b,a),a=new lt.Documents.UI.DocumentViewerOperationEventArgs(8,null,a,null,b,!0)):(this._setPageText(e,b,new lt.Documents.DocumentPageText([])),a=new lt.Documents.UI.DocumentViewerOperationEventArgs(8,c,null,null,b,!0));this._documentViewer.onOperation(a);null!=d&&a.get_abort()&&d.set_abort(!0)},setDocumentPageText:function(a,b){if(this._documentViewer.get_hasDocument()){this._documentViewer._checkPageNumber(b,!1,"pageNumber");var c=new lt.Documents.UI.DocumentViewerOperationEventArgs(10,
null,null,null,0,!1);this._documentViewer.onOperation(c);c.get_abort()||(c=new lt.Documents.UI.DocumentViewerOperationEventArgs(9,null,null,null,b,!1),this._documentViewer.onOperation(c),c.get_abort()||(c=this._documentViewer.get_document(),this._pageTextContains(c,b)?null!=a?this._setPageText(c,b,a):this._setPageText(c,b,null):null!=a&&this._setPageText(c,b,a),this._addOrReplaceSelectedText(b,null),c=new lt.Documents.UI.DocumentViewerOperationEventArgs(9,null,null,null,b,!0),this._documentViewer.onOperation(c),
c=new lt.Documents.UI.DocumentViewerOperationEventArgs(10,null,null,null,0,!0),this._documentViewer.onOperation(c)))}},_selectedTextItems:null,getSelectedTextItems:function(a){if(!this._documentViewer.get_hasDocument())return null;this._documentViewer._checkPageNumber(a,!1,"pageNumber");return null!=this._selectedTextItems&&Object.keyExists(this._selectedTextItems,a)?this._selectedTextItems[a]:null},setSelectedTextItems:function(a,b){this._doSetSelectedTextItems(a,b)},_doSetSelectedTextItems:function(a,
b){if(!this._documentViewer.get_hasDocument())return!1;this._documentViewer._checkPageNumber(a,!1,"pageNumber");var c=new lt.Documents.UI.DocumentViewerOperationEventArgs(10,null,null,null,0,!1);this._documentViewer.onOperation(c);if(c.get_abort())return!1;c=new lt.Documents.UI.DocumentViewerOperationEventArgs(9,null,null,null,a,!1);this._documentViewer.onOperation(c);if(c.get_abort())return!1;c=null;if(null!=b)for(var c=[],d=0;d<b.length;d++){var e=b[d];null!=e?c.add(e.clone()):c.add(null)}this._addOrReplaceSelectedText(a,
c);c=new lt.Documents.UI.DocumentViewerOperationEventArgs(9,null,null,null,a,!0);this._documentViewer.onOperation(c);c=new lt.Documents.UI.DocumentViewerOperationEventArgs(10,null,null,null,0,!0);this._documentViewer.onOperation(c);return!0},clearSelection:function(a){if(!this._documentViewer.get_hasDocument())return!1;this._documentViewer._checkPageNumber(a,!0,"pageNumber");if(null==this._selectedTextItems)return!1;var b=this._documentViewer.get_pageCount(),c=a?a:1,b=a?a:b,d=!1,e=new lt.Documents.UI.DocumentViewerOperationEventArgs(10,
null,null,null,0,!1);this._documentViewer.onOperation(e);if(e.get_abort())return!1;for(;c<=b;c++){e=new lt.Documents.UI.DocumentViewerOperationEventArgs(9,null,null,null,c,!1);this._documentViewer.onOperation(e);if(e.get_abort())return this._updateHasAnySelectedText(),d;this._doClearSelection(c)&&(d=!0,e=new lt.Documents.UI.DocumentViewerOperationEventArgs(9,null,null,null,c,!0),this._documentViewer.onOperation(e))}a||Object.clearKeys(this._selectedTextItems);this._updateHasAnySelectedText();d&&(e=
new lt.Documents.UI.DocumentViewerOperationEventArgs(10,null,null,null,0,!0),this._documentViewer.onOperation(e));return d},_doClearSelection:function(a){var b=!1;null!=this._selectedTextItems&&Object.keyExists(this._selectedTextItems,a)&&(b=null!=this._selectedTextItems[a]&&0<this._selectedTextItems[a].length,this._selectedTextItems[a].clear(),delete this._selectedTextItems[a]);return b},_addOrReplaceSelectedText:function(a,b){if(null!=this._selectedTextItems){this._hasAnySelectedText=!1;for(var c=
this._documentViewer.get_pageCount(),c=a?a:c,d=a?a:1;d<=c;d++)Object.keyExists(this._selectedTextItems,d)?(this._selectedTextItems[d].clear(),null!=b?this._selectedTextItems[d]=b:delete this._selectedTextItems[d]):null!=b&&(this._selectedTextItems[d]=b);this._updateHasAnySelectedText()}},selectAll:function(a){if(this._documentViewer.get_hasDocument()){this._documentViewer._checkPageNumber(a,!0,"pageNumber");var b=this._documentViewer.get_pageCount(),c=a?a:1,a=a?a:b,b=new lt.Documents.UI.DocumentViewerOperationEventArgs(10,
null,null,null,0,!1);this._documentViewer.onOperation(b);if(!b.get_abort()){for(;c<=a;c++){b=new lt.Documents.UI.DocumentViewerOperationEventArgs(9,null,null,null,c,!1);this._documentViewer.onOperation(b);if(b.get_abort())return;b=this._selectPageText(c,0,-1,!1,4);this._addOrReplaceSelectedText(c,b);b=new lt.Documents.UI.DocumentViewerOperationEventArgs(9,null,null,null,c,!0);this._documentViewer.onOperation(b)}b=new lt.Documents.UI.DocumentViewerOperationEventArgs(10,null,null,null,0,!0);this._documentViewer.onOperation(b)}}},
_selectPageText:function(a,b,c,d){if(-1===b)return null;var e=this._doGetDocumentPageText(a,this.get_autoGetText(),null);if(null==e)return null;var g=e.characters;if(!g.length)return null;-1===c&&(c=e.characters.length-1);if(d){for(d=b-1;0<=d&&!g[d].isEndOfWord&&!g[d].isEndOfLine;)d--;for(b=d+1;c<g.length&&!g[c].isEndOfWord&&!g[c].isEndOfLine;)c++}for(var e=g[b].bounds,f=b,h=!0,d=[];b<=c;b++){var i=g[b],e=lt.LeadRectD.unionRects(e,i.bounds);i.isEndOfLine&&(h=new lt.Documents.UI.DocumentViewerTextItem,
h.set_pageNumber(a),h.set_firstCharacterIndex(f),h.set_lastCharacterIndex(b),h.set_bounds(e),d.add(h),h=!1,f=++b,b<=c&&(h=!0,e=g[b].bounds))}h&&(h=new lt.Documents.UI.DocumentViewerTextItem,h.set_pageNumber(a),h.set_firstCharacterIndex(f),h.set_lastCharacterIndex(c),h.set_bounds(e),d.add(h));for(b=0;b<d.length;++b)h=d[b],a=h.get_bounds(),h.set_bounds(a),d[b]=h;return d},selectText:function(a,b){this._internalSelectText(a,b,4)},_internalSelectText:function(a,b,c){if(this._documentViewer.get_hasDocument()&&
null!=this._documentViewer.get_view()){var d=this._documentViewer.get_document();if(lt.Controls.PrimitivesHelper.isEmptyOrZeroRect(a))4===c&&this.clearSelection(0);else{var e=this._documentViewer.get_view().get_imageViewer(),g=e.hitTestItems(lt.Controls.PrimitivesHelper.toLeadRectD(a));if(null==g||!g.length)4===c&&this.clearSelection(0);else{var f=new lt.Documents.UI.DocumentViewerOperationEventArgs(10,null,null,null,0,!1);this._documentViewer.onOperation(f);if(!f.get_abort()){for(g=ss.IEnumerator.getEnumerator(g);g.moveNext();){var f=
g.current,h=[lt.LeadPointD.create(a.get_left(),a.get_top()),lt.LeadPointD.create(a.get_right(),a.get_bottom())];e.convertPoints(f,lt.Controls.ImageViewerCoordinateType.control,lt.Controls.ImageViewerCoordinateType.image,h);var i=lt.Controls.PrimitivesHelper.getBoundingRect(h);if(lt.Controls.PrimitivesHelper.isEmptyOrZeroRect(i))4===c&&this.clearSelection(0);else if(i=d.rectToDocument(lt.Controls.PrimitivesHelper.toLeadRect(i)),f=f.get_leadIndex()+1,h=this._doGetDocumentPageText(f,this.get_autoGetText(),
null),null==h||null==h.characters||!h.characters.length)4===c&&this.clearSelection(f);else{for(var h=h.characters,j=null,k=-1,l=-1,n=h.length,m=0;m<n;++m)if(i.intersectsWith(h[m].bounds)){l=k=m;break}for(m=k+1;m<n;++m)i.intersectsWith(h[m].bounds)&&(l=m);n=!1;if(0>k||0>l){m=new lt.Documents.UI.DocumentViewerOperationEventArgs(9,null,null,null,f,!1);this._documentViewer.onOperation(m);if(m.get_abort()){this._updateHasAnySelectedText();return}n=this.clearSelection(0)}if(b){if(-1===k){4===c&&this.clearSelection(f);
continue}for(var o=!0,p=k,m=k;m<=l;++m)o&&!i.intersectsWith(h[m].bounds)?(o=!1,null==j&&(j=[]),j.addRange(this._selectPageText(f,p,m-1,1===b,c))):!o&&i.intersectsWith(h[m].bounds)&&(p=m,o=!0);o&&(null==j&&(j=[]),j.addRange(this._selectPageText(f,p,l,1===b,c)))}else if(j=this._selectPageText(f,k,l,!0,c),2!==lt.Documents.UI.DocumentViewerText._getRealLineSelectionMode(d,f,this.get_lineSelectionMode())&&(i=i.clone(),k=[],null!=j)){for(m=0;m<j.length;m++)l=j[m],i.intersectsWith(l.get_bounds())?(lt.Documents.UI.DocumentViewerText._updateTextItemSelection(i,
h,l),i.intersectsWith(l.get_bounds())&&(i=lt.LeadRectD.unionRects(i,l.get_bounds()))):k.add(m);for(m=k.length-1;0<=m;m--)o=k[m],l=j[o],i.intersectsWith(l.get_bounds())?(lt.Documents.UI.DocumentViewerText._updateTextItemSelection(i,h,l),i.intersectsWith(l.get_bounds())&&(i=lt.LeadRectD.unionRects(i,l.get_bounds()))):j.removeAt(o)}n||(m=new lt.Documents.UI.DocumentViewerOperationEventArgs(9,null,null,null,f,!1),this._documentViewer.onOperation(m));n=this._isSameSelection(j,f);this._addOrReplaceSelectedText(f,
j);n&&(m=new lt.Documents.UI.DocumentViewerOperationEventArgs(9,null,null,null,f,!0),this._documentViewer.onOperation(m))}}f=new lt.Documents.UI.DocumentViewerOperationEventArgs(10,null,null,null,0,!0);this._documentViewer.onOperation(f)}}}}},_isSameSelection:function(a,b){if(null==this._selectedTextItems)return!1;if(!Object.keyExists(this._selectedTextItems,b))return null!=a;var c=this._selectedTextItems[b];if(null==c&&null!=a||null!=c&&null==a)return!0;if(c.length!==a.length)return!1;for(var d=
0;d<c.length;d++){var e=c[d],g=a[d];if(e.get_firstCharacterIndex()!==g.get_firstCharacterIndex()||e.get_lastCharacterIndex()!==g.get_lastCharacterIndex())return!1}return!0},_updateHasAnySelectedText:function(){this._hasAnySelectedText=!1;var a=this._selectedTextItems,b;for(b in a){var c=a[b];if(null!=c&&0<c.length){this._hasAnySelectedText=!0;break}}},_hasAnySelectedText:!1,hasSelectedText:function(a){if(!this._documentViewer.get_hasDocument())return!1;this._documentViewer._checkPageNumber(a,!0,"pageNumber");
if(null==this._selectedTextItems)return!1;if(!a)return this._hasAnySelectedText;for(var b=this._documentViewer.get_pageCount(),b=a?a:b,c=!1,a=a?a:1;a<=b&&!c;a++)Object.keyExists(this._selectedTextItems,a)&&(c=this._selectedTextItems[a],c=null!=c&&0<c.length);c&&!this._hasAnySelectedText&&(this._hasAnySelectedText=!0);return c},getSelectedText:function(a){if(!this._documentViewer.get_hasDocument())return null;this._documentViewer._checkPageNumber(a,!0,"pageNumber");for(var b=this._documentViewer.get_pageCount(),
c=a?a:1,a=a?a:b,b=new ss.StringBuilder,d=!0,e=0;c<=a;c++){var g=b.toString().length;!d&&g!==e&&b.appendLine();e=b.toString().length;d=this._doGetSelectedText(c,b)}return lt.Documents.UI.DocumentViewerText._removeLastEndOfLine(b.toString())},_doGetSelectedText:function(a,b){var c=this._documentViewer.get_document();if(!Object.keyExists(this._selectedTextItems,a)||!this._pageTextContains(c,a))return!1;var d=this._selectedTextItems[a];if(null==d||!d.length)return!1;c=this._getPageText(c,a).characters;
if(null==c||!c.length)return!1;for(var e,g,f=!1,d=ss.IEnumerator.getEnumerator(d);d.moveNext();){g=d.current;e=g.get_firstCharacterIndex();for(g=g.get_lastCharacterIndex();e<=g;++e){var h=c[e];b.append(h.code);f=!1;h.isEndOfWord&&e<g&&(b.append(" "),f=!1);h.isEndOfLine&&(f=!0,b.appendLine())}}return f},exportText:function(a){if(!this._documentViewer.get_hasDocument())return null;if(!this._documentViewer.get_document().pages.get_count())return"";this._documentViewer._checkPageNumber(a,!0,"pageNumber");
for(var b=this._documentViewer.get_pageCount(),c=a?a:1,a=a?a:b,b=new ss.StringBuilder,d=!0;c<=a;c++)d||b.appendLine(),d=this._doGetText(c,b);return b.toString()},_doGetText:function(a,b){var c=this._doGetDocumentPageText(a,this.get_autoGetText(),null);if(null==c||null==c.characters||!c.characters.length)return!1;c=c.text;null!=c&&b.append(c);return lt.Documents.UI.DocumentViewerText._endsWithEndOfLine(c)},copy:function(a){a=this.getSelectedText(a);String.isNullOrEmpty(a)||lt.Documents.UI.DocumentViewerText._nativeCopy(a)},
_lastFindText:null,clearLastFindText:function(){this._lastFindText=null},get_lastFindText:function(){return null!=this._lastFindText?this._lastFindText.clone():null},find:function(a,b,c){if(null==a)throw new lt.ArgumentNullException("findText");if(!this._documentViewer.get_hasDocument())return null;var d=a.get_pageNumber();this._documentViewer._checkPageNumber(d,!1,"PageNumber");var e=this._documentViewer.get_document(),g=e.pages.get_count(),f=d,h,i,j=!1,k,l=a.get__result();null!=l&&!b?k=l.clone():
(l=null,k=new lt.Documents.UI._internalFindTextResult);do if(h=!1,i=this._doGetDocumentPageText(f,this.get_autoGetText(),null),j&&(k.startIndex=c?0:i.text.length+a.get_text().length),i=a._find(i,c,k),!i&&a.get_gotoNextPage())j=!0,c?(f++,f>g&&(f=a.get_recursive()?1:d)):(f--,1>f&&(f=a.get_recursive()?g:d)),f!==d&&(h=!0);while(!i&&h);c=null;d=i;!i&&b&&null!=l&&-1!==l.firstCharacterIndex&&(k=l.clone(),i=!0);i&&(a._found(f,k),c=this._selectPageText(f,k.firstCharacterIndex,k.lastCharacterIndex,!1,1),this._processFindData(e,
a,c),this._lastFindText=a.clone());return d?c:null},_processFindData:function(a,b,c){if(!(null==c||!c.length||!b.get_autoSelect()&&!b.get_autoEnsureVisible()||null==this._documentViewer.get_view())){var d=this._documentViewer.get_view().get_imageViewer(),e=ss.Delegate.create(this,function(){d.beginUpdate();try{if(b.get_autoSelect()&&(this.clearSelection(0),!this._doSetSelectedTextItems(b.get_pageNumber(),c)))return;if(b.get_autoEnsureVisible()){for(var e=b.get_pageNumber()-1,f=d.get_items().get_item(e),
h=lt.LeadRectD.get_empty(),i=ss.IEnumerator.getEnumerator(c);i.moveNext();)h=lt.LeadRectD.unionRects(h,i.current.get_bounds());d.set_activeItem(f);d.gotoItem(f);h=lt.Controls.PrimitivesHelper.toLeadRectD(a.rectToPixels(h));h=d.convertRect(f,lt.Controls.ImageViewerCoordinateType.image,lt.Controls.ImageViewerCoordinateType.control,h);d.ensureBoundsVisible(h)}}finally{d.endUpdate()}});lt.Documents.UI._invoker.beginInvoke2(d,e,null,null)}},get_lineKeyModifier:function(){return this._lineKeyModifier},
set_lineKeyModifier:function(a){switch(a){case lt.Controls.Keys.none:case lt.Controls.Keys.alt:case lt.Controls.Keys.shift:case lt.Controls.Keys.control:this._lineKeyModifier=a;break;default:throw new lt.ArgumentException("Invalid value","LineKeyModifier");}return a},get_wordKeyModifier:function(){return this._wordKeyModifier},set_wordKeyModifier:function(a){switch(a){case lt.Controls.Keys.none:case lt.Controls.Keys.alt:case lt.Controls.Keys.shift:case lt.Controls.Keys.control:this._wordKeyModifier=
a;break;default:throw new lt.ArgumentException("Invalid value","WordKeyModifier");}return a},get_characterKeyModifier:function(){return this._characterKeyModifier},set_characterKeyModifier:function(a){switch(a){case lt.Controls.Keys.none:case lt.Controls.Keys.alt:case lt.Controls.Keys.shift:case lt.Controls.Keys.control:this._characterKeyModifier=a;break;default:throw new lt.ArgumentException("Invalid value","CharacterKeyModifier");}return a},_trySelect:function(a,b,c,d,e){if(null!=this._documentViewer.get_view()){var g=
this._documentViewer.get_view().get_imageViewer();null!=g&&null!=g.get_items().get_item(a-1)&&(a=[b.clone(),c.clone()],a=lt.Controls.PrimitivesHelper.getBoundingRect(a),a.get_isEmpty()||(b=0,lt.Documents.UI.DocumentViewerText._checkKeyModifier(e,this.get_wordKeyModifier())?b=1:lt.Documents.UI.DocumentViewerText._checkKeyModifier(e,this.get_characterKeyModifier())&&(b=2),this._documentViewer.get_text()._internalSelectText(lt.Controls.PrimitivesHelper.toLeadRect(a),b,d)))}},_prepareToSave:function(){},
_beginUpdate:function(){},_endUpdate:function(){},dispose:function(){this._destroy(!0)},_doRenderSelectedText:function(a,b){for(var c=b.get_data1(),d=c.get_item(),e=b.get_data2(),d=d.get_imageViewer().getItemImageTransform(d),c=c.get_context(),e=ss.IEnumerator.getEnumerator(e);e.moveNext();){var g=a.rectToPixels(e.current.get_bounds());lt.Controls.PrimitivesHelper.isEmptyOrZeroRect(g)||(g=d.transformRect(g));g.inflate(2,2);c.save();c.fillStyle=lt.Documents.UI.DocumentViewerText.get_selectedFill();
c.fillRect(g.get_x(),g.get_y(),g.get_width(),g.get_height());c.restore()}}};Object.defineProperty(lt.Documents.UI.DocumentViewerText.prototype,"documentViewer",{get:lt.Documents.UI.DocumentViewerText.prototype.get_documentViewer,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerText.prototype,"lineSelectionMode",{get:lt.Documents.UI.DocumentViewerText.prototype.get_lineSelectionMode,set:lt.Documents.UI.DocumentViewerText.prototype.set_lineSelectionMode,enumerable:!0,
configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerText.prototype,"renderSelection",{get:lt.Documents.UI.DocumentViewerText.prototype.get_renderSelection,set:lt.Documents.UI.DocumentViewerText.prototype.set_renderSelection,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerText.prototype,"autoGetText",{get:lt.Documents.UI.DocumentViewerText.prototype.get_autoGetText,set:lt.Documents.UI.DocumentViewerText.prototype.set_autoGetText,enumerable:!0,configurable:!0});
Object.defineProperty(lt.Documents.UI.DocumentViewerText.prototype,"lastFindText",{get:lt.Documents.UI.DocumentViewerText.prototype.get_lastFindText,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerText.prototype,"lineKeyModifier",{get:lt.Documents.UI.DocumentViewerText.prototype.get_lineKeyModifier,set:lt.Documents.UI.DocumentViewerText.prototype.set_lineKeyModifier,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerText.prototype,
"wordKeyModifier",{get:lt.Documents.UI.DocumentViewerText.prototype.get_wordKeyModifier,set:lt.Documents.UI.DocumentViewerText.prototype.set_wordKeyModifier,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerText.prototype,"characterKeyModifier",{get:lt.Documents.UI.DocumentViewerText.prototype.get_characterKeyModifier,set:lt.Documents.UI.DocumentViewerText.prototype.set_characterKeyModifier,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerText,
"selectedFill",{get:lt.Documents.UI.DocumentViewerText.get_selectedFill,set:lt.Documents.UI.DocumentViewerText.set_selectedFill,enumerable:!0,configurable:!0});lt.Documents.UI.DocumentViewerTextItem=function(){this._lastCharacterIndex=this._firstCharacterIndex=-1;this._bounds=lt.LeadRectD.get_empty()};lt.Documents.UI.DocumentViewerTextItem.prototype={clone:function(){var a=new lt.Documents.UI.DocumentViewerTextItem;a._firstCharacterIndex=this._firstCharacterIndex;a._lastCharacterIndex=this._lastCharacterIndex;
a._bounds=this._bounds;return a},_pageNumber:0,get_pageNumber:function(){return this._pageNumber},set_pageNumber:function(a){return this._pageNumber=a},get_firstCharacterIndex:function(){return this._firstCharacterIndex},set_firstCharacterIndex:function(a){return this._firstCharacterIndex=a},get_lastCharacterIndex:function(){return this._lastCharacterIndex},set_lastCharacterIndex:function(a){return this._lastCharacterIndex=a},get_bounds:function(){return this._bounds},set_bounds:function(a){lt.Controls.ControlsHelper.checkIfNull(a,
"Bounds");this._bounds=a.clone();return a}};Object.defineProperty(lt.Documents.UI.DocumentViewerTextItem.prototype,"pageNumber",{get:lt.Documents.UI.DocumentViewerTextItem.prototype.get_pageNumber,set:lt.Documents.UI.DocumentViewerTextItem.prototype.set_pageNumber,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerTextItem.prototype,"firstCharacterIndex",{get:lt.Documents.UI.DocumentViewerTextItem.prototype.get_firstCharacterIndex,set:lt.Documents.UI.DocumentViewerTextItem.prototype.set_firstCharacterIndex,
enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerTextItem.prototype,"lastCharacterIndex",{get:lt.Documents.UI.DocumentViewerTextItem.prototype.get_lastCharacterIndex,set:lt.Documents.UI.DocumentViewerTextItem.prototype.set_lastCharacterIndex,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerTextItem.prototype,"bounds",{get:lt.Documents.UI.DocumentViewerTextItem.prototype.get_bounds,set:lt.Documents.UI.DocumentViewerTextItem.prototype.set_bounds,
enumerable:!0,configurable:!0});lt.Documents.UI.DocumentViewerThumbnails=function(a){this._maximumSize=lt.LeadSizeD.create(128,128);this._documentMaximumSize=lt.LeadSizeD.get_empty();this._updateThumbnailImageTagTimer=-1;this._documentViewer=a};lt.Documents.UI.DocumentViewerThumbnails._getThumbnailSize=function(a,b){if(a.get_isEmpty()||!a.get_width()||!a.get_height())return lt.LeadSizeD.create(0,0);var c=parseInt(lt.Documents.Document.documentToPixels(96,a.get_width())),d=parseInt(lt.Documents.Document.documentToPixels(96,
a.get_height())),e=lt.LeadRectD.create(0,0,b.get_width(),b.get_height()),e=lt.Controls.ImageViewer.getDestinationRectangle(c,d,e,lt.Controls.ControlSizeMode.fit,lt.Controls.ControlAlignment.near,lt.Controls.ControlAlignment.near);return 1>e.get_width()||1>e.get_height()?lt.LeadSizeD.create(0,0):lt.LeadSizeD.create(e.get_width(),e.get_height())};lt.Documents.UI.DocumentViewerThumbnails.prototype={_destroy:function(a){a&&(this._stopWorking(!1),null!=this._imageViewer&&(this._imageViewer.remove_selectedItemsChanged(ss.Delegate.create(this,
this._imageViewer_SelectedItemsChanged)),this._imageViewer.remove_postRenderItem(ss.Delegate.create(this,this._imageViewer_PostRenderItem)),this._deleteControls(),this._imageViewer.dispose(),this._imageViewer=null))},_documentViewer:null,get_documentViewer:function(){return this._documentViewer},_imageViewer:null,get_imageViewer:function(){return this._imageViewer},_init:function(a){this._createControls(a);a=new lt.Controls.ImageViewerSelectItemsInteractiveMode;a.set_selectionMode(lt.Controls.ImageViewerSelectionMode.single);
this._imageViewer.get_useElements()&&a.set_autoDisableTransitions(!1);var b=new lt.Controls.ImageViewerPanZoomInteractiveMode;b.set_enableZoom(!1);b.set_doubleTapSizeMode(lt.Controls.ControlSizeMode.none);this._imageViewer.get_useElements()&&b.set_autoDisableTransitions(!1);this._imageViewer.beginUpdate();this._imageViewer.get_interactiveModes().add(a);this._imageViewer.get_interactiveModes().add(b);this._imageViewer.set_tag(this._documentViewer);this._imageViewer.endUpdate();this._imageViewer.add_postRenderItem(ss.Delegate.create(this,
this._imageViewer_PostRenderItem));this._imageViewer.add_selectedItemsChanged(ss.Delegate.create(this,this._imageViewer_SelectedItemsChanged))},_ignoreSelectedChangedCounter:0,_imageViewer_SelectedItemsChanged:function(){if(!(0<this._ignoreSelectedChangedCounter)){var a=this._imageViewer.get_items().getSelected();null==a||1!==a.length||this._documentViewer.gotoPage(this._imageViewer.get_items().indexOf(a[0])+1)}},_ensureSelected:function(a){if(!(null==this._imageViewer||0>a||a>=this._imageViewer.get_items().get_count()))if(a=
this._imageViewer.get_items().get_item(a),!a.get_isSelected()){this._ignoreSelectedChangedCounter++;try{this._imageViewer.get_items().select([a]),this._imageViewer.ensureItemVisible(a)}finally{this._ignoreSelectedChangedCounter--}}},_imageViewer_PostRenderItem:function(a,b){this._currentUseGrids&&this._renderThumbnailFromGrid(b);if(null!=this._documentViewer.get_annotations()&&this._documentViewer.get_annotations().get_renderOnThumbnails()&&null!=b.get_item()){var c=this._imageViewer.get_items().indexOf(b.get_item())+
1;this._documentViewer.get_annotations()._renderThumbnail(c,b)}},_renderThumbnailFromGrid:function(a){if(null!=this._groupLoader){if(this._groupLoader.get_isAborting())return}else if(null==this._grids||!this._grids.length)return;var b=this._documentViewer.get_thumbnails().get_imageViewer(),c=a.get_item(),d=b.getItemImageTransform(c),e=c.get_imageSize();if(!lt.Controls.PrimitivesHelper.isEmptyOrZeroSize(e)&&(b=b.getItemViewBounds(c,lt.Controls.ImageViewerItemPart.image,!1),!b.get_isEmpty()&&(b.set_width(b.get_width()+
1),b.set_height(b.get_height()+1),c=this._imageViewer.get_items().indexOf(a.get_item())+1,b=null,b=this._grids,b=lt.Documents.UI._thumbnailsGrid.getGridForPage(b,c),null!=b&&null!=b.get_image()&&(c=lt.Documents.UI._thumbnailsGrid.getGridImageRectForPage(b,c),!c.get_isEmpty())))){var e=lt.LeadRectD.create(0,0,e.get_width(),e.get_height()),g=null;try{d.get_isIdentity()||(g=lt.Controls.GraphicsHelper.saveContext(a.get_context()),lt.Controls.GraphicsHelper.multiplyTransform(a.get_context(),d)),this._renderImage(a.get_context(),
b.get_image(),e,c)}finally{null!=g&&lt.Controls.GraphicsHelper.restoreContext(a.get_context(),g)}}},_initControls:function(){this._imageViewer.beginUpdate();this._imageViewer.set_itemHorizontalAlignment(lt.Controls.ControlAlignment.center);this._imageViewer.set_itemVerticalAlignment(lt.Controls.ControlAlignment.center);this._imageViewer.get_useElements()?this._imageViewer.set_viewHorizontalAlignment(lt.Controls.ControlAlignment.center):(this._imageViewer.set_viewPadding(lt.Controls.PaddingHelper.create(8,
8,8,8)),this._imageViewer.set_imageBorderThickness(1),this._imageViewer.set_itemPadding(lt.Controls.PaddingHelper.create(10,10,10,20)),this._imageViewer.set_selectedItemBackgroundColor(lt.Controls.GraphicsHelper.colorFromString("lightblue")));this._imageViewer.endUpdate()},_groupLoader:null,_useGroupLoader:!1,get__useGroupLoader:function(){return this._useGroupLoader},set__useGroupLoader:function(a){return this._useGroupLoader=a},_workerCount:4,get_workerCount:function(){return this._workerCount},
set_workerCount:function(a){if(this._workerCount!==a){if(1>a)throw new lt.ArgumentOutOfRangeException("WorkerCount",a,"Must be a value greater than or equal to 1");this._workerCount=a;null!=this._groupLoader&&this._groupLoader.get_isWorking()&&this._groupLoader.set_maximumLoadersWorking(this._workerCount)}return a},get_maximumSize:function(){return this._maximumSize.clone()},set_maximumSize:function(a){if(a.get_isEmpty()||!a.get_width()||!a.get_height())throw new lt.ArgumentOutOfRangeException("MaximumSize",
a,"Cannot be size zero or empty");this._maximumSize=a.clone();return a},_lazyLoad:!1,get_lazyLoad:function(){return this._lazyLoad},set_lazyLoad:function(a){if(this._lazyLoad!==a){this._lazyLoad=a;var b=this._documentViewer.get_document();null!=this._groupLoader&&this._groupLoader.get_isWorking()&&null!=b&&b.isReadOnly&&this._groupLoader.set_lazyLoad(this._lazyLoad);this._imageViewer_ScrollOffsetChanged(null,null)}return a},_grids:null,_useGrids:!1,get_useGrids:function(){return this._useGrids},set_useGrids:function(a){return this._useGrids=
a},_gridPixelSize:400,get_gridPixelSize:function(){return this._gridPixelSize},set_gridPixelSize:function(a){if(0>a)throw new lt.ArgumentOutOfRangeException("GridPixelSize",a,"Must be a value greater than 0");return this._gridPixelSize=a},_currentUseGrids:!1,get_isLoading:function(){return null!=this._groupLoader&&this._groupLoader.get_isWorking()},_startWorking:function(){this._ignoreSelectedChangedCounter=0;this._stopWorking(!1);this._imageViewer.beginUpdate();this._imageViewer.get_items().clear();
this._imageViewer.reset();this._imageViewer.endUpdate();this._documentMaximumSize=this._maximumSize;var a=this._documentViewer.get_document();null!=a&&null!=a&&a.pages.get_count()&&this._addPages(lt.Documents.UI._documentViewerHelper.getAsList(a.pages),0)},_startLoading:function(a,b){var c=this._documentViewer.get_document(),d=new lt.Documents.UI.DocumentViewerOperationEventArgs(1,null,null,null,0,!1);this._documentViewer.onOperation(d);if(!d.get_abort()){var d=c.isReadOnly,e=this.get__useGroupLoader()||
!d;if((this._currentUseGrids=this.get_useGrids()&&d&&!e)&&this._documentViewer.get_isUsingPDFRendering())this._currentUseGrids=!1;this._startLoading_GroupLoader(c,a,b)}},_startLoading_GroupLoader:function(a,b,c){if(null==this._groupLoader){this._imageViewer.add_scrollOffsetChanged(ss.Delegate.create(this,this._imageViewer_ScrollOffsetChanged));this._imageViewer.add_transformChanged(ss.Delegate.create(this,this._imageViewer_TransformChanged));if(this._currentUseGrids)this._groupLoader=new lt.ImageGroupLoader(this._getThumbnailsGridIterations(a),
this._imageViewer.get_imagesDiv()),this._groupLoader.set_maximumLoadersWorking(1);else{var d=a.isReadOnly?a.pages.get_count():-1;this._groupLoader=new lt.ImageGroupLoader(d,this._imageViewer.get_imagesDiv());this._groupLoader.set_maximumLoadersWorking(this._workerCount)}this._groupLoader.set_lazyLoad(this.get_lazyLoad()||!a.isReadOnly);this._groupLoader.add_allDone(ss.Delegate.create(this,this._groupLoader_AllDone))}if(this._currentUseGrids)this._groupLoadGrid(a);else for(var e=(d=this._documentViewer.get__documentUseAjaxImageLoading())?
lt.ImageLoaderUrlMode.ajaxDataUrl:lt.ImageLoaderUrlMode.imageUrl,g=b;g<b+c;g++){var f=this._imageViewer.get_items().get_item(g),h=a.pages.get_item(g),i=null,j=!h.isLocal;this.get_documentViewer().get_isUsingPDFRendering()&&lt.Documents.UI._pdfRenderingHandler.isForPDF(h)&&(j=!1);if(j){var i=new lt.ImageLoader,k=h.getThumbnailImage();i.set_urlMode(e);h=h.getThumbnailImageElement(i);if(d&&"rejected"===h.state()){f=new lt.Documents.UI.DocumentViewerOperationEventArgs(2,Error("Error loading thumbnail"),
null,null,g+1,!0);this._documentViewer.onOperation(f);continue}i.set_url(k);i.add_done(ss.Delegate.create(this,this._imageLoader_Done));i.add_fail(ss.Delegate.create(this,this._imageLoader_Fail));i.add_always(ss.Delegate.create(this,this._imageLoader_Always));i.set_tag(f)}this._groupLoader.load(i,f,g);j||(f=new lt.Documents.UI.DocumentViewerOperationEventArgs(2,null,null,null,g+1,!0),this._documentViewer.onOperation(f))}if((this.get_lazyLoad()||!a.isReadOnly)&&!this._tryUpdateThumbnailImageTags())d=
this._imageViewer.get_items().get_count(),a=Math.min(2*this._workerCount,d)-1,this._currentUseGrids?(b=lt.Documents.UI._thumbnailsGrid.getGridForPage(this._grids,1),a=lt.Documents.UI._thumbnailsGrid.getGridForPage(this._grids,a)):(b=this._imageViewer.get_items().get_item(0),a=this._imageViewer.get_items().get_item(a)),null!=b&&null!=a&&this._groupLoader.setImageTags(b,a)},_imageLoader_Done:function(a){var b=a.get_tag();null!=b.get_imageViewer()&&(a.get_isHTMLImageElement()?b.set_image(a.get_element()):
b.set_element(a.get_element()),null!=b.get_imageViewer()&&(b=b.get_imageViewer().get_items().indexOf(b),this._documentViewer.onOperation(new lt.Documents.UI.DocumentViewerOperationEventArgs(2,null,a.get_url(),null,b+1,!0))))},_imageLoader_Fail:function(a){var b=a.get_tag(),b=b.get_imageViewer().get_items().indexOf(b);this._documentViewer.onOperation(new lt.Documents.UI.DocumentViewerOperationEventArgs(2,a.get_error(),null,null,b+1,!0))},_imageLoader_Always:function(a){a.remove_done(ss.Delegate.create(this,
this._imageLoader_Done));a.remove_fail(ss.Delegate.create(this,this._imageLoader_Fail));a.remove_always(ss.Delegate.create(this,this._imageLoader_Always))},_addPages:function(a,b){if(null!=a&&a.length){this._imageViewer.beginUpdate();var c=this._documentViewer.get_document(),d=b,e=this.get_imageViewer().get_itemSize().clone();if(e.get_isEmpty()||!e.get_width()&&!e.get_height())e=this._documentMaximumSize;for(var e=lt.LeadRectD.create(0,0,e.get_width(),e.get_height()),g=ss.IEnumerator.getEnumerator(a);g.moveNext();){var f=
g.current,h=new lt.Controls.ImageViewerItem,i=c.sizeToPixels(f.size),i=lt.Controls.ImageViewer.getDestinationRectangle(i.get_width(),i.get_height(),e,lt.Controls.ControlSizeMode.fit,lt.Controls.ControlAlignment.near,lt.Controls.ControlAlignment.near);h.set_imageSize(i.get_size());h.set_tag(f);this._imageViewer.get_items().insert(d,h);d++}this.get_documentViewer().get__isUpdating()?this._needsUpdatePageNumbers=!0:this._updatePageNumbers();this._imageViewer.endUpdate();this._startLoading(b,a.length)}},
_removePages:function(a,b){if(null!=a&&a.length){this._imageViewer.beginUpdate();this._documentViewer.get_document();for(var c=a.length;0<c;){var d=this._imageViewer.get_items().get_item(b);this._imageViewer.get_items().remove(d);null!=this._groupLoader&&this._groupLoader.remove(b);c--}this.get_documentViewer().get__isUpdating()?this._needsUpdatePageNumbers=!0:this._updatePageNumbers();this._imageViewer.endUpdate()}},_needsUpdatePageNumbers:!1,_updatePageNumbers:function(){this._needsUpdatePageNumbers=
!1;for(var a=this._documentViewer.get_document(),b=a.pages.get_count(),c=0;c<b;c++)a.pages.get_item(c),this._imageViewer.get_items().get_item(c).set_text("Page "+(c+1).toString())},_groupLoader_AllDone:function(){var a=ss.Delegate.create(this,function(){this._stopWorking(!0);this.invalidate(lt.LeadRectD.get_empty())});lt.Documents.UI._invoker.beginInvoke0(this._imageViewer,a)},_groupLoadGrid:function(a){for(var b=null,c=null,d=null,e=this._documentViewer.get__documentUseAjaxImageLoading(),g=null,
b=ss.Delegate.create(this,function(a){var b=a.get_tag();try{var d;if(a.get_isHTMLImageElement())d=a.get_element();else throw new lt.InvalidOperationException("Thumbnails Grid requires an Image Element");var c=window.document.createElement("canvas");c.width=d.naturalWidth;c.height=d.naturalHeight;c.getContext("2d").drawImage(d,0,0);b.set_image(c);for(var a=!1,c=null,e=b.get_firstPageNumber();e<=b.get_lastPageNumber()&&!a;e++)1<=e&&e<=this._imageViewer.get_items().get_count()&&(c=this._imageViewer.get_items().get_item(e-
1),this._imageViewer.isItemVisible(c,lt.Controls.ImageViewerItemPart.item)&&(a=!0));a&&this._imageViewer.invalidate(lt.LeadRectD.get_empty());g=new lt.Documents.UI.DocumentViewerOperationEventArgs(2,null,d,null,b.get_lastPageNumber(),!0)}catch(f){g=new lt.Documents.UI.DocumentViewerOperationEventArgs(2,f,null,null,b.get_lastPageNumber(),!0)}}),c=function(a){a=a.get_tag();g=new lt.Documents.UI.DocumentViewerOperationEventArgs(2,Error("Error loading grid"),null,null,a.get_lastPageNumber(),!0)},d=ss.Delegate.create(this,
function(a){a.remove_done(b);a.remove_fail(c);a.remove_always(d);this._documentViewer.onOperation(g)}),f=e?lt.ImageLoaderUrlMode.ajaxDataUrl:lt.ImageLoaderUrlMode.imageUrl,h=0;h<this._grids.length;h++){var i=new lt.ImageLoader;i.set_urlMode(f);if(null==this._groupLoader||this._groupLoader.get_isAborting())break;var j=this._grids[h],k=a.images.getThumbnailsGrid(j.get_firstPageNumber(),j.get_lastPageNumber(),this._gridPixelSize),l=a.images.getThumbnailsGridElement(j.get_firstPageNumber(),j.get_lastPageNumber(),
this._gridPixelSize,i);e&&"rejected"===l.state()?(this._documentViewer.onOperation(new lt.Documents.UI.DocumentViewerOperationEventArgs(2,Error("Error loading thumbnail"),null,null,j.get_lastPageNumber(),!0)),i=null):(i.add_done(b),i.add_fail(c),i.add_always(d),i.set_url(k),i.set_tag(j),this._groupLoader.load(i,j,h))}},_getThumbnailsGridIterations:function(a){var b=a.images.thumbnailPixelSize,c=a.pages.get_count(),d=lt.Documents.UI._documentViewerHelper.parseInt(this._gridPixelSize*this._gridPixelSize/
(parseInt(b.get_width())*parseInt(b.get_height())));1>d&&(d=1);var e=parseInt(c/d);c%d&&e++;this._grids=[];var g=1,f=0;do{var f=Math.min(c,g+d-1),h=lt.Documents.UI._documentViewerHelper.parseInt(Math.max(1,0<this._gridPixelSize?this._gridPixelSize/parseInt(b.get_width()):c)),i=lt.Documents.UI._documentViewerHelper.parseInt(c/h);c%h&&i++;if(f>=g){var j=new lt.Documents.UI._thumbnailsGrid;j.set_firstPageNumber(g);j.set_lastPageNumber(f);j.set_image(null);j.set_columns(h);for(var k=0,l=0;l<i&&g<=f;l++){for(var n=
0;n<h&&g<=f;n++){var m=a.pages.get_item(g-1).size,m=lt.Documents.UI.DocumentViewerThumbnails._getThumbnailSize(m,b),o=lt.LeadRectD.create(n*b.get_width(),l*b.get_height(),b.get_width(),b.get_height()),o=lt.Controls.ImageViewer.getDestinationRectangle(parseInt(m.get_width()),parseInt(m.get_height()),o,lt.Controls.ControlSizeMode.fit,lt.Controls.ControlAlignment.center,lt.Controls.ControlAlignment.center);j.get_rects().add(o);g++}k++}j.set_columns(h);j.set_rows(k);this._grids.add(j);g=f+1}}while(f<
c);return e},_stopWorking:function(a){a||(lt.Documents.UI._thumbnailsGrid.deleteGrid(this._grids),this._grids=null);null!=this._groupLoader&&(this._groupLoader.remove_allDone(ss.Delegate.create(this,this._groupLoader_AllDone)),this._groupLoader.dispose(),this._groupLoader=null,this._imageViewer.remove_scrollOffsetChanged(ss.Delegate.create(this,this._imageViewer_ScrollOffsetChanged)),this._imageViewer.remove_transformChanged(ss.Delegate.create(this,this._imageViewer_TransformChanged)),this._documentViewer.onOperation(new lt.Documents.UI.DocumentViewerOperationEventArgs(1,
null,null,null,0,!0)));this._documentMaximumSize=lt.LeadSizeD.get_empty()},_doTryUpdateThumbnailImageTags:function(){this._updateThumbnailImageTagTimer=-1;if(this._imageViewer.get_hasSize()){var a=this._imageViewer.getFirstVisibleItem(lt.Controls.ImageViewerItemPart.item),b=this._imageViewer.getLastVisibleItem(lt.Controls.ImageViewerItemPart.item);null==a&&null==b||(this._currentUseGrids&&(a=this._imageViewer.get_items().indexOf(a),b=this._imageViewer.get_items().indexOf(b),-1!==a&&-1!==b?(a=lt.Documents.UI._thumbnailsGrid.getGridForPage(this._grids,
a+1),b=lt.Documents.UI._thumbnailsGrid.getGridForPage(this._grids,b+1)):b=a=!1),null!=this._groupLoader&&null!=a&&null!=b&&this._groupLoader.setImageTags(a,b))}},_tryUpdateThumbnailImageTags:function(){return null!=this._groupLoader&&this._groupLoader.get_isWorking()&&this._imageViewer.get_hasSize()&&null!=this._imageViewer.getFirstVisibleItem(lt.Controls.ImageViewerItemPart.item)?(-1!==this._updateThumbnailImageTagTimer&&clearTimeout(this._updateThumbnailImageTagTimer),this._updateThumbnailImageTagTimer=
setTimeout(ss.Delegate.create(this,this._doTryUpdateThumbnailImageTags),100),!0):!1},_imageViewer_ScrollOffsetChanged:function(){},_imageViewer_TransformChanged:function(){null==this._documentViewer||null==this._imageViewer||this._tryUpdateThumbnailImageTags()},invalidate:function(a){null!=this._imageViewer&&this._imageViewer.invalidate(a)},_prepareToSave:function(){},_beginUpdate:function(){null!=this._imageViewer&&this._imageViewer.beginUpdate()},_endUpdate:function(){this._needsUpdatePageNumbers&&
this._updatePageNumbers();null!=this._imageViewer&&this._imageViewer.endUpdate()},dispose:function(){this._destroy(!0)},_createControls:function(a){if(null!=a.get_thumbnailsContainer()){var b=a.get_thumbnailsCreateOptions();b.set_parentDiv(a.get_thumbnailsContainer());this._imageViewer=new lt.Controls.ImageViewer(b);null==b.get_viewLayout()&&(a=new lt.Controls.ImageViewerVerticalViewLayout,a.set_columns(0),this._imageViewer.set_viewLayout(a));this._useGrids=!0;this._initControls()}},_deleteControls:function(){if(null!=
this._imageViewer){var a=this._imageViewer.get_mainDiv();null!=a&&a.parentNode.removeChild(a)}},_renderImage:function(a,b,c,d){a.drawImage(b,d.get_x(),d.get_y(),d.get_width(),d.get_height(),c.get_x(),c.get_y(),c.get_width(),c.get_height())},_nativeSetItemImage:function(a,b){a.set_url(b)}};Object.defineProperty(lt.Documents.UI.DocumentViewerThumbnails.prototype,"documentViewer",{get:lt.Documents.UI.DocumentViewerThumbnails.prototype.get_documentViewer,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerThumbnails.prototype,
"imageViewer",{get:lt.Documents.UI.DocumentViewerThumbnails.prototype.get_imageViewer,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerThumbnails.prototype,"workerCount",{get:lt.Documents.UI.DocumentViewerThumbnails.prototype.get_workerCount,set:lt.Documents.UI.DocumentViewerThumbnails.prototype.set_workerCount,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerThumbnails.prototype,"maximumSize",{get:lt.Documents.UI.DocumentViewerThumbnails.prototype.get_maximumSize,
set:lt.Documents.UI.DocumentViewerThumbnails.prototype.set_maximumSize,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerThumbnails.prototype,"lazyLoad",{get:lt.Documents.UI.DocumentViewerThumbnails.prototype.get_lazyLoad,set:lt.Documents.UI.DocumentViewerThumbnails.prototype.set_lazyLoad,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerThumbnails.prototype,"useGrids",{get:lt.Documents.UI.DocumentViewerThumbnails.prototype.get_useGrids,
set:lt.Documents.UI.DocumentViewerThumbnails.prototype.set_useGrids,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerThumbnails.prototype,"gridPixelSize",{get:lt.Documents.UI.DocumentViewerThumbnails.prototype.get_gridPixelSize,set:lt.Documents.UI.DocumentViewerThumbnails.prototype.set_gridPixelSize,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerThumbnails.prototype,"isLoading",{get:lt.Documents.UI.DocumentViewerThumbnails.prototype.get_isLoading,
enumerable:!0,configurable:!0});lt.Documents.UI.DocumentViewerView=function(a){this._updateViewImageTagTimer=-1;this._preferredItemType=this._itemType=0;this._documentViewer=a};lt.Documents.UI.DocumentViewerView._getPageImages=function(a,b,c){a=a.pages.get_item(c);c=[null,null];1===b.get_itemType()&&a.isSvgSupported?(c[0]=a.getSvg(lt.Documents.DocumentGetSvgOptions.none),b.get_useSvgBackImage()&&(c[1]=a.getSvgBackImage(b.get_imageViewer().get_imageBackgroundColor()))):c[0]=a.getImage();return c};
lt.Documents.UI.DocumentViewerView.prototype={_destroy:function(a){a&&(this._stopWorking(),null!=this._imageViewer&&(this._imageViewer.remove_postRenderItem(ss.Delegate.create(this,this._imageViewer_PostRenderItem)),this._imageViewer.remove_scrollOffsetChanged(ss.Delegate.create(this,this._imageViewer_ScrollOffsetChanged)),this._imageViewer.remove_transformChanged(ss.Delegate.create(this,this._imageViewer_TransformChanged)),this._imageViewer.remove_activeItemChanged(ss.Delegate.create(this,this._imageViewer_ActiveItemChanged)),
this._deleteControls(),null!=this._imageViewer&&this._imageViewer.dispose(),this._imageViewer=null))},_documentViewer:null,get_documentViewer:function(){return this._documentViewer},_imageViewer:null,get_imageViewer:function(){return this._imageViewer},_useSvgBackImage:!1,get_useSvgBackImage:function(){return this._useSvgBackImage},set_useSvgBackImage:function(a){return this._useSvgBackImage=a},_init:function(a,b){this._createControls(a,b)},_initInteractiveModes:function(a){var b=this.get_documentViewer().get_commands(),
c=b.get__commands();this._imageViewer.get_interactiveModes().beginUpdate();var d=new lt.Controls.ImageViewerAutoPanInteractiveMode;d.set_panDelay(50);d.set_moveThreshold(1);this._imageViewer.get_interactiveModes().add(d);d=this._documentViewer.get_annotations();null!=d&&(d=d.get_interactiveMode(),this._imageViewer.get_interactiveModes().add(d));d=new lt.Documents.UI.DocumentViewerPageLinksInteractiveMode(this._documentViewer);this._imageViewer.get_interactiveModes().add(d);for(var e in c)d=Type.safeCast(c[e].get_tag(),
lt.Controls.ImageViewerInteractiveMode),null!=d&&(d.set_isEnabled(!1),this._imageViewer.get_interactiveModes().add(d));this._setInteratciveModeCursors();this._imageViewer.get_interactiveModes().endUpdate();c=Type.safeCast(this._imageViewer.get_interactiveModes().findById(102),lt.Documents.UI.DocumentViewerSelectTextInteractiveMode);null!=c&&c.set_documentViewer(this._documentViewer);b.run(a,null)},_setInteratciveModeCursors:function(){for(var a=lt.Documents.UI._documentViewerHelper.getCursor(5),b=
lt.Documents.UI._documentViewerHelper.getCursor(1),c=lt.Documents.UI._documentViewerHelper.getCursor(2),d=lt.Documents.UI._documentViewerHelper.getCursor(3),e=lt.Documents.UI._documentViewerHelper.getCursor(4),g=ss.IEnumerator.getEnumerator(this._imageViewer.get_interactiveModes());g.moveNext();){var f=g.current;switch(f.get_id()){case lt.Controls.ImageViewerInteractiveMode.panZoomModeId:var h=Type.safeCast(f,lt.Controls.ImageViewerPanZoomInteractiveMode);null!=h&&(h.get_enablePan()&&h.get_enableZoom()?
(f.set_idleCursor(a),f.set_workingCursor(b)):h.get_enablePan()&&!h.get_enableZoom()?(f.set_idleCursor(b),f.set_workingCursor(b)):!h.get_enablePan()&&h.get_enableZoom()&&(f.set_idleCursor(d),f.set_workingCursor(d)));break;case lt.Controls.ImageViewerInteractiveMode.zoomToModeId:f.set_idleCursor(c);f.set_workingCursor(c);break;case lt.Controls.ImageViewerInteractiveMode.magnifyGlassModeId:f.set_idleCursor(c);f.set_workingCursor(c);break;case 102:f.set_idleCursor(e);f.set_workingCursor(e);break;case lt.Controls.ImageViewerInteractiveMode.rubberBandModeId:f.set_idleCursor(c);
f.set_workingCursor(c);break;case 101:f.set_hitTestStateCursor(b)}}},_initControls:function(){this._imageViewer.beginUpdate();this._imageViewer.set_viewHorizontalAlignment(lt.Controls.ControlAlignment.center);this._imageViewer.set_viewVerticalAlignment(lt.Controls.ControlAlignment.center);this._imageViewer.set_imageHorizontalAlignment(lt.Controls.ControlAlignment.center);this._imageViewer.set_imageVerticalAlignment(lt.Controls.ControlAlignment.center);this._imageViewer.set_useDpi(!0);this._imageViewer.set_tag(this._documentViewer);
this._imageViewer.add_postRenderItem(ss.Delegate.create(this,this._imageViewer_PostRenderItem));this._imageViewer.add_scrollOffsetChanged(ss.Delegate.create(this,this._imageViewer_ScrollOffsetChanged));this._imageViewer.add_activeItemChanged(ss.Delegate.create(this,this._imageViewer_ActiveItemChanged));this._imageViewer.add_transformChanged(ss.Delegate.create(this,this._imageViewer_TransformChanged));this._imageViewer.get_useElements()?this._imageViewer.set_itemSpacing(lt.LeadSizeD.create(10,10)):
(this._imageViewer.set_imageBorderThickness(1),this._imageViewer.set_imageBackgroundColor(lt.Controls.GraphicsHelper.colorFromString("white")),this._imageViewer.set_itemPadding(lt.Controls.PaddingHelper.create(4,4,4,4)));this._imageViewer.set_maximumScaleFactor(64);this._imageViewer.set_minimumScaleFactor(0.1);this._imageViewer.endUpdate()},_doTryUpdateViewImageTags:function(){this._updateViewImageTagTimer=-1;if(!(null==this._imageGroupLoader&&null==this._backImageGroupLoader)&&this._imageViewer.get_hasSize()){var a=
this._imageViewer.getFirstVisibleItem(lt.Controls.ImageViewerItemPart.item),b=this._imageViewer.getLastVisibleItem(lt.Controls.ImageViewerItemPart.item);null!=a&&null!=b&&(null!=this._imageGroupLoader&&this._imageGroupLoader.get_isWorking()&&this._imageGroupLoader.setImageTags(a,b),null!=this._backImageGroupLoader&&this._backImageGroupLoader.get_isWorking()&&this._backImageGroupLoader.setImageTags(a,b))}},_tryUpdateViewImageTags:function(){return(null!=this._imageGroupLoader&&this._imageGroupLoader.get_isWorking()||
null!=this._backImageGroupLoader&&this._backImageGroupLoader.get_isWorking())&&this._imageViewer.get_hasSize()&&null!=this._imageViewer.getFirstVisibleItem(lt.Controls.ImageViewerItemPart.item)?(-1!==this._updateViewImageTagTimer&&clearTimeout(this._updateViewImageTagTimer),this._updateViewImageTagTimer=setTimeout(ss.Delegate.create(this,this._doTryUpdateViewImageTags),100),!0):!1},_imageGroupLoader_AllDone:function(){this._imageGroupLoader.remove_allDone(ss.Delegate.create(this,this._imageGroupLoader_AllDone));
this._imageGroupLoader.dispose();this._imageGroupLoader=null},_backImageGroupLoader_AllDone:function(){this._backImageGroupLoader.remove_allDone(ss.Delegate.create(this,this._backImageGroupLoader_AllDone));this._backImageGroupLoader.dispose();this._backImageGroupLoader=null},_imageViewer_ScrollOffsetChanged:function(){},_imageViewer_TransformChanged:function(){null==this._documentViewer||null==this._imageViewer||this._tryUpdateViewImageTags()},_ignoreActiveItemChangedCounter:0,_imageViewer_ActiveItemChanged:function(){if(!(0<
this._ignoreActiveItemChangedCounter||null==this._documentViewer||null==this._imageViewer||null==this._documentViewer.get_thumbnails())){var a=this._imageViewer.get_activeItem();if(null!=a){var b=a.get_leadIndex();this._documentViewer.get_thumbnails()._ensureSelected(b);this._documentViewer._doGotoPage(this._imageViewer.get_items().indexOf(a)+1,!1,!0)}}},_imageViewer_PostRenderItem:function(a,b){null!=this._documentViewer&&this._documentViewer._postRenderViewItem(a,b)},_imageGroupLoader:null,_backImageGroupLoader:null,
_useGroupLoader:!1,get__useGroupLoader:function(){return this._useGroupLoader},set__useGroupLoader:function(a){return this._useGroupLoader=a},_workerCount:4,get_workerCount:function(){return this._workerCount},set_workerCount:function(a){if(this._workerCount!==a){if(1>a)throw new lt.ArgumentOutOfRangeException("WorkerCount",a,"Must be a value greater than or equal to 1");this._workerCount=a;null!=this._imageGroupLoader&&this._imageGroupLoader.get_isWorking()&&this._imageGroupLoader.set_maximumLoadersWorking(this._workerCount);
null!=this._backImageGroupLoader&&this._backImageGroupLoader.get_isWorking()&&this._backImageGroupLoader.set_maximumLoadersWorking(this._workerCount)}return a},_lazyLoad:!1,get_lazyLoad:function(){return this._lazyLoad},set_lazyLoad:function(a){this._lazyLoad!==a&&(this._lazyLoad=a,null!=this._imageGroupLoader&&this._imageGroupLoader.get_isWorking()&&this._imageGroupLoader.set_lazyLoad(this._lazyLoad),null!=this._backImageGroupLoader&&this._backImageGroupLoader.get_isWorking()&&this._backImageGroupLoader.set_lazyLoad(this._lazyLoad),
this._imageViewer_ScrollOffsetChanged(null,null));return a},_startWorking:function(){this._doStartWorking(!0)},_doStartWorking:function(a){this._stopWorking();this._imageViewer.beginUpdate();if(a)this._imageViewer.get_items().clear(),this._imageViewer.reset();else for(var b=ss.IEnumerator.getEnumerator(this._imageViewer.get_items());b.moveNext();){var c=b.current,d=c.get_imageSize();c.deleteImage();c.set_size(d);c.set_imageSize(d)}this._imageViewer.endUpdate();b=this._documentViewer.get_document();
null!=b&&(this._itemType=1===this.get_preferredItemType()&&b.images.isSvgViewingPreferred?1:0,!a&&this.get__useVirtualizer()&&this._reCreateVirtualizer(),(c=null!=b?b.pages.get_count():0)&&(a?this._addPages(lt.Documents.UI._documentViewerHelper.getAsList(b.pages),0):this._startLoading(0,c)))},_addPages:function(a,b){if(null!=a&&a.length){this._ignoreActiveItemChangedCounter++;this._imageViewer.beginUpdate();try{for(var c=this._documentViewer.get_document(),d=b,e=ss.IEnumerator.getEnumerator(a);e.moveNext();){var g=
e.current,f=new lt.Controls.ImageViewerItem,h=c.sizeToPixels(g.size);f.set_resolution(lt.LeadSizeD.create(g.resolution,g.resolution));f.set_imageSize(h);f.set_size(f.get_imageSize());f.set_imageScale(g.imageScale);this._imageViewer.get_items().insert(d,f);d++}}finally{this._updatePageNumbers(),this._imageViewer.endUpdate(),this._ignoreActiveItemChangedCounter--}this._startLoading(b,a.length)}},_removePages:function(a,b){if(null!=a&&a.length){this._ignoreActiveItemChangedCounter++;this._imageViewer.beginUpdate();
try{this._documentViewer.get_document();for(var c=a.length;0<c;){var d=this._imageViewer.get_items().get_item(b);this._imageViewer.get_items().remove(d);null!=this._imageGroupLoader&&this._imageGroupLoader.remove(b);null!=this._backImageGroupLoader&&this._backImageGroupLoader.remove(b);c--}}finally{this._updatePageNumbers(),this._imageViewer.endUpdate(),this._ignoreActiveItemChangedCounter--}}},_updatePageNumbers:function(){},_startLoading:function(a,b){var c=new lt.Documents.UI.DocumentViewerOperationEventArgs(3,
null,null,null,0,!1);this._documentViewer.onOperation(c);if(!c.get_abort()){var c=this._documentViewer.get_document(),d=c.isReadOnly;if(this.get__useVirtualizer())this._reCreateVirtualizer();else{this.get__useGroupLoader();null==this._imageGroupLoader&&(this._imageGroupLoader=new lt.ImageGroupLoader(!d?-1:b,this._imageViewer.get_imagesDiv()),this._imageGroupLoader.set_maximumLoadersWorking(this._workerCount),this._imageGroupLoader.set_lazyLoad(this._lazyLoad),this._imageGroupLoader.add_allDone(ss.Delegate.create(this,
this._imageGroupLoader_AllDone)));null==this._backImageGroupLoader&&(this._backImageGroupLoader=new lt.ImageGroupLoader(!d?-1:b,this._imageViewer.get_imagesDiv()),this._backImageGroupLoader.set_maximumLoadersWorking(this._workerCount),this._backImageGroupLoader.set_lazyLoad(this._lazyLoad),this._backImageGroupLoader.add_allDone(ss.Delegate.create(this,this._backImageGroupLoader_AllDone)));for(var d=1===this.get_itemType(),e=this._documentViewer.get__documentUseAjaxImageLoading(),g=e?lt.ImageLoaderUrlMode.ajaxDataUrl:
lt.ImageLoaderUrlMode.imageUrl,f=lt.Documents.DocumentGetSvgOptions.none,h=a;h<a+b;h++){var i=c.pages.get_item(h),j=this._imageViewer.get_items().get_item(h),k=null,l=null;if(!(null==i||null==j)){var n=!i.isLocal;this.get_documentViewer().get_isUsingPDFRendering()&&lt.Documents.UI._pdfRenderingHandler.isForPDF(i)&&(n=!1);if(n&&(this._documentViewer.onOperation(new lt.Documents.UI.DocumentViewerOperationEventArgs(4,null,null,null,h+1,!1)),k=new lt.ImageLoader,k.set_urlMode(g),n=d&&i.isSvgSupported?
i.getSvgElement(f,k):i.getImageElement(k),e&&"rejected"===n.state()&&(n=new lt.Documents.UI.DocumentViewerOperationEventArgs(4,Error("Error loading image"),null,null,h+1,!0),this._documentViewer.onOperation(n),k=null),null!=k&&(k.add_done(ss.Delegate.create(this,this._imageLoader_Done)),k.add_fail(ss.Delegate.create(this,this._imageLoader_Fail)),k.add_always(ss.Delegate.create(this,this._imageLoader_Always)),k.set_tag(j)),d&&this.get_useSvgBackImage()))if(l=new lt.ImageLoader,l.set_urlMode(g),n=i.getSvgBackImageElement(this.get_imageViewer().get_imageBackgroundColor(),
l),e&&"rejected"===n.state()&&(n=new lt.Documents.UI.DocumentViewerOperationEventArgs(4,Error("Error loading image"),null,null,h+1,!0),this._documentViewer.onOperation(n),l=null),null!=l)l.add_done(ss.Delegate.create(this,this._backImageLoader_Done)),l.add_fail(ss.Delegate.create(this,this._imageLoader_Fail)),l.add_always(ss.Delegate.create(this,this._backImageLoader_Always)),l.set_tag(j)}d&&this.get_useSvgBackImage()&&this._backImageGroupLoader.load(l,j,h);this._imageGroupLoader.load(k,j,h);null==
i||null==j?(n=new lt.Documents.UI.DocumentViewerOperationEventArgs(4,Error("Error loading image"),null,null,h+1,!0),this._documentViewer.onOperation(n)):i.isLocal&&(n=new lt.Documents.UI.DocumentViewerOperationEventArgs(4,null,null,null,h+1,!0),this._documentViewer.onOperation(n))}this._lazyLoad&&!this._tryUpdateViewImageTags()&&this._imageViewer.get_hasSize()&&(c=this._imageViewer.get_items().get_item(0),d=this._imageViewer.get_items().get_item(Math.min(this._workerCount,b)-1),null!=c&&null!=d&&
(null!=this._imageGroupLoader&&this._imageGroupLoader.get_isWorking()&&this._imageGroupLoader.setImageTags(c,d),null!=this._backImageGroupLoader&&this._backImageGroupLoader.get_isWorking()&&this._backImageGroupLoader.setImageTags(c,d)))}}},_imageLoader_Done:function(a){var b=a.get_tag();a.get_isHTMLImageElement()?b.set_image(a.get_element()):b.set_element(a.get_element());null!=b.get_imageViewer()&&(b=b.get_imageViewer().get_items().indexOf(b),this._documentViewer.onOperation(new lt.Documents.UI.DocumentViewerOperationEventArgs(4,
null,a.get_url(),null,b+1,!0)))},_backImageLoader_Done:function(a){var b=a.get_tag();null!=b.get_imageViewer()&&1!==a.get_width()&&1!==a.get_height()&&(b.set_backImage(a.get_element()),b=b.get_imageViewer().get_items().indexOf(b),this._documentViewer.onOperation(new lt.Documents.UI.DocumentViewerOperationEventArgs(4,null,a.get_url(),null,b+1,!0)))},_imageLoader_Fail:function(a){var b=a.get_tag();null!=b.get_imageViewer()&&(b=b.get_imageViewer().get_items().indexOf(b),this._documentViewer.onOperation(new lt.Documents.UI.DocumentViewerOperationEventArgs(4,
a.get_error(),a.get_url(),null,b+1,!0)))},_imageLoader_Always:function(a){a.remove_done(ss.Delegate.create(this,this._imageLoader_Done));a.remove_fail(ss.Delegate.create(this,this._imageLoader_Fail));a.remove_always(ss.Delegate.create(this,this._imageLoader_Always))},_backImageLoader_Always:function(a){a.remove_done(ss.Delegate.create(this,this._backImageLoader_Done));a.remove_fail(ss.Delegate.create(this,this._imageLoader_Fail));a.remove_always(ss.Delegate.create(this,this._backImageLoader_Always))},
_stopWorking:function(){if(this.get__useVirtualizer())this._destroyVirtualizer();else if(null!=this._imageGroupLoader&&(this._imageGroupLoader.remove_allDone(ss.Delegate.create(this,this._imageGroupLoader_AllDone)),this._imageGroupLoader.dispose(),this._imageGroupLoader=null,this._documentViewer.onOperation(new lt.Documents.UI.DocumentViewerOperationEventArgs(3,null,null,null,0,!0))),null!=this._backImageGroupLoader)this._backImageGroupLoader.remove_allDone(ss.Delegate.create(this,this._backImageGroupLoader_AllDone)),
this._backImageGroupLoader.dispose(),this._backImageGroupLoader=null},_zoomRatio:1.2,get_zoomRatio:function(){return this._zoomRatio},set_zoomRatio:function(a){if(lt.LeadDoubleTools.isZero(a)||0>a)throw new lt.ArgumentOutOfRangeException("ZoomRatio",a,"Must be a value greater than 0");return this._zoomRatio=a},get_itemType:function(){return this._itemType},get_preferredItemType:function(){return this._preferredItemType},set_preferredItemType:function(a){this._preferredItemType!==a&&(this._preferredItemType=
a,this._preferredItemTypeChanged());return a},_preferredItemTypeChanged:function(){if(this._documentViewer.get_hasDocument()){var a=this._documentViewer.get_document(),b=this.get_preferredItemType(),c=this.get_itemType(),d=c;switch(b){case 1:1!==c&&a.images.isSvgViewingPreferred&&(d=1);break;case 0:c&&(d=0)}d!==c&&(a=new lt.Documents.UI.DocumentViewerOperationEventArgs(7,null,d,null,0,!1),this._documentViewer.onOperation(a),a.get_abort()||(this._itemType=d,this._doStartWorking(!1),a=new lt.Documents.UI.DocumentViewerOperationEventArgs(7,
null,d,null,0,!0),this._documentViewer.onOperation(a)))}},runLinkTarget:function(a){lt.Controls.ControlsHelper.checkIfNull(a,"linkTarget");if(null!=this._imageViewer){var b,c=1;switch(a.pageFitType){case lt.Documents.DocumentPageFitType.fitWidth:b=lt.Controls.ControlSizeMode.fitWidth;break;case lt.Documents.DocumentPageFitType.fitHeight:b=lt.Controls.ControlSizeMode.fitHeight;break;case lt.Documents.DocumentPageFitType.fit:b=lt.Controls.ControlSizeMode.fit;break;case lt.Documents.DocumentPageFitType.fitAlways:b=
lt.Controls.ControlSizeMode.fitAlways;break;default:b=lt.Controls.ControlSizeMode.none,0<a.zoomPercent&&100>a.zoomPercent&&(c=a.zoomPercent/100)}b!==lt.Controls.ControlSizeMode.none&&this._imageViewer.zoom(b,c,this._imageViewer.get_defaultZoomOrigin())}},invalidate:function(a){null!=this._imageViewer&&this._imageViewer.invalidate(a)},_prepareToSave:function(){},_beginUpdate:function(){null!=this._imageViewer&&this._imageViewer.beginUpdate()},_endUpdate:function(){null!=this._imageViewer&&this._imageViewer.endUpdate()},
dispose:function(){this._destroy(!0)},_createControls:function(a,b){var c=a.get_viewCreateOptions();c.set_parentDiv(a.get_viewContainer());c.set_viewLayout(b);this._imageViewer=new lt.Controls.ImageViewer(c);this._imageViewer.add_imageLoading(ss.Delegate.create(this,this._imageViewer_ImageLoading));this.set_useSvgBackImage(!0);this._initControls()},_imageViewer_ImageLoading:function(a,b){b.get_imageLoader().set_urlMode(this._documentViewer.get__documentUseAjaxImageLoading()?lt.ImageLoaderUrlMode.ajaxDataUrl:
lt.ImageLoaderUrlMode.imageUrl)},_deleteControls:function(){if(null!=this._imageViewer){this._imageViewer.remove_imageLoading(ss.Delegate.create(this,this._imageViewer_ImageLoading));var a=this._imageViewer.get_mainDiv();null!=a&&(a.parentNode.removeChild(a),this._imageViewer.dispose(),this._imageViewer=null)}},get__useVirtualizer:function(){return!1},_reCreateVirtualizer:function(){},_destroyVirtualizer:function(){}};Object.defineProperty(lt.Documents.UI.DocumentViewerView.prototype,"documentViewer",
{get:lt.Documents.UI.DocumentViewerView.prototype.get_documentViewer,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerView.prototype,"imageViewer",{get:lt.Documents.UI.DocumentViewerView.prototype.get_imageViewer,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerView.prototype,"useSvgBackImage",{get:lt.Documents.UI.DocumentViewerView.prototype.get_useSvgBackImage,set:lt.Documents.UI.DocumentViewerView.prototype.set_useSvgBackImage,
enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerView.prototype,"workerCount",{get:lt.Documents.UI.DocumentViewerView.prototype.get_workerCount,set:lt.Documents.UI.DocumentViewerView.prototype.set_workerCount,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerView.prototype,"lazyLoad",{get:lt.Documents.UI.DocumentViewerView.prototype.get_lazyLoad,set:lt.Documents.UI.DocumentViewerView.prototype.set_lazyLoad,enumerable:!0,configurable:!0});
Object.defineProperty(lt.Documents.UI.DocumentViewerView.prototype,"zoomRatio",{get:lt.Documents.UI.DocumentViewerView.prototype.get_zoomRatio,set:lt.Documents.UI.DocumentViewerView.prototype.set_zoomRatio,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerView.prototype,"itemType",{get:lt.Documents.UI.DocumentViewerView.prototype.get_itemType,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerView.prototype,"preferredItemType",{get:lt.Documents.UI.DocumentViewerView.prototype.get_preferredItemType,
set:lt.Documents.UI.DocumentViewerView.prototype.set_preferredItemType,enumerable:!0,configurable:!0});lt.Documents.UI.PrintDocumentOptions=function(){this._pagesList=[];this._pageSize=lt.LeadSizeD.get_empty();this.orientation=0;this.showAnnotations=!0;this.removeMargins=!1;this.clientRenderSizePixels=2E3;this.title=null};lt.Documents.UI.PrintDocumentOptions.prototype={_pagesList:null,get_pagesList:function(){return this._pagesList},_pageSize:null,get_pageSize:function(){return this._pageSize},set_pageSize:function(a){if(a.get_isEmpty()||
0>=a.get_width()||0>=a.get_height())throw new lt.ArgumentException("Invalid Value","PageSize");return this._pageSize=a},orientation:0,showAnnotations:!1,removeMargins:!1,title:null,clientRenderSizePixels:0,clone:function(){for(var a=new lt.Documents.UI.PrintDocumentOptions,b=ss.IEnumerator.getEnumerator(this._pagesList);b.moveNext();)a._pagesList.add(b.current);a.set_pageSize(this._pageSize.clone());a.showAnnotations=this.showAnnotations;a.removeMargins=this.removeMargins;a.orientation=this.orientation;
a.title=this.title;a.clientRenderSizePixels=this.clientRenderSizePixels;return a}};Object.defineProperty(lt.Documents.UI.PrintDocumentOptions.prototype,"pagesList",{get:lt.Documents.UI.PrintDocumentOptions.prototype.get_pagesList,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.PrintDocumentOptions.prototype,"pageSize",{get:lt.Documents.UI.PrintDocumentOptions.prototype.get_pageSize,set:lt.Documents.UI.PrintDocumentOptions.prototype.set_pageSize,enumerable:!0,configurable:!0});
lt.Documents.UI.DocumentViewerPrintProgress=function(a,b){this._pagesTotal=a;this._pagesCompleted=b};lt.Documents.UI.DocumentViewerPrintProgress.prototype={_pagesTotal:0,get_pagesTotal:function(){return this._pagesTotal},_pagesCompleted:0,get_pagesCompleted:function(){return this._pagesCompleted}};Object.defineProperty(lt.Documents.UI.DocumentViewerPrintProgress.prototype,"pagesTotal",{get:lt.Documents.UI.DocumentViewerPrintProgress.prototype.get_pagesTotal,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI.DocumentViewerPrintProgress.prototype,
"pagesCompleted",{get:lt.Documents.UI.DocumentViewerPrintProgress.prototype.get_pagesCompleted,enumerable:!0,configurable:!0});lt.Documents.UI._documentContainer=function(){this._pages=[];this._containerDiv=document.createElement("div");this._containerDiv.className=lt.Documents.UI._documentViewerPrintHandler.clasS_ROOT};lt.Documents.UI._documentContainer.prototype={_containerDiv:null,get_containerDiv:function(){return this._containerDiv},_pages:null,get_pages:function(){return this._pages},appendPage:function(a){a.set_documentContainer(this);
this._pages.add(a);this._containerDiv.appendChild(a.get_container())},dispose:function(){null!=this._containerDiv&&(null!=this._containerDiv.parentNode&&this._containerDiv.parentNode.removeChild(this._containerDiv),this._containerDiv=null);if(null!=this._pages){for(var a=ss.IEnumerator.getEnumerator(this._pages);a.moveNext();){var b=a.current;null!=b&&b.dispose()}this._pages=null}}};lt.Documents.UI._pageContainer=function(a,b,c){this._annElement=this._pageElement=this._documentContainer=null;this._containerDiv=
document.createElement("div");this._containerDiv.className=lt.Documents.UI._documentViewerPrintHandler.clasS_PAGE;c&&(this._containerDiv.className+=" "+lt.Documents.UI._documentViewerPrintHandler.clasS_PAGE_LAST);c=a.get_isEmpty()||a.get_width()<a.get_height()?0:1;if(c=(b.get_isEmpty()||b.get_width()<b.get_height()?0:1)!==c){var d=b.get_width()/b.get_height();1!==d&&(b.get_width()>b.get_height()?(b.set_width(b.get_height()),b.set_height(b.get_width()/d)):(b.set_height(b.get_width()),b.set_width(b.get_height()*
d)))}this._containerDiv.style.width=b.get_width()+"px";this._containerDiv.style.height=b.get_height()+"px";c?(this._elWidthStyle="auto",this._elHeightStyle=b.get_width()+"px",this._annWidthStyle=b.get_height()+"px",this._annHeightStyle=this._elHeightStyle,this._rotatePosLeftStyle="-"+a.get_width()*(b.get_width()/a.get_height())+"px"):(this._elWidthStyle="100%",this._elHeightStyle="auto",this._annWidthStyle=b.get_width()+"px",this._annHeightStyle=b.get_height()+"px");this._rotate=c};lt.Documents.UI._pageContainer.prototype=
{_elWidthStyle:null,_elHeightStyle:null,_annWidthStyle:null,_annHeightStyle:null,_rotatePosLeftStyle:null,_rotate:!1,_documentContainer:null,get_documentContainer:function(){return this._documentContainer},set_documentContainer:function(a){return this._documentContainer=a},_containerDiv:null,get_container:function(){return this._containerDiv},_pageElement:null,get_pageElement:function(){return this._pageElement},set_pageElement:function(a){this._pageElement!==a&&(null!=this._pageElement?this._containerDiv.replaceChild(a,
this._pageElement):this._containerDiv.insertBefore(a,this._annElement),this._pageElement=a,null!=this._pageElement&&(this._pageElement.className=lt.Documents.UI._documentViewerPrintHandler.clasS_ELEMENT,this._rotate&&(this._pageElement.className+=" "+lt.Documents.UI._documentViewerPrintHandler.clasS_ROTATE),this._pageElement.style.position="absolute",this._pageElement.style.left=this._rotatePosLeftStyle,this._pageElement.style.width=this._elWidthStyle,this._pageElement.style.height=this._elHeightStyle));
return a},_annElement:null,get_annElement:function(){return this._annElement},set_annElement:function(a){this._annElement!==a&&(null!=this._annElement?this._containerDiv.replaceChild(a,this._annElement):this._containerDiv.appendChild(a),this._annElement=a,null!=this._annElement&&(this._annElement.className=lt.Documents.UI._documentViewerPrintHandler.clasS_ELEMENT,this._rotate&&(this._annElement.className+=" "+lt.Documents.UI._documentViewerPrintHandler.clasS_ROTATE),this._annElement.style.position=
"absolute",this._annElement.style.left=this._rotatePosLeftStyle,this._annElement.style.width=this._annWidthStyle,this._annElement.style.height=this._annHeightStyle));return a},dispose:function(){this._documentContainer=this._rotatePosLeftStyle=this._annHeightStyle=this._annWidthStyle=this._elHeightStyle=this._elWidthStyle=null;null!=this._annElement&&(null!=this._annElement.parentNode&&this._annElement.parentNode.removeChild(this._annElement),this._annElement=null);null!=this._pageElement&&(null!=
this._pageElement.parentNode&&this._pageElement.parentNode.removeChild(this._pageElement),this._pageElement instanceof HTMLImageElement&&lt.Documents.UI.BlobHelper.tryRevokeUrl(this._pageElement.src),this._pageElement=null);null!=this._containerDiv&&(null!=this._containerDiv.parentNode&&this._containerDiv.parentNode.removeChild(this._containerDiv),this._containerDiv=null)}};lt.Documents.UI._printIndexData=function(){};lt.Documents.UI._printIndexData.prototype={totalPrintPagesIndex:0,documentPageIndex:0};
lt.Documents.UI._documentViewerPrintHandler=function(a,b,c){this._destPageSize=lt.LeadSizeD.get_empty();this._pagesCompleted=this._pagesTotal=-1;if(!lt.Documents.UI._documentViewerPrintHandler.isIFrameElement(b)&&!lt.Documents.UI._documentViewerPrintHandler.isDivElement(b))throw Error("Cannot print without a div or iframe element");this._documentViewer=a;this._element=b;b.style.display="block";this._options=c.clone();this._documentContainer=new lt.Documents.UI._documentContainer};lt.Documents.UI._documentViewerPrintHandler._createClassText=
function(a,b){var c="",d;for(d in b)c+=String.format("   {0}: {1};\n",d,b[d]);return String.format("{0} {\n{1}}\n",a,c)};lt.Documents.UI._documentViewerPrintHandler._calcDestRect=function(a,b){var c=b.get_width(),d=b.get_height(),e=a.get_width()/b.get_width(),g=a.get_height()/b.get_height();if(b.get_width()>a.get_width()||b.get_height()>a.get_height())e=Math.min(e,g),c*=e,d*=e;return lt.LeadRectD.create(0,0,c,d)};lt.Documents.UI._documentViewerPrintHandler._exportAnnotationsAsSvg=function(a,b,c){if(null!=
b&&null!=b.get_children()&&0<b.get_children().get_count()){var d=b.get_mapper(),e=lt.Annotations.Core.AnnContainerMapper.createDefault(),g=e.sizeFromContainerCoordinates(b.get_size()),c=lt.Documents.UI._documentViewerPrintHandler._calcDestRect(c,g);e.updateDestinationRectangle(c,g);g=lt.LeadSizeD.create(c.get_right(),c.get_bottom());b.set_mapper(e);e=document.createElement("div");e.style.width=g.get_width()+"px";e.style.height=g.get_height()+"px";document.body.appendChild(e);a.attach(b,e);for(c=ss.IEnumerator.getEnumerator(b.get_children());c.moveNext();)g=
c.current,Object.keyExists(a.get_renderers(),g.get_id())&&(g.get_isSelected()&&g.set_isSelected(!1),a.get_renderers()[g.get_id()].initialize(a),a.get_renderers()[g.get_id()].addObject(g));a.render(lt.LeadRectD.get_empty(),!1);for(c=ss.IEnumerator.getEnumerator(b.get_children());c.moveNext();)g=c.current,Object.keyExists(a.get_renderers(),g.get_id())&&g.set_stateId(null);document.body.removeChild(e);b.set_mapper(d);e.id="";null!=e.firstChild&&e.firstChild.setAttribute("xmlns","http://www.w3.org/2000/svg");
return e}return null};lt.Documents.UI._documentViewerPrintHandler.isSupported=function(){return lt.LTHelper.browser!==lt.LTBrowser.internetExplorer&&lt.LTHelper.browser!==lt.LTBrowser.edge&&"undefined"===window.print?!1:!0};lt.Documents.UI._documentViewerPrintHandler.isIFrameElement=function(a){return null!=a&&a instanceof HTMLIFrameElement};lt.Documents.UI._documentViewerPrintHandler.isDivElement=function(a){return null!=a&&a instanceof HTMLDivElement};lt.Documents.UI._documentViewerPrintHandler._tryCopyImage=
function(a,b,c){if(null==a&&null==b&&null==c)return null;null==a&&null!=b&&(a=b,b=null);var d=null,e=null;if(null!=a)if(c=a.src,null!=b&&!String.isNullOrWhiteSpace(a.src)&&!a.src.trim().indexOf("data:image/png;base64,"))e=c;else{null==lt.Documents.UI._documentViewerPrintHandler._dataUrlCanvas&&(lt.Documents.UI._documentViewerPrintHandler._dataUrlCanvas=document.createElement("canvas"));var d=a.naturalWidth,c=a.naturalHeight,g=lt.Documents.UI._documentViewerPrintHandler._dataUrlCanvasWidth!==d||lt.Documents.UI._documentViewerPrintHandler._dataUrlCanvasHeight!==
c;g&&(lt.Documents.UI._documentViewerPrintHandler._dataUrlCanvasWidth=d,lt.Documents.UI._documentViewerPrintHandler._dataUrlCanvas.width=d,lt.Documents.UI._documentViewerPrintHandler._dataUrlCanvasHeight=c,lt.Documents.UI._documentViewerPrintHandler._dataUrlCanvas.height=c);var f=lt.Documents.UI._documentViewerPrintHandler._dataUrlCanvas.getContext("2d");try{g||f.clearRect(0,0,d,c),null!=b&&f.drawImage(b,0,0,d,c),f.drawImage(a,0,0,d,c)}catch(h){return null}d=lt.Documents.UI._documentViewerPrintHandler._dataUrlCanvas}else d=
c;if(null==e&&null==d)return null;if(null==e)try{e=lt.Documents.UI._documentViewerPrintHandler._dataUrlCanvas.toDataURL("image/png")}catch(i){return null}a=document.createElement("img");a.src=e;return a};lt.Documents.UI._documentViewerPrintHandler.prototype={_documentContainer:null,_printImageGroupLoader:null,_documentViewer:null,_element:null,_options:null,_title:null,_clientRenderSizePixels:0,_showAnnotations:!0,_pagesList:null,dispose:function(){this._isDisposed=!0;this._pagesTotal=this._pagesCompleted=
-1;this._needPDFRendering=this._needImagesLoad=!1;this._title=null;this._clientRenderSizePixels=0;this._cleanGroupLoader();null!=lt.Documents.UI._documentViewerPrintHandler._styleBasicElement&&null!=lt.Documents.UI._documentViewerPrintHandler._styleBasicElement.parentNode&&lt.Documents.UI._documentViewerPrintHandler._styleBasicElement.parentNode.removeChild(lt.Documents.UI._documentViewerPrintHandler._styleBasicElement);null!=lt.Documents.UI._documentViewerPrintHandler._stylePageElement&&null!=lt.Documents.UI._documentViewerPrintHandler._stylePageElement.parentNode&&
lt.Documents.UI._documentViewerPrintHandler._stylePageElement.parentNode.removeChild(lt.Documents.UI._documentViewerPrintHandler._stylePageElement);this._documentViewer=null;null!=this._element&&(this._element.style.display="",this._element=this._element.onload=null);this._options=null;this._showAnnotations=!0;this._destPageSize=lt.LeadSizeD.get_empty();null!=this._documentContainer&&(this._documentContainer.dispose(),this._documentContainer=null);this._pagesList=null},_needImagesLoad:!1,_needPDFRendering:!1,
_isDisposed:!1,print:function(){var a=this._documentViewer.get_document();if(null!=a&&a.pages.get_count()){this._destPageSize=lt.LeadSizeD.get_empty();var b=0;this._pagesList=null;this._showAnnotations=!0;this._title=null;this._clientRenderSizePixels=0;if(null!=this._options&&(this._destPageSize=this._options.get_pageSize(),b=this._options.orientation,this._showAnnotations=this._options.showAnnotations,this._pagesList=this._options.get_pagesList(),this._title=this._options.title,this._clientRenderSizePixels=
this._options.clientRenderSizePixels,null!=this._pagesList))for(var c=ss.IEnumerator.getEnumerator(this._pagesList);c.moveNext();){var d=c.current;if(1>d||d>a.pages.get_count())throw new lt.ArgumentOutOfRangeException("PrintDocumentOptions.pagesList",d,"Invalid page index");}this._destPageSize.get_isEmpty()&&(this._destPageSize=lt.LeadSizeD.create(6120,7920));this._destPageSize=lt.LeadSizeD.create(lt.Documents.Document.documentToPixels(96,this._destPageSize.get_width()),lt.Documents.Document.documentToPixels(96,
this._destPageSize.get_height()));1===b&&(this._destPageSize=lt.LeadSizeD.create(this._destPageSize.get_height(),this._destPageSize.get_width()));if(null==this._pagesList||!this._pagesList.length){this._pagesList=[];for(b=0;b<a.pages.get_count();b++)this._pagesList.add(b+1)}this._pagesTotal=this._pagesList.length;this._pagesCompleted=0;b=new lt.Documents.UI.DocumentViewerOperationEventArgs(23,null,new lt.Documents.UI.DocumentViewerPrintProgress(this._pagesTotal,this._pagesCompleted),null,0,!1);this._documentViewer.onOperation(b);
if(b.get_abort())this.dispose();else{for(var b=[],c=[],e=null!=this._documentViewer.get_view()?this._documentViewer.get_view().get_imageViewer().get_items():null,g=0;g<this._pagesList.length;g++){var d=this._pagesList[g]-1,f=a.pages.get_item(d),h=a.sizeToPixels(f.size),i=g===this._pagesList.length-1,h=new lt.Documents.UI._pageContainer(h,this._destPageSize.clone(),i),i=new lt.Documents.UI._printIndexData;i.totalPrintPagesIndex=g;i.documentPageIndex=d;if(f.isLocal){if(d=new lt.Documents.UI.DocumentViewerOperationEventArgs(23,
null,new lt.Documents.UI.DocumentViewerPrintProgress(this._pagesTotal,++this._pagesCompleted),null,d+1,!1),this._documentViewer.onOperation(d),d.get_abort()){this.dispose();return}}else if(this._documentViewer.get_isUsingPDFRendering()&&lt.Documents.UI._pdfRenderingHandler.isForPDF(f))b.add(i);else{f=null;null!=e&&(f=e.get_item(d));d=null;if(null!=f)var d=f.get_image(),j=f.get_backImage(),f=f.get_canvas(),d=lt.Documents.UI._documentViewerPrintHandler._tryCopyImage(d,j,f);null!=d?(h.set_pageElement(d),
this._pagesCompleted++):c.add(i)}this._documentContainer.appendPage(h)}this._needImagesLoad=0<c.length;this._needPDFRendering=0<b.length;!this._needImagesLoad&&!this._needPDFRendering?this._printReady():(this._needImagesLoad&&this._startImageLoading(c),!this._isDisposed&&this._needPDFRendering&&this._startPDFRendering(b))}}},_startImageLoading:function(a){var b=new lt.Documents.UI.DocumentViewerOperationEventArgs(3,null,null,null,0,!1);this._documentViewer.onOperation(b);if(b.get_abort())this.dispose();
else{this._printImageGroupLoader=new lt.ImageGroupLoader(a.length,this._documentContainer.get_containerDiv());this._printImageGroupLoader.set_maximumLoadersWorking(null!=this._documentViewer.get_view()?this._documentViewer.get_view().get_workerCount():4);this._printImageGroupLoader.set_lazyLoad(!1);this._printImageGroupLoader.add_allDone(ss.Delegate.create(this,this._allImagesLoaded));for(var c=null,d=null,e=null,c=ss.Delegate.create(this,function(a){if(!this._isDisposed){var b=a.get_tag();b.set_pageElement(a.get_element());
null!=b.get_documentContainer()&&(b=b.get_documentContainer().get_pages().indexOf(b),a=new lt.Documents.UI.DocumentViewerOperationEventArgs(4,null,a.get_url(),null,b+1,!0),this._documentViewer.onOperation(a),a=new lt.Documents.UI.DocumentViewerOperationEventArgs(23,null,new lt.Documents.UI.DocumentViewerPrintProgress(this._pagesTotal,++this._pagesCompleted),null,b+1,!1),this._documentViewer.onOperation(a),a.get_abort()&&this.dispose())}}),d=ss.Delegate.create(this,function(a){if(!this._isDisposed){var b=
a.get_tag(),b=b.get_documentContainer().get_pages().indexOf(b),a=new lt.Documents.UI.DocumentViewerOperationEventArgs(4,a.get_error(),a.get_url(),null,b+1,!0);this._documentViewer.onOperation(a);a.get_abort()&&this.dispose()}}),e=function(a){null!=a&&(a.remove_done(c),a.remove_fail(d),a.remove_always(e))},g=(b=this._documentViewer.get__documentUseAjaxImageLoading())?lt.ImageLoaderUrlMode.ajaxDataUrl:lt.ImageLoaderUrlMode.imageUrl,f=this._documentViewer.get_document(),h=0;h<a.length;h++){var i=a[h],
j=i.documentPageIndex,k=f.pages.get_item(j),i=this._documentContainer.get_pages()[i.totalPrintPagesIndex];if(null==k||null==i){if(j=new lt.Documents.UI.DocumentViewerOperationEventArgs(4,Error("Error loading image"),null,null,j+1,!0),this._documentViewer.onOperation(j),j.get_abort()){this.dispose();break}}else{var l=new lt.ImageLoader;l.set_urlMode(g);k=k.getImageElement(l);if(b&&"rejected"===k.state()){j=new lt.Documents.UI.DocumentViewerOperationEventArgs(4,Error("Error loading image"),null,null,
j+1,!0);this._documentViewer.onOperation(j);if(j.get_abort()){this.dispose();break}l=null}else l.add_done(c),l.add_fail(d),l.add_always(e),l.set_tag(i),this._printImageGroupLoader.load(l,i,h)}}}},_allImagesLoaded:function(){this._isDisposed||(this._needImagesLoad=!1,this._cleanGroupLoader(),this._needPDFRendering||this._printReady())},_startPDFRendering:function(a){if(!this._isDisposed){var b=this._documentViewer.get_document(),c=0;if(c<a.length){var d=a[c],e=d.documentPageIndex,g=b.pages.get_item(e),
f=this._documentContainer.get_pages()[d.totalPrintPagesIndex],h=document.createElement("canvas"),i=null,j=Math.max(this._destPageSize.get_width(),this._destPageSize.get_height()),k=b.sizeToPixels(g.size),l=k.get_width()/k.get_height();k.get_width()>k.get_height()?(k.set_width(j),k.set_height(j/l)):(k.set_height(j),k.set_width(j*l));var n=-1;this._clientRenderSizePixels&&(n=this._clientRenderSizePixels/Math.max(k.get_width(),k.get_height()));var m=ss.Delegate.create(this,function(a){if(!this._isDisposed){f.set_pageElement(a);
i()}}),o=ss.Delegate.create(this,function(){this._isDisposed||i()}),i=ss.Delegate.create(this,function(){var i=new lt.Documents.UI.DocumentViewerOperationEventArgs(23,null,new lt.Documents.UI.DocumentViewerPrintProgress(this._pagesTotal,++this._pagesCompleted),null,e+1,false);this._documentViewer.onOperation(i);if(i.get_abort())this.dispose();else{c++;if(c<a.length){d=a[c];e=d.documentPageIndex;g=b.pages.get_item(e);k=b.sizeToPixels(g.size);l=k.get_width()/k.get_height();if(k.get_width()>k.get_height()){k.set_width(j);
k.set_height(j/l)}else{k.set_height(j);k.set_width(j*l)}n=-1;this._clientRenderSizePixels&&(n=this._clientRenderSizePixels/Math.max(k.get_width(),k.get_height()));f=this._documentContainer.get_pages()[d.totalPrintPagesIndex];lt.Documents.UI._pdfRenderingHandler._renderPageAsImage(b,g,e,k,n,h,false,m,o)}else{h.width=0;h.height=0;this._needPDFRendering=false;this._needImagesLoad||this._printReady()}}});lt.Documents.UI._pdfRenderingHandler._renderPageAsImage(b,g,e,k,n,h,!1,m,o)}else this._needPDFRendering=
!1,this._needImagesLoad||this._printReady()}},_cleanGroupLoader:function(){null!=this._printImageGroupLoader&&(this._printImageGroupLoader.remove_allDone(ss.Delegate.create(this,this._allImagesLoaded)),this._printImageGroupLoader.get_isWorking()&&!this._printImageGroupLoader.get_isAborting()&&this._printImageGroupLoader.abort(!0),this._printImageGroupLoader.dispose(),this._printImageGroupLoader=null,this._documentViewer.onOperation(new lt.Documents.UI.DocumentViewerOperationEventArgs(3,null,null,
null,0,!0)))},_printReady:function(){if(this._showAnnotations){var a=this._documentViewer.get_annotations(),b=this._documentViewer.get_document(),c=null;null!=a&&(c=new lt.Annotations.Rendering.AnnSvgRenderingEngine,c.set_resources(a.get_automationManager().get_resources()));for(var d=0;d<this._pagesList.length;d++){var e=b.pages.get_item(this._pagesList[d]-1),g=this._documentContainer.get_pages()[d];if(!(null==e||null==g)&&null!=c)e=a.get_automation().get_containers().get_item(d),g.set_annElement(lt.Documents.UI._documentViewerPrintHandler._exportAnnotationsAsSvg(c,
e,this._destPageSize,this._documentViewer.get_annotations().get_automationManager().get_userMode()===lt.Annotations.Core.AnnUserMode.run))}}a=new lt.Documents.UI.DocumentViewerOperationEventArgs(23,null,new lt.Documents.UI.DocumentViewerPrintProgress(this._pagesTotal,this._pagesCompleted),null,0,!1);this._documentViewer.onOperation(a);a.get_abort()||this._callPrintDialog()},_callPrintDialog:function(){try{var a=lt.Documents.UI._documentViewerPrintHandler.isDivElement(this._element)?window:this._element.contentWindow,
b=null,b=ss.Delegate.create(this,function(){this.dispose();a.removeEventListener("onafterprint",b)});if("undefined"!==a.onbeforeprint&&"undefined"!==a.onafterprint)a.addEventListener("onafterprint",b);else if("undefined"!==a.matchMedia){var c=null,d=null,d=function(a){a.matches||(b(a),c.removeListener(d))},c=a.matchMedia("print");c.addListener(d)}var e=lt.Documents.UI._documentViewerPrintHandler.isDivElement(this._element),g=!e&&lt.LTHelper.browser===lt.LTBrowser.chrome,f=ss.Delegate.create(this,
function(){try{g&&(this._element.onload=null);null!=this._title&&(a.document.title=this._title);lt.LTHelper.browser===lt.LTBrowser.internetExplorer||lt.LTHelper.browser===lt.LTBrowser.edge?a.document.execCommand("print",!1,null):a.print();var b=new lt.Documents.UI.DocumentViewerOperationEventArgs(23,null,null,null,0,!0);this._documentViewer.onOperation(b)}catch(d){b=new lt.Documents.UI.DocumentViewerOperationEventArgs(23,d,null,null,0,!0),this._documentViewer.onOperation(b)}});if(e){var h=document.getElementsByTagName("head");
null!=h&&0<h.length&&(h[0].appendChild(lt.Documents.UI._documentViewerPrintHandler._styleBasicElement),null!=this._options&&this._options.removeMargins&&h[0].appendChild(lt.Documents.UI._documentViewerPrintHandler._stylePageElement));this._element.appendChild(this._documentContainer.get_containerDiv());setTimeout(function(){f(null)},500)}else g&&(this._element.onload=f),setTimeout(ss.Delegate.create(this,function(){a.document.open();a.document.write(String.format("<html dir='ltr' mozdisallowselectionprint='' moznomarginboxes=''><head><style>{0}</style></head><body></body></html>",
lt.Documents.UI._documentViewerPrintHandler._styleBasicElement.innerHTML+(this._options!=null&&this._options.removeMargins?lt.Documents.UI._documentViewerPrintHandler._stylePageElement.innerHTML:"")));a.document.body.appendChild(this._documentContainer.get_containerDiv());a.document.close();g||f(null)}),500)}catch(i){e=new lt.Documents.UI.DocumentViewerOperationEventArgs(23,i,null,null,0,!0),this._documentViewer.onOperation(e),e.get_abort()&&this.dispose()}}};lt.Documents.UI.DocumentViewerFactory=
function(){};lt.Documents.UI.DocumentViewerFactory.createDocumentViewer=function(a){return new lt.Documents.UI.DocumentViewer(a)};lt.Documents.UI._documentViewerHelper=function(){};lt.Documents.UI._documentViewerHelper.setItemImage=function(a,b,c){a.set_url(Type.safeCast(b,String));a.set_backImageUrl(Type.safeCast(c,String))};lt.Documents.UI._documentViewerHelper.getDocumentCharacterCodeAsString=function(a){return a.code};lt.Documents.UI._documentViewerHelper.parseInt=function(a){return parseInt(a)};
lt.Documents.UI._documentViewerHelper.getCursor=function(a){switch(a){case 1:return"pointer";case 2:return"crosshair";case 3:return"zoom-in";case 4:return"text";case 5:return"default";default:return"auto"}};lt.Documents.UI._documentViewerHelper.flatSvg=function(){};lt.Documents.UI._documentViewerHelper.getAsList=function(a){if(null==a)return null;for(var b=[],a=ss.IEnumerator.getEnumerator(a);a.moveNext();)b.add(a.current);return b};lt.Documents.UI._invoker=function(){};lt.Documents.UI._invoker.beginInvoke0=
function(a,b){b()};lt.Documents.UI._invoker.beginInvoke1=function(a,b,c){b(c)};lt.Documents.UI._invoker.beginInvoke2=function(a,b,c,d){b(c,d)};lt.Documents.UI._pdfUtils=function(){};lt.Documents.UI._pdfUtils.getDeviceScaling=function(a){return(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1)};lt.Documents.UI._pdfUtils._internalDisposeCanvasElement=function(a){null!=a&&(null!=
a.parentNode&&a.parentNode.removeChild(a),a.width=0,a.height=0)};lt.Documents.UI._pdfUtils.disposeCanvasElement=function(a,b){b&&lt.LTHelper.browser===lt.LTBrowser.firefox?setTimeout(function(){lt.Documents.UI._pdfUtils._internalDisposeCanvasElement(a)},1E3):lt.Documents.UI._pdfUtils._internalDisposeCanvasElement(a)};lt.Documents.UI._pdfUtils.disposeImageElement=function(a){null!=a&&(null!=a.parentNode&&a.parentNode.removeChild(a),a.src=lt.Documents.UI._pdfUtils._smallestPossibleImageSrc)};lt.Documents.UI._pdfUtils.removeTransitions=
function(a){null!=a&&(void 0!=a.style.transition?a.style.transition="none":void 0!=a.style.webkitTransition?a.style.webkitTransition="none":void 0!=a.style.msTransition&&(a.style.msTransition="none"))};lt.Documents.UI._pdfProxyCacheDocumentItem=function(){this.successCallbacks=[];this.failCallbacks=[];this.pages={}};lt.Documents.UI._pdfProxyCacheDocumentItem.prototype={documentProxy:null,pagesCount:0};lt.Documents.UI._pdfProxyCachePageItem=function(){this.successCallbacks=[];this.failCallbacks=[]};
lt.Documents.UI._pdfProxyCachePageItem.prototype={pageProxy:null,count:0,isInRemovalQueue:!1};lt.Documents.UI._pdfProxyCacheRemovalItem=function(){};lt.Documents.UI._pdfProxyCacheRemovalItem.prototype={documentId:null,pageNumber:0};lt.Documents.UI._pdfProxyCache=function(){};lt.Documents.UI._pdfProxyCache.loadPage=function(a,b,c,d,e){if(null==a)d("Document does not exist",b);else{var g=a.documentId;if(String.isNullOrWhiteSpace(g))d("Document does not exist in cache",b);else{var f=lt.Documents.UI._pdfProxyCache._proxyItems[g];
null!=f&&null!=f.documentProxy?(f.successCallbacks.clear(),f.failCallbacks.clear(),lt.Documents.UI._pdfProxyCache._loadPageFromLoadedDocument(a,b,c,d)):lt.Documents.UI._pdfProxyCache._loadDocumentAsync(a,function(){null==a||null==lt.Documents.UI._pdfProxyCache._proxyItems[g]||lt.Documents.UI._pdfProxyCache._loadPageFromLoadedDocument(a,b,c,d)},e)}}};lt.Documents.UI._pdfProxyCache._loadPageFromLoadedDocument=function(a,b,c,d){var e=a.documentId,a=lt.Documents.UI._pdfProxyCache._proxyItems[e],g=a.pages[b];
null!=g&&null!=g.pageProxy?(g.count++,setTimeout(function(){c(g.pageProxy)},10)):null!=g?(g.successCallbacks.add(c),g.failCallbacks.add(d)):(g=new lt.Documents.UI._pdfProxyCachePageItem,g.successCallbacks.add(c),g.failCallbacks.add(d),a.pagesCount++,a.pages[b]=g,lt.Documents.UI._pdfProxyCache._processRemovalQueue(),a.documentProxy.getPage(b).then(function(a){var d=lt.Documents.UI._pdfProxyCache._proxyItems[e];if(null==d)return a.cleanup(),null;d=d.pages[b];if(null==d)return a.cleanup(),null;d.pageProxy=
a;d.count+=d.successCallbacks.length;for(var c=ss.IEnumerator.getEnumerator(d.successCallbacks);c.moveNext();){var g=c.current;g(a)||d.count--}d.successCallbacks.clear();d.failCallbacks.clear();lt.Documents.UI._pdfProxyCache._tryAddToRemovalQueue(d,e,b);return null},function(a){var d=lt.Documents.UI._pdfProxyCache._proxyItems[e];if(null!=d){var c=d.pages[b];if(null!=c){for(var g=ss.IEnumerator.getEnumerator(c.failCallbacks);g.moveNext();){var k=g.current;k(a,b)}c.successCallbacks.clear();c.successCallbacks=
null;c.failCallbacks.clear();c.failCallbacks=null;d.pagesCount--;d.pages[b]=null}}}))};lt.Documents.UI._pdfProxyCache.getDocumentIfExists=function(a){if(null==a||String.isNullOrWhiteSpace(a.documentId))return null;a=lt.Documents.UI._pdfProxyCache._proxyItems[a.documentId];return null!=a&&null!=a.documentProxy?a.documentProxy:null};lt.Documents.UI._pdfProxyCache._loadDocumentAsync=function(a,b,c){var d=a.documentId,e=lt.Documents.UI._pdfProxyCache._proxyItems[d];null!=e?(e.successCallbacks.add(b),
e.failCallbacks.add(c)):(e=new lt.Documents.UI._pdfProxyCacheDocumentItem,e.successCallbacks.add(b),e.failCallbacks.add(c),lt.Documents.UI._pdfProxyCache._proxyItems[d]=e,PDFJS.getDocument({url:a.cacheUri,password:a.password}).then(function(a){var b=lt.Documents.UI._pdfProxyCache._proxyItems[d];if(null==b)return a.destroy(),null;b.documentProxy=a;for(a=ss.IEnumerator.getEnumerator(b.successCallbacks);a.moveNext();){var c=a.current;c()}b.successCallbacks.clear();b.failCallbacks.clear();return null},
function(a){var b=lt.Documents.UI._pdfProxyCache._proxyItems[d];if(null!=b){for(var c=ss.IEnumerator.getEnumerator(b.failCallbacks);c.moveNext();){var e=c.current;e(a,-1)}b.successCallbacks.clear();b.successCallbacks=null;b.failCallbacks.clear();b.failCallbacks=null;lt.Documents.UI._pdfProxyCache._proxyItems[d]=null}}))};lt.Documents.UI._pdfProxyCache.releasePage=function(a,b){if(!String.isNullOrWhiteSpace(a)){var c=lt.Documents.UI._pdfProxyCache._proxyItems[a];null!=c&&(c=c.pages[b],null!=c&&(c.count--,
lt.Documents.UI._pdfProxyCache._tryAddToRemovalQueue(c,a,b)))}};lt.Documents.UI._pdfProxyCache._tryAddToRemovalQueue=function(a,b,c){if(!a.count&&!a.isInRemovalQueue){var d=new lt.Documents.UI._pdfProxyCacheRemovalItem;d.documentId=b;d.pageNumber=c;lt.Documents.UI._pdfProxyCache._removalQueue.add(d);a.isInRemovalQueue=!0}};lt.Documents.UI._pdfProxyCache._processRemovalQueue=function(){if(lt.Documents.UI._pdfProxyCache._removalQueue.length){for(var a=[],b=0,c=-1,d=-1,e=lt.Documents.UI._pdfProxyCache._removalQueue.length-
1;0<=e;e--){var g=lt.Documents.UI._pdfProxyCache._removalQueue[e],f=lt.Documents.UI._pdfProxyCache._proxyItems[g.documentId];if(null==f)lt.Documents.UI._pdfProxyCache._removalQueue[e]=null;else{var h=f.pages[g.pageNumber];null==h?lt.Documents.UI._pdfProxyCache._removalQueue[e]=null:h.count?(h.isInRemovalQueue=!1,lt.Documents.UI._pdfProxyCache._removalQueue[e]=null):b<lt.Documents.UI._pdfProxyCache.removalQueueLimit?(b++,-1===d?d=e:c=e):(null!=h.pageProxy&&(h.pageProxy.cleanup(),h.pageProxy=null),
h.successCallbacks.clear(),h.successCallbacks=null,h.failCallbacks.clear(),h.failCallbacks=null,f.pagesCount--,f.pages[g.pageNumber]=null,f.pagesCount||(null!=f.documentProxy&&(f.documentProxy.destroy(),f.documentProxy=null),f.successCallbacks.clear(),f.successCallbacks=null,f.failCallbacks.clear(),f.failCallbacks=null,lt.Documents.UI._pdfProxyCache._proxyItems[g.documentId]=null),lt.Documents.UI._pdfProxyCache._removalQueue[e]=null)}}if(-1===c)-1!==d&&a.add(lt.Documents.UI._pdfProxyCache._removalQueue[d]);
else for(e=c;e<=d;e++)g=lt.Documents.UI._pdfProxyCache._removalQueue[e],null!=g&&a.add(g);lt.Documents.UI._pdfProxyCache._removalQueue=a}};lt.Documents.UI._pdfPageData=function(){};lt.Documents.UI._pdfPageData.prototype={isForPDF:!1,pageProxy:null,cachePDFDocumentId:null,cachePDFOriginalPageNumber:0,pendingPageLoad:!1,viewData:null,thumbData:null,dispose:function(){this.cachePDFDocumentId=this.pageProxy=null;this.cachePDFOriginalPageNumber=0;null!=this.viewData&&(this.viewData.clean(!0),this.viewData=
null);null!=this.thumbData&&(this.thumbData.clean(!0),this.thumbData=null)}};lt.Documents.UI._pdfRenderingHandler=function(a,b,c,d){this.pageData=[];this._document=a;this._documentViewerOnError=d;this._documentOnError=ss.Delegate.create(this,function(a,b){this._documentViewerOnError(0,Error(String.format("PDF Rendering Document Error: '{0}'",a)),b)});this._viewPageOnError=ss.Delegate.create(this,function(a,b){this._documentViewerOnError(4,Error(String.format("PDF Rendering Page Error: '{0}'",a)),
b)});this._thumbnailPageOnError=ss.Delegate.create(this,function(a,b){this._documentViewerOnError(2,Error(String.format("PDF Rendering Thumbnail Error: '{0}'",a)),b)});this.addPages(lt.Documents.UI._documentViewerHelper.getAsList(a.pages),0);null!=b&&(this._view=new lt.Documents.UI._pdfViewImageViewer(this,b));null!=c&&(this._thumbs=new lt.Documents.UI._pdfThumbnailsImageViewer(this,c))};lt.Documents.UI._pdfRenderingHandler.getPageInPDF=function(a,b,c){a=b.pages.getTargetPageNumber(a,c);if(!a)throw new lt.InvalidOperationException("Page does not exist in holding document");
b=b.pages.get_item(a-1);if(null==b)throw new lt.InvalidOperationException("Page does not exist in owner document");return b.originalPageNumber};lt.Documents.UI._pdfRenderingHandler.isForPDF=function(a){return null!=a.document&&!a.isLocal&&"application/pdf"===a.document.mimeType&&!String.isNullOrEmpty(a.document.cacheUri)};lt.Documents.UI._pdfRenderingHandler._renderPageAsImage=function(a,b,c,d,e,g,f,h,i){null==b||null==b.document||!lt.Documents.UI._pdfRenderingHandler.isForPDF(b)?i():lt.Documents.UI._pdfProxyCache.loadPage(b.document,
lt.Documents.UI._pdfRenderingHandler.getPageInPDF(a,b.document,c+1),function(j){if(null==b||null==b.document)return!1;lt.Documents.UI._pdfRenderingHandler._renderLoadedPageAsImage(a,b,c,j,d,e,g,f,h,i);return!0},function(){i()},function(){i()})};lt.Documents.UI._pdfRenderingHandler._renderLoadedPageAsImage=function(a,b,c,d,e,g,f,h,i,j){var k=f.getContext("2d");k._transformMatrix&&(k._transformMatrix=[1,0,0,1,0,0]);var l=e.get_width(),e=e.get_height(),n=Math.max(l,e)/Math.max(d.view[2]-d.view[0],d.view[3]-
d.view[1]),n=d.getViewport(n);0>g&&(g=lt.Documents.UI._pdfUtils.getDeviceScaling(k));f.width=parseInt(l*g);f.height=parseInt(e*g);var m=b.document.documentId,o=lt.Documents.UI._pdfRenderingHandler.getPageInPDF(a,b.document,c+1);d.render({canvasContext:k,transform:1===g?null:[g,0,0,g,0,0],viewport:n}).then(function(){lt.Documents.UI._pdfProxyCache.releasePage(m,o);if(b==null){j();return null}if(lt.Documents.UI.BlobHelper.supportsToBlob)lt.Documents.UI.BlobHelper.createImageFromBlob(f,i,h);else{var a=
document.createElement("img");a.src=f.toDataURL("image/png");i(a)}return null},function(){lt.Documents.UI._pdfProxyCache.releasePage(m,o);j()})};lt.Documents.UI._pdfRenderingHandler.prototype={_document:null,_isDisposed:!1,_view:null,_thumbs:null,_documentViewerOnError:null,_documentOnError:null,_viewPageOnError:null,_thumbnailPageOnError:null,addPages:function(a,b){if(a.length){for(var c=0;c<a.length;c++){var d=new lt.Documents.UI._pdfPageData;d.isForPDF=lt.Documents.UI._pdfRenderingHandler.isForPDF(a[c]);
if(d.isForPDF){var e=a[c];d.viewData=new lt.Documents.UI._pdfPageViewData;d.thumbData=new lt.Documents.UI._pdfPageThumbData;d.cachePDFDocumentId=e.document.documentId;d.cachePDFOriginalPageNumber=lt.Documents.UI._pdfRenderingHandler.getPageInPDF(this._document,e.document,b+c+1)}this.pageData.insert(b+c,d)}null!=this._view&&null!=this._view.imageViewer&&this._view.imageViewer.invalidate(lt.LeadRectD.get_empty());null!=this._thumbs&&null!=this._thumbs.imageViewer&&this._thumbs.imageViewer.invalidate(lt.LeadRectD.get_empty())}},
removePages:function(a,b){for(var c=0;c<a.length;c++){var d=b+c,e=this.pageData[d];null!=e&&(e.isForPDF&&(null!=e.pageProxy&&lt.Documents.UI._pdfProxyCache.releasePage(e.cachePDFDocumentId,e.cachePDFOriginalPageNumber),this._disposeItemElement(d)),e.dispose(),this.pageData.removeAt(b))}},getPDFDocument:function(a){return lt.Documents.UI._pdfProxyCache.getDocumentIfExists(a)},dispose:function(){if(!this._isDisposed){this._isDisposed=!0;null!=this._view&&(this._view.dispose(),this._view=null);null!=
this._thumbs&&(this._thumbs.dispose(),this._thumbs=null);if(null!=this.pageData&&null!=this._document)for(var a=0;a<this.pageData.length;a++){var b=this.pageData[a];null!=b&&(b.isForPDF&&(null!=b.pageProxy&&lt.Documents.UI._pdfProxyCache.releasePage(b.cachePDFDocumentId,b.cachePDFOriginalPageNumber),this._disposeItemElement(a)),b.dispose(),this.pageData[a]=null)}this.pageData=this._document=null}},_disposeItemElement:function(a){if(null!=this._view&&null!=this._view.imageViewer){var b=this._view.imageViewer.get_items().get_item(a);
null!=b&&b.deleteImage()}null!=this._thumbs&&null!=this._thumbs.imageViewer&&(b=this._thumbs.imageViewer.get_items().get_item(a),null!=b&&b.deleteImage())},_loadPageForViewer:function(a,b){var c=this._document.pages.get_item(a-1),d=this.pageData[a-1];if(!(null==d||null==c||!d.isForPDF)){var e=Type.canCast(b,lt.Documents.UI._pdfViewImageViewer)?this._viewPageOnError:this._thumbnailPageOnError;lt.Documents.UI._pdfProxyCache.loadPage(c.document,lt.Documents.UI._pdfRenderingHandler.getPageInPDF(this._document,
c.document,a),ss.Delegate.create(this,function(b){if(this._isDisposed)return!1;d.pendingPageLoad=!1;d.pageProxy=b;null!=this._view&&d.viewData.needsRenderAfterAsync&&(d.viewData.needsRenderAfterAsync=!1,this._view.imageViewer.invalidateItemByIndex(a-1));null!=this._thumbs&&d.thumbData.needsRenderAfterAsync&&(d.thumbData.needsRenderAfterAsync=!1,this._thumbs.imageViewer.invalidateItemByIndex(a-1));return!0}),e,this._documentOnError)}}};lt.Documents.UI._pdfPageBaseData=function(){this.pendingRenderMaxSide=
this.pendingRenderTimeoutId=-1};lt.Documents.UI._pdfPageBaseData.prototype={task:null,needsRenderAfterAsync:!1,pendingRenderItem:null,pendingCancelComplete:!1,isItemRemoved:!0,drawCanvas:null,_innerClean:function(){null!=this.task&&(this.task.cancel(),this.task=null);-1!==this.pendingRenderTimeoutId&&(clearTimeout(this.pendingRenderTimeoutId),this.pendingRenderTimeoutId=-1);this.pendingRenderMaxSide=-1;this.pendingRenderItem=null;lt.Documents.UI._pdfUtils.disposeCanvasElement(this.drawCanvas,!1);
this.drawCanvas=null}};lt.Documents.UI._pdfPageViewData=function(){lt.Documents.UI._pdfPageViewData.initializeBase(this)};lt.Documents.UI._pdfPageViewData.prototype={potentialCacheItem:null,renderCache:null,pdfBackTile:null,pdfBackTileLoading:!1,isElementCanvasVisible:!1,clean:function(a){this._innerClean(a);null!=this.renderCache&&(this.renderCache.dispose(),this.renderCache=null);this.potentialCacheItem=null;this.disposePDFBackTile();this.pdfBackTileLoading=!1},disposePDFBackTile:function(){null!=
this.pdfBackTile&&(this.pdfBackTile.dispose(!1),this.pdfBackTile=null)}};lt.Documents.UI._pdfPageThumbData=function(){lt.Documents.UI._pdfPageThumbData.initializeBase(this)};lt.Documents.UI._pdfPageThumbData.prototype={isComplete:!1,clean:function(a){this._innerClean(a);this.isComplete=!1}};lt.Documents.UI._pdfBaseImageViewer=function(a,b){this._saveInterpolationMode=lt.Controls.InterpolationMode.none;this.renderPageTimeout=lt.LTHelper.device===lt.LTDevice.desktop?25:75;this._handler=a;this.imageViewer=
b;this._saveOwnerDraw=b.get_ownerDraw();this._saveEnableRequestAnimationFrame=b.get_enableRequestAnimationFrame();this._saveInterpolationMode=b.get_interpolationMode();b.set_ownerDraw(!0);b.set_enableRequestAnimationFrame(!1);b.set_interpolationMode(lt.Controls.InterpolationMode.none);b.add_postRenderItem(ss.Delegate.create(this,this._imageViewer_PostRenderItem));b.add_autoItemElementsAdded(ss.Delegate.create(this,this._imageViewer_ItemAdded));b.add_autoItemElementsRemoved(ss.Delegate.create(this,
this._imageViewer_ItemRemoved))};lt.Documents.UI._pdfBaseImageViewer.prototype={renderPageTimeout:100,_handler:null,imageViewer:null,_saveOwnerDraw:!1,_saveEnableRequestAnimationFrame:!1,_isDisposed:!1,_postRenderRecursiveBlock:!1,dispose:function(){this._isDisposed||(this._isDisposed=!0,this.imageViewer.set_ownerDraw(this._saveOwnerDraw),this.imageViewer.set_enableRequestAnimationFrame(this._saveEnableRequestAnimationFrame),this.imageViewer.set_interpolationMode(this._saveInterpolationMode),this.imageViewer.remove_postRenderItem(ss.Delegate.create(this,
this._imageViewer_PostRenderItem)),this.imageViewer.remove_autoItemElementsAdded(ss.Delegate.create(this,this._imageViewer_ItemAdded)),this.imageViewer.remove_autoItemElementsRemoved(ss.Delegate.create(this,this._imageViewer_ItemRemoved)),this._handler=this.imageViewer=null)},_imageViewer_ItemAdded:function(a,b){if(!(this._isDisposed||null==this._handler)){var c=this._handler.pageData[b.get_item().get_leadIndex()];null!=c&&c.isForPDF&&(this.getSpecificData(c).isItemRemoved=!1)}},_imageViewer_ItemRemoved:function(a,
b){if(!(this._isDisposed||null==this._handler)){var c=b.get_item(),d=this._handler.pageData[c.get_leadIndex()];if(null!=d&&d.isForPDF){var e=this.getSpecificData(d);null==e||e.isItemRemoved||(e.clean(!1),e.isItemRemoved=!0,d.viewData.isItemRemoved&&d.thumbData.isItemRemoved&&null!=d.pageProxy&&(c.get_leadIndex(),lt.Documents.UI._pdfProxyCache.releasePage(d.cachePDFDocumentId,d.cachePDFOriginalPageNumber),d.pageProxy=null))}}},_imageViewer_PostRenderItem:function(a,b){if(!(this._isDisposed||null==
this._handler)){var c=b.get_item();if(null!=c){var d=this._handler.pageData[c.get_leadIndex()];if(null!=d&&d.isForPDF){var e=this.getSpecificData(d);null==e||this._postRenderRecursiveBlock||(this._postRenderRecursiveBlock=!0,e.isItemRemoved&&c.get_imageViewer().isItemVisible(c,lt.Controls.ImageViewerItemPart.item)&&(e.isItemRemoved=!1),d.pendingPageLoad?e.needsRenderAfterAsync=!0:null==d.pageProxy?(e.needsRenderAfterAsync=!0,d.pendingPageLoad=!0,this._handler._loadPageForViewer(c.get_leadIndex()+
1,this)):!e.isItemRemoved&&!e.pendingCancelComplete&&(this.createItemElements(c,d),this.renderItem(c,d)),this._postRenderRecursiveBlock=!1)}}}}};lt.Documents.UI._pdfViewImageViewer=function(a,b){lt.Documents.UI._pdfViewImageViewer.initializeBase(this,[a,b]);this._minDrawCanvasSize$1=lt.LTHelper.device===lt.LTDevice.desktop?1E3:500;this._maxBackCanvasSize$1=lt.LTHelper.device===lt.LTDevice.desktop?1500:700};lt.Documents.UI._pdfViewImageViewer._hideElementCanvas=function(a){a.isElementCanvasVisible&&
(a.isElementCanvasVisible=!1,a=a.drawCanvas,a.style.visibility="hidden",a.style.left="0",a.style.top="0",a.width=0,a.height=0,String.isNullOrWhiteSpace(a.style.width)||(a.style.width="0"),String.isNullOrWhiteSpace(a.style.height)||(a.style.height="0"),lt.Documents.UI._pdfUtils.removeTransitions(a))};lt.Documents.UI._pdfViewImageViewer.createRenderCanvas=function(a){var b=document.createElement("canvas");b.style.position="absolute";b.style.visibility="hidden";b.style.left="0";b.style.top="0";lt.Documents.UI._pdfUtils.removeTransitions(b);
a.isElementCanvasVisible=!0;a.drawCanvas=b};lt.Documents.UI._pdfViewImageViewer._flipWidthAndHeight$1=function(a){if(!a.get_isEmpty()){var b=a.get_width();a.set_width(a.get_height());a.set_height(b)}};lt.Documents.UI._pdfViewImageViewer._adjustSize$1=function(a,b,c){var a=lt.LeadRectD.create(0,0,a.get_width(),a.get_height()),d=Math.min(a.get_width(),c)-b.get_width(),c=Math.min(a.get_height(),c)-b.get_height();if(0<d){var e=Math.abs(b.get_left()-a.get_left());e&&(b.get_right()!==a.get_right()?b.set_x(b.get_x()-
Math.min(e,d/2)):b.set_x(b.get_x()-d));b.set_width(b.get_width()+d)}0<c&&((d=Math.abs(b.get_top()-a.get_top()))&&(b.get_bottom()!==a.get_bottom()?b.set_y(b.get_y()-Math.min(d,c/2)):b.set_y(b.get_y()-c)),b.set_height(b.get_height()+c))};lt.Documents.UI._pdfViewImageViewer._correctRotation$1=function(a,b,c,d,e){for(a=parseInt(a.get_rotateAngle());360<=a;)a-=360;for(;0>a;)a+=360;a?90===a?(lt.Documents.UI._pdfViewImageViewer._flipWidthAndHeight$1(e),e.set_x(Math.abs(Math.min(0,c.get_top()-d.get_top()))),
e.set_y(Math.abs(Math.max(0,c.get_right()-d.get_right()))),lt.Documents.UI._pdfViewImageViewer._flipWidthAndHeight$1(c)):180===a?(e.set_x(Math.abs(Math.max(0,c.get_right()-d.get_right()))),e.set_y(Math.abs(Math.max(0,c.get_bottom()-d.get_bottom())))):270===a&&(lt.Documents.UI._pdfViewImageViewer._flipWidthAndHeight$1(e),e.set_x(Math.abs(Math.max(0,c.get_bottom()-d.get_bottom()))),e.set_y(Math.abs(Math.min(0,c.get_left()-d.get_left()))),lt.Documents.UI._pdfViewImageViewer._flipWidthAndHeight$1(c)):
(e.set_x(Math.abs(Math.min(0,c.get_left()-d.get_left()))),e.set_y(Math.abs(Math.min(0,c.get_top()-d.get_top()))))};lt.Documents.UI._pdfViewImageViewer.prototype={_minDrawCanvasSize$1:0,_maxBackCanvasSize$1:0,_maxBackCanvasQuality$1:0.8,getSpecificData:function(a){return a.viewData},renderItem:function(a,b){var c=b.viewData,d=this.imageViewer.getItemViewBounds(a,lt.Controls.ImageViewerItemPart.image,!1);d.get_width();d.get_height();var e=this.imageViewer.get_controlSize(),g=lt.LeadRectD.create(0,0,
e.get_width(),e.get_height()),e=lt.LeadRectD.intersectRects(d,g);if(!e.get_isEmpty()){lt.Documents.UI._pdfViewImageViewer._correctRotation$1(a,c,d,g,e);lt.Documents.UI._pdfViewImageViewer._adjustSize$1(d,e,this._minDrawCanvasSize$1);var f=lt.LeadRectD.create(100*(e.get_x()/d.get_width()),100*(e.get_y()/d.get_height()),100*(parseInt(e.get_width())/d.get_width()),100*(parseInt(e.get_height())/d.get_height())),g=new lt.Documents.UI._renderCacheItem;g.imageBoundsArea=parseInt(d.get_width()*d.get_height());
g.intersection=e;g.percentIntersection=f;g.isFullCoverageSize=e.get_width()===d.get_width()&&e.get_height()===d.get_height();e=c.renderCache.checkCoverage(g,c.potentialCacheItem);g.isFullCoverageSize=g.intersection.get_width()===d.get_width()&&g.intersection.get_height()===d.get_height();e?null!=c.task?(c.task.cancel(),c.pendingCancelComplete=!0,c.task=null,lt.Documents.UI._pdfViewImageViewer._hideElementCanvas(c),g=c.potentialCacheItem=null):(c.potentialCacheItem=g,this._createBackImage$1(a,b,c,
d),c.pendingRenderItem=a,c.pendingRenderMaxSide=Math.max(d.get_width(),d.get_height()),-1===c.pendingRenderTimeoutId&&(c.pendingRenderTimeoutId=setTimeout(ss.Delegate.create(this,function(){c.pendingRenderTimeoutId=-1;this._renderPDFPage$1(b,c)}),this.renderPageTimeout))):(null==c.task&&lt.Documents.UI._pdfViewImageViewer._hideElementCanvas(c),g=null)}},_renderPDFPage$1:function(a,b){if(!this._isDisposed&&!(null==b||b.isItemRemoved||b.pendingCancelComplete||null==b.pendingRenderItem)){var c=b.pendingRenderMaxSide;
b.pendingRenderMaxSide=-1;var d=b.pendingRenderItem;b.pendingRenderItem=null;var e=b.drawCanvas.getContext("2d");e._transformMatrix&&(e._transformMatrix=[1,0,0,1,0,0]);var g=a.pageProxy,c=c/Math.max(g.view[2]-g.view[0],g.view[3]-g.view[1]),c=g.getViewport(c);c.transform[4]-=b.potentialCacheItem.intersection.get_x();c.transform[5]-=b.potentialCacheItem.intersection.get_y();b.drawCanvas.style.left=b.potentialCacheItem.intersection.get_x().toString()+"px";b.drawCanvas.style.top=b.potentialCacheItem.intersection.get_y().toString()+
"px";var f=lt.Documents.UI._pdfUtils.getDeviceScaling(e),h=b.potentialCacheItem.intersection.get_width(),i=b.potentialCacheItem.intersection.get_height();1!==f?(b.drawCanvas.width=parseInt(h*f),b.drawCanvas.height=parseInt(i*f),b.drawCanvas.style.width=parseInt(h)+"px",b.drawCanvas.style.height=parseInt(i)+"px"):(b.drawCanvas.width=parseInt(h),b.drawCanvas.height=parseInt(i));b.isElementCanvasVisible=!0;b.drawCanvas.style.visibility=b.renderCache.get_hasItems()||null!=b.pdfBackTile?"hidden":"visible";
b.task=g.render({canvasContext:e,transform:1===f?null:[f,0,0,f,0,0],viewport:c});b.task.then(ss.Delegate.create(this,function(){if(this._isDisposed)return null;if(!b.pendingCancelComplete&&!b.isItemRemoved){b.renderCache.addItem(b);lt.Documents.UI._pdfViewImageViewer.createRenderCanvas(b);d.get_element().appendChild(b.drawCanvas);lt.Documents.UI._pdfViewImageViewer._hideElementCanvas(b)}b.pendingCancelComplete=false;return b.task=null}),ss.Delegate.create(this,function(c){if(!this._isDisposed)if(b.isItemRemoved){b.pendingCancelComplete=
false;b.task=null}else if(c==="cancelled"){if(b.pendingCancelComplete){b.pendingCancelComplete=false;b.task=null;this.renderItem(d,a)}}else this._handler._viewPageOnError(c,d.get_leadIndex()+1)}))}},_createBackImage$1:function(a,b,c,d){if(!(null!=c.pdfBackTile||c.pdfBackTileLoading)){c.pdfBackTileLoading=!0;var b=b.pageProxy,e=b.view[2]-b.view[0],g=b.view[3]-b.view[1];if(d.get_width()>d.get_height()&&e<g)var f=e,e=g,g=f;var f=Math.max(e,d.get_width())*this._maxBackCanvasQuality$1,d=Math.max(g,d.get_height())*
this._maxBackCanvasQuality$1,h=f,i=d,d=h/i;1<=d?(h=Math.min(this._maxBackCanvasSize$1,h),i=h/d):(i=Math.min(this._maxBackCanvasSize$1,i),h=i*d);var j=document.createElement("canvas");j.width=parseInt(h);j.height=parseInt(i);d=j.getContext("2d");e=Math.max(parseInt(h),parseInt(i))/Math.max(e,g);e=b.getViewport(e);b.render({canvasContext:d,viewport:e}).then(ss.Delegate.create(this,function(){if(this._isDisposed)return null;if(c.isItemRemoved)c.disposePDFBackTile();else{c.disposePDFBackTile();c.pdfBackTileLoading=
false;c.pdfBackTile=new lt.Documents.UI._renderElement(j);var b=c.pdfBackTile.get_element();b.style.position="absolute";b.style.left="0";b.style.top="0";b.style.width=parseInt(h)/h*100+"%";b.style.height=parseInt(i)/i*100+"%";lt.Documents.UI._pdfUtils.removeTransitions(b);b.setAttribute("back","true");a.get_element().insertBefore(b,a.get_element().firstElementChild);if(c.task!=null&&c.drawCanvas!=null)c.drawCanvas.style.visibility="hidden"}return null}),ss.Delegate.create(this,function(b){if(!this._isDisposed){c.pdfBackTileLoading=
false;c.isItemRemoved&&c.disposePDFBackTile();if(b!=="cancelled"){c.disposePDFBackTile();this._handler._viewPageOnError(b,a.get_leadIndex()+1)}}}))}},createItemElements:function(a,b){var c=b.viewData;if(!c.isItemRemoved&&null==a.get_element()){a.set_resizeElementForView(!0);var d=document.createElement("div");d.style.overflow="hidden";c.renderCache=new lt.Documents.UI._renderCache(d,b.pageProxy.view[2],b.pageProxy.view[3]);lt.Documents.UI._pdfViewImageViewer.createRenderCanvas(c);d.appendChild(c.drawCanvas);
a.set_element(d)}}};lt.Documents.UI._pdfThumbnailsImageViewer=function(a,b){lt.Documents.UI._pdfThumbnailsImageViewer.initializeBase(this,[a,b])};lt.Documents.UI._pdfThumbnailsImageViewer.prototype={getSpecificData:function(a){return a.thumbData},renderItem:function(a,b){var c=b.thumbData,d=this.imageViewer.getItemViewBounds(a,lt.Controls.ImageViewerItemPart.image,!1);if(!d.get_isEmpty()&&!(c.isComplete||null!=c.task))c.pendingRenderItem=a,c.pendingRenderMaxSide=Math.max(d.get_width(),d.get_height()),
-1===c.pendingRenderTimeoutId&&(c.pendingRenderTimeoutId=setTimeout(ss.Delegate.create(this,function(){c.pendingRenderTimeoutId=-1;this._renderPDFPage$1(b,c)}),this.renderPageTimeout))},_renderPDFPage$1:function(a,b){if(!this._isDisposed&&!(null==b||b.isItemRemoved||b.pendingCancelComplete||null==b.pendingRenderItem)){var c=b.pendingRenderMaxSide;b.pendingRenderMaxSide=-1;var d=b.pendingRenderItem;b.pendingRenderItem=null;var e=b.drawCanvas.getContext("2d");e._transformMatrix&&(e._transformMatrix=
[1,0,0,1,0,0]);var g=a.pageProxy,c=c/Math.max(g.view[2]-g.view[0],g.view[3]-g.view[1]),c=g.getViewport(c);b.task=g.render({canvasContext:e,viewport:c});b.task.then(ss.Delegate.create(this,function(){if(this._isDisposed)return null;b.pendingCancelComplete=false;b.task=null;b.isComplete=true;return null}),ss.Delegate.create(this,function(a){if(!this._isDisposed)if(b.isItemRemoved){b.pendingCancelComplete=false;b.task=null}else a!=="cancelled"&&this._handler._thumbnailPageOnError(a,d.get_leadIndex()+
1)}))}},createItemElements:function(a,b){var c=b.thumbData;if(!c.isItemRemoved&&null==a.get_canvas()){c.isComplete=!1;a.set_resizeElementForView(!0);var d=document.createElement("canvas");d.style.position="absolute";d.style.left="0";d.style.top="0";lt.Documents.UI._pdfUtils.removeTransitions(d);c.drawCanvas=d;a.set_canvas(d)}}};lt.Documents.UI.BlobHelper=function(){};lt.Documents.UI.BlobHelper.createImageFromBlob=function(a,b,c){lt.Documents.UI.BlobHelper.supportsToBlob&&a.toBlob(function(a){var e=
document.createElement("img"),g=lt.Documents.UI.BlobHelper._urlClass.createObjectURL(a);c?(e.onload=function(){lt.Documents.UI.BlobHelper._urlClass.revokeObjectURL(g);b(e)},e.src=g):(e.src=g,b(e))})};lt.Documents.UI.BlobHelper.tryRevokeUrl=function(a){try{a.indexOf("blob:")||lt.Documents.UI.BlobHelper._urlClass.revokeObjectURL(a)}catch(b){}};lt.Documents.UI._renderElement=function(a){if(lt.Documents.UI._renderElement._useCanvas)this._element=a;else{var b=document.createElement("img");b.src=a.toDataURL("image/png");
this._element=b;lt.Documents.UI._pdfUtils.disposeCanvasElement(a,!1)}};lt.Documents.UI._renderElement.prototype={_element:null,get_element:function(){return this._element},dispose:function(a){lt.Documents.UI._renderElement._useCanvas?lt.Documents.UI._pdfUtils.disposeCanvasElement(this._element,a):lt.Documents.UI._pdfUtils.disposeImageElement(this._element);this._element=null}};lt.Documents.UI._renderCacheItem=function(){this.intersection=lt.LeadRectD.get_empty();this.percentIntersection=lt.LeadRectD.get_empty();
this.percentMidpoint=lt.LeadPointD.get_empty();this.zIndex=-1};lt.Documents.UI._renderCacheItem.prototype={imageBoundsArea:0,renderElement:null,isFullCoverageSize:!1,_disposed:!1,dispose:function(){this._disposed||(this._disposed=!0,this.imageBoundsArea=0,null!=this.renderElement&&(this.renderElement.dispose(!0),this.renderElement=null),this.intersection=lt.LeadRectD.get_empty(),this.percentIntersection=lt.LeadRectD.get_empty(),this.percentMidpoint=lt.LeadPointD.get_empty())}};lt.Documents.UI._renderCache=
function(a,b,c){this._toRemove=[];this._toProtect=[];this._parent=a;a=Math.max(b,c);for(b=this._maxItems=0;b<lt.Documents.UI._renderCache._maxRenderBoundaries.length;b++)if(a<=lt.Documents.UI._renderCache._maxRenderBoundaries[b]){this._maxItems=b+1;break}this._maxItems||(this._maxItems=lt.Documents.UI._renderCache._maxRenderBoundaries.length+1);this._cacheItems=Array(this._maxItems)};lt.Documents.UI._renderCache._getSpatialDistance=function(a,b){var c=Math.pow(a.percentMidpoint.get_x()-b.percentMidpoint.get_x(),
2),d=Math.pow(a.percentMidpoint.get_y()-b.percentMidpoint.get_y(),2),e=a.percentIntersection.get_width(),g=b.percentIntersection.get_width(),f=Math.pow(e-g,2),f=Math.sqrt(c+d+f),h=Math.pow(2*e-g,2),h=Math.sqrt(c+d+h),e=Math.pow(3*e-g,2),c=Math.sqrt(c+d+e);return Math.min(f,h,c)};lt.Documents.UI._renderCache.prototype={dispose:function(){if(null!=this._cacheItems){if(null!=this._parent)for(var a=0;a<this._cacheItems.length;a++){var b=this._cacheItems[a];null!=b&&(b.dispose(),this._cacheItems[a]=null)}this._cacheItems=
null}this._parent=null},_parent:null,_maxItems:3,_cacheItems:null,checkCoverage:function(a,b){var c=[],d=[],e,g;if(null!=b&&(b.isFullCoverageSize&&a.imageBoundsArea<=b.imageBoundsArea||a.imageBoundsArea===b.imageBoundsArea&&(g=lt.LeadRectD.intersectRects(b.intersection,a.intersection),lt.LeadRectD.equals(g,a.intersection))))return!1;if(a.imageBoundsArea)for(var f=0;f<this._cacheItems.length;f++)if(e=this._cacheItems[f],null!=e){if(e.isFullCoverageSize&&a.imageBoundsArea<=e.imageBoundsArea)return!1;
if(a.imageBoundsArea===e.imageBoundsArea){g=lt.LeadRectD.intersectRects(e.intersection,a.intersection);if(lt.LeadRectD.equals(g,a.intersection))return!1;g.get_isEmpty()||(c.add(f),d.add(g))}}var f=[],h=[];if(1===this._maxItems)return!0;if(0<c.length){for(var i=-1,j=a.intersection.clone(),k=a.percentIntersection.clone(),l=0;l<c.length;l++)if(i=c[l],e=this._cacheItems[i],g=d[l],lt.LeadRectD.equals(g,e.intersection))f.add(i);else if(g=lt.LeadRectD.intersectRects(j,e.intersection),j.get_top()===g.get_top()&&
j.get_bottom()===g.get_bottom()&&0<g.get_width()?(h.add(i),j.get_left()===g.get_left()?(j=lt.LeadRectD.fromLTRB(e.intersection.get_right(),j.get_top(),j.get_right(),j.get_bottom()),k=lt.LeadRectD.fromLTRB(e.percentIntersection.get_right(),k.get_top(),k.get_right(),k.get_bottom())):j.get_right()===g.get_right()&&(j=lt.LeadRectD.fromLTRB(j.get_left(),j.get_top(),e.intersection.get_left(),j.get_bottom()),k=lt.LeadRectD.fromLTRB(k.get_left(),k.get_top(),e.percentIntersection.get_left(),k.get_bottom()))):
j.get_left()===g.get_left()&&j.get_right()===g.get_right()&&0<g.get_height()&&(h.add(i),j.get_top()===g.get_top()?(j=lt.LeadRectD.fromLTRB(j.get_left(),e.intersection.get_bottom(),j.get_right(),j.get_bottom()),k=lt.LeadRectD.fromLTRB(k.get_left(),e.percentIntersection.get_bottom(),k.get_right(),k.get_bottom())):j.get_bottom()===g.get_bottom()&&(j=lt.LeadRectD.fromLTRB(j.get_left(),j.get_top(),j.get_right(),e.intersection.get_top()),k=lt.LeadRectD.fromLTRB(k.get_left(),k.get_top(),k.get_right(),e.percentIntersection.get_top()))),
!j.get_width()||!j.get_height())return!1;h.length===this._cacheItems.length?h=[]:!j.get_isEmpty()&&!k.get_isEmpty()&&(a.intersection=j,a.percentIntersection=k)}this._toRemove=f;this._toProtect=h;return!0},addItem:function(a){var b=a.potentialCacheItem,c=b.percentIntersection;b.percentMidpoint=lt.LeadPointD.create(c.get_left()+c.get_width()/2,c.get_top()+c.get_height()/2);c=[];if(0<this._toRemove.length)for(var d=0;d<this._toRemove.length;d++){var e=this._toRemove[d];c.add(this._cacheItems[e]);this._cacheItems[e]=
null}var g=-1;if(-1===g)for(d=0;d<this._cacheItems.length;d++)if(e=this._cacheItems[d],null==e){g=d;break}if(-1===g){for(var g=-1,f=0,h=-1,d=0;d<this._cacheItems.length;d++)f<this._toProtect.length&&this._toProtect[f]===d?f++:(e=this._cacheItems[d],null!=e&&(e=lt.Documents.UI._renderCache._getSpatialDistance(b,e),e>=g&&(g=e,h=d)));if(-1===h)throw new lt.InvalidOperationException("PDF Rendering Error - invalid index");c.add(this._cacheItems[h]);this._cacheItems[h]=null;g=h}if(1<this._maxItems)for(d=
0;d<this._cacheItems.length;d++)e=this._cacheItems[d],null!=e&&(f=0,f=0<=b.imageBoundsArea-e.imageBoundsArea?1:2,null!=e.renderElement?e.renderElement.get_element().style.zIndex=f:e.zIndex=f);this._cacheItems[g]=b;null!=b.renderElement&&(b.renderElement.dispose(!1),b.renderElement=null);b.renderElement=new lt.Documents.UI._renderElement(a.drawCanvas);a.drawCanvas=null;a=b.renderElement.get_element();a.style.left="0";a.style.top="0";a.style.width="0";lt.Documents.UI._pdfUtils.removeTransitions(a);
a.style.zIndex=3;a.style.left=b.percentIntersection.get_left()+"%";a.style.top=b.percentIntersection.get_top()+"%";a.style.width=b.percentIntersection.get_width()+"%";a.style.height=b.percentIntersection.get_height()+"%";a.style.position="absolute";a.style.visibility="";a.parentNode!==this._parent&&this._parent.appendChild(a);if(0<c.length)for(d=0;d<c.length;d++)b=c[d],null!=b&&(b.dispose(),c[d]=null);this._toRemove=[];this._toProtect=[];return!1},get_hasItems:function(){for(var a=!1,b=0;b<this._cacheItems.length;b++)if(null!=
this._cacheItems[b]){a=!0;break}return a}};lt.Documents.UI._annotationsWorker=function(){lt.Documents.UI._annotationsWorker.initializeBase(this);this.set_maximumPostProcessingCount(1);this.set_autoPostProcessCompleted(!0)};lt.Documents.UI._annotationsWorker.prototype={destroy:function(a){a&&this.stop();lt.Documents.UI._annotationsWorker.callBaseMethod(this,"destroy",[a])},_document$1:null,start:function(a){this._document$1=a;null!=this._document$1&&this.startWork(1)},stop:function(){this.stopWork();
this._document$1=null},processItem:function(a){try{var b=this._document$1.annotations.getAnnotations(!0);return new lt.Documents.UI._itemsWorkerProcessedEventArgs(this,0,b,null,null)}catch(c){return new lt.Documents.UI._itemsWorkerProcessedEventArgs(this,a,null,null,c)}},completeIteration:function(a,b){var c=a.get_data1();null==c||this.get_isCancelPending()||this!==a.get__itemsWorker()?b(a):(c.done(function(d){try{null!=d?a.set_data1(d):a.set_data1(null),b(a)}catch(c){a.set_data1(null),a.set_error(c),
b(a)}}),c.fail(function(d){d=lt.Documents.ServiceError.parseError(d,"error",Type.safeCast(d.statusText,String));d=d.isParseError?d.errorThrown:d.detail;a.set_data1(null);a.set_error(Error(d));b(a)}))}};lt.Documents.UI._textReviewDrawDesigner=function(a,b,c){this._begin$2=lt.LeadPointD.get_empty();this._end$2=lt.LeadPointD.get_empty();lt.Documents.UI._textReviewDrawDesigner.initializeBase(this,[a,b,c])};lt.Documents.UI._textReviewDrawDesigner.prototype={_documentViewer$2:null,get_documentViewer:function(){return this._documentViewer$2},
set_documentViewer:function(a){return this._documentViewer$2=a},onPointerDown:function(a,b){var c=lt.Documents.UI._textReviewDrawDesigner.callBaseMethod(this,"onPointerDown",[a,b]);if(b.get_button()!==lt.Annotations.Core.AnnMouseButton.left||b.get_button()!==lt.Annotations.Core.AnnMouseButton.left)return c;var d=this._documentViewer$2.get_currentPageNumber();if(this._documentViewer$2.get_text().hasDocumentPageText(d))this.startWorking();else return this._documentViewer$2.get_text().getDocumentPageText(d),
c;this._end$2=this._begin$2=b.get_location();return!0},onPointerMove:function(a,b){if(!this.get_hasStarted()||null==this._documentViewer$2||null==this.get_targetObject()||!this.get_isMouseLeftButtonDown())return!1;var c=b.get_location();if(c.get_x()!==this._end$2.get_x()||c.get_y()!==this._end$2.get_y()){this._end$2=c;if(null!=this._documentViewer$2){var c=this.get_container(),d=c.get_mapper().pointFromContainerCoordinates(this._begin$2,lt.Annotations.Core.AnnFixedStateOperations.none),e=c.get_mapper().pointFromContainerCoordinates(this._end$2,
lt.Annotations.Core.AnnFixedStateOperations.none);this._documentViewer$2.get_text()._trySelect(c.get_pageNumber(),d,e,3,null)}this.working()}return!0},onPointerUp:function(a,b){var c=lt.Documents.UI._textReviewDrawDesigner.callBaseMethod(this,"onPointerUp",[a,b]);if(null==this._documentViewer$2||b.get_button()!==lt.Annotations.Core.AnnMouseButton.left||null==this.get_targetObject())return c;if(null!=this._documentViewer$2){var c=this.get_container(),d=c.get_mapper().pointFromContainerCoordinates(this._begin$2,
lt.Annotations.Core.AnnFixedStateOperations.none),e=c.get_mapper().pointFromContainerCoordinates(this._end$2,lt.Annotations.Core.AnnFixedStateOperations.none);this._documentViewer$2.get_text()._trySelect(c.get_pageNumber(),d,e,4,null);d=Type.safeCast(this.get_targetObject(),lt.Annotations.Core.AnnTextReviewObject);null!=d?this._documentViewer$2.get_annotations().selectedTextToReviewObject(c.get_pageNumber(),d)?this.endWorking():this.cancel():this.cancel()}else this.cancel();this._documentViewer$2=
null;return!1}};lt.Documents.UI._bookmarksWorker=function(){lt.Documents.UI._bookmarksWorker.initializeBase(this);this.set_maximumPostProcessingCount(1);this.set_autoPostProcessCompleted(!0)};lt.Documents.UI._bookmarksWorker.prototype={destroy:function(a){a&&this.stop();lt.Documents.UI._bookmarksWorker.callBaseMethod(this,"destroy",[a])},_document$1:null,start:function(a){this._document$1=a;null!=this._document$1&&this.startWork(1)},stop:function(){this.stopWork();this._document$1=null},processItem:function(a){try{return null!=
this._document$1&&this._document$1.isStructureSupported&&!this._document$1.structure.isParsed?new lt.Documents.UI._itemsWorkerProcessedEventArgs(this,a,this._document$1.structure.parse(),null,null):new lt.Documents.UI._itemsWorkerProcessedEventArgs(this,a,null,null,null)}catch(b){return new lt.Documents.UI._itemsWorkerProcessedEventArgs(this,a,null,null,b)}},completeIteration:function(){}};lt.Documents.UI._annotationsCommands=function(){};lt.Documents.UI._annotationsCommands.add=function(a){a["Annotations.Undo"]=
lt.Documents.UI.DocumentViewerCommand._create("Annotations.Undo",function(a){a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canUndo()},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),f=null!=f?f.get_automation():null;null!=f&&f.undo();b.postRun(a,c);return null},null);a["Annotations.Redo"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.Redo",function(a){a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canRedo()},
function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),f=null!=f?f.get_automation():null;null!=f&&f.redo();b.postRun(a,c);return null},null);a["Annotations.Cut"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.Cut",function(a){a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canCopy()},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),f=null!=f?f.get_automation():null;null!=f&&(f.copy(),f.deleteSelectedObjects());b.postRun(a,
c);return null},null);a["Annotations.Copy"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.Copy",function(a){if(!a.get_hasDocument())return!1;a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canCopy()},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),f=null!=f?f.get_automation():null;null!=f&&f.get_canCopy()&&f.copy();b.postRun(a,c);return null},null);a["Annotations.Paste"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.Paste",
function(a){a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canPaste()},function(a,b,c){if(!b.preRun(a,c))return null;var f=lt.Documents.UI._commandHelper.getPointParameter(c,lt.LeadPointD.get_empty());a.get_annotations()._paste(f);b.postRun(a,c);return null},null);a["Annotations.Delete"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.Delete",function(a){a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canDeleteObjects()},function(a,
b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),f=null!=f?f.get_automation():null;null!=f&&f.deleteSelectedObjects();b.postRun(a,c);return null},null);a["Annotations.SelectAll"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.SelectAll",function(a){a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canSelectObjects()},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),h=lt.Documents.UI._commandHelper.getIntParamater(c,0);f._selectAll(h);
b.postRun(a,c);return null},null);a["Annotations.ClearSelection"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.ClearSelection",function(a){a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canSelectNone()},function(a,b,c){if(!b.preRun(a,c))return null;a.get_annotations()._deselect();b.postRun(a,c);return null},null);var b=function(a,b){var c=a.get_annotations(),c=null!=c?c.get_automationManager():null;return null!=c&&c.get_userMode()!==b.get_tag()},c=function(a,
b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),f=null!=f?f.get_automationManager():null;null!=f&&f.set_userMode(b.get_tag());b.postRun(a,c);return null};a["Annotations.UserModeDesign"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.UserModeDesign",b,c,lt.Annotations.Core.AnnUserMode.design);a["Annotations.UserModeRun"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.UserModeRun",b,c,lt.Annotations.Core.AnnUserMode.run);a["Annotations.UserModeRender"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.UserModeRender",
b,c,lt.Annotations.Core.AnnUserMode.render);a["Annotations.BringToFront"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.BringToFront",function(a){a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canBringToFront()},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),f=null!=f?f.get_automation():null;null!=f&&f.bringToFront(!1);b.postRun(a,c);return null},null);a["Annotations.SendToBack"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.SendToBack",
function(a){a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canSendToBack()},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),f=null!=f?f.get_automation():null;null!=f&&f.sendToBack(!1);b.postRun(a,c);return null},null);a["Annotations.BringToFirst"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.BringToFirst",function(a){a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canBringToFirst()},function(a,b,c){if(!b.preRun(a,
c))return null;var f=a.get_annotations(),f=null!=f?f.get_automation():null;null!=f&&f.bringToFront(!0);b.postRun(a,c);return null},null);a["Annotations.SendToLast"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.SendToLast",function(a){a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canSendToLast()},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),f=null!=f?f.get_automation():null;null!=f&&f.sendToBack(!0);b.postRun(a,c);return null},
null);a["Annotations.Flip"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.Flip",function(a){a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canFlip()},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),f=null!=f?f.get_automation():null;null!=f&&f.flip(!1);b.postRun(a,c);return null},null);a["Annotations.Reverse"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.Reverse",function(a){a=a.get_annotations();a=null!=a?a.get_automation():
null;return null!=a&&a.get_canFlip()},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),f=null!=f?f.get_automation():null;null!=f&&f.flip(!0);b.postRun(a,c);return null},null);a["Annotations.Group"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.Group",function(a){a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canGroup()},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),h;h=null!=c?c.toString():String.format("Group");
f.groupSelectedObjects(h);b.postRun(a,c);return null},null);a["Annotations.Ungroup"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.Ungroup",function(a){a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canUngroup()},function(a,b,c){if(!b.preRun(a,c))return null;a.get_annotations().ungroupSelectedObjects();b.postRun(a,c);return null},null);a["Annotations.Lock"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.Lock",function(a){a=a.get_annotations();
a=null!=a?a.get_automation():null;return null!=a&&a.get_canLock()},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),f=null!=f?f.get_automation():null;null!=f&&f.lock();b.postRun(a,c);return null},null);a["Annotations.Unlock"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.Unlock",function(a){a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canUnlock()},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),f=null!=f?
f.get_automation():null;null!=f&&f.unlock();b.postRun(a,c);return null},null);a["Annotations.ResetRotatePoints"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.ResetRotatePoints",function(a){a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canResetRotatePoints()},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),f=null!=f?f.get_automation():null;null!=f&&f.resetRotatePoints();b.postRun(a,c);return null},null);a["Annotations.AntiAlias"]=
lt.Documents.UI.DocumentViewerCommand._createState("Annotations.AntiAlias",function(a,b){var c=a.get_annotations(),c=null!=c?c.get_automation():null;return null!=c&&null!=c.get_automationControl()?(b.set_state(c.get_automationControl().get_automationAntiAlias()),!0):!1},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),f=null!=f?f.get_automation():null;null!=f&&null!=f.get_automationControl()&&f.get_automationControl().set_automationAntiAlias(!f.get_automationControl().get_automationAntiAlias());
b.postRun(a,c);return null},null,!1);a["Annotations.Properties"]=lt.Documents.UI.DocumentViewerCommand._create("Annotations.Properties",function(a){a=a.get_annotations();a=null!=a?a.get_automation():null;return null!=a&&a.get_canShowObjectProperties()},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations(),f=null!=f?f.get_automation():null;null!=f&&f.showObjectProperties();b.postRun(a,c);return null},null);a["Annotations.UseRotateThumbs"]=lt.Documents.UI.DocumentViewerCommand._createState("Annotations.UseRotateThumbs",
function(a,b){var c=a.get_annotations();if(null==c)return!1;b.set_state(c.get_useRotateThumbs());return!0},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations();null!=f&&f.set_useRotateThumbs(!f.get_useRotateThumbs());b.postRun(a,c);return null},null,!0);a["Annotations.EnableToolTips"]=lt.Documents.UI.DocumentViewerCommand._createState("Annotations.EnableToolTips",function(a,b){var c=a.get_annotations();if(null==c)return!1;c=c.get_automationManager();return null!=c?(b.set_state(c.get_enableToolTip()),
!0):!1},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations();null!=f&&(f=f.get_automationManager(),null!=f&&f.set_enableToolTip(!f.get_enableToolTip()));b.postRun(a,c);return null},null,!0);a["Annotations.RenderOnThumbnails"]=lt.Documents.UI.DocumentViewerCommand._createState("Annotations.RenderOnThumbnails",function(a,b){var c=a.get_annotations();if(null==c)return!1;b.set_state(c.get_renderOnThumbnails());return!0},function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_annotations();
null!=f&&f.set_renderOnThumbnails(!f.get_renderOnThumbnails());b.postRun(a,c);return null},null,!0)};lt.Documents.UI._commandHelper=function(){};lt.Documents.UI._commandHelper.initCommands=function(a){lt.Documents.UI._textCommands.add(a);lt.Documents.UI._viewCommands.add(a);lt.Documents.UI._pageCommands.add(a);lt.Documents.UI._layoutCommands.add(a);lt.Documents.UI._interactiveCommands.add(a);lt.Documents.UI._annotationsCommands.add(a)};lt.Documents.UI._commandHelper.getDoubleParamater=function(a,
b){return null==a?b:a};lt.Documents.UI._commandHelper.getIntParamater=function(a,b){return null==a?b:a};lt.Documents.UI._commandHelper.getPointParameter=function(a,b){return null==a?b:a};lt.Documents.UI._interactiveCommands=function(){};lt.Documents.UI._interactiveCommands.add=function(a){var b=function(a,b){return!Type.safeCast(b.get_tag(),lt.Controls.ImageViewerInteractiveMode).get_isEnabled()&&null!=a.get_view()},c=function(a,b,c){if(!b.preRun(a,c))return null;var d=Type.safeCast(b.get_tag(),lt.Controls.ImageViewerInteractiveMode),
e=a.get_view().get_imageViewer();e.get_interactiveModes().beginUpdate();for(var k=ss.IEnumerator.getEnumerator(e.get_interactiveModes());k.moveNext();){var l=k.current;switch(l.get_id()){case lt.Controls.ImageViewerInteractiveMode.autoPanModeId:var n=a.get_commands().getCommand("Interactive.AutoPan");l.set_isEnabled(null!=b?n.get_state():!1);break;case 100:case 101:switch(d.get_id()){case lt.Controls.ImageViewerInteractiveMode.magnifyGlassModeId:l.set_isEnabled(!1);break;default:l.set_isEnabled(!0)}break;
default:l.set_isEnabled(l===d)}}e.get_interactiveModes().endUpdate();null!=a.get_annotations()&&a.get_annotations()._ensureSelectObject();b.postRun(a,c);return null},d=new lt.Controls.ImageViewerPanZoomInteractiveMode;d.set_isKeyboardEnabled(!0);a["Interactive.PanZoom"]=lt.Documents.UI.DocumentViewerCommand._create("Interactive.PanZoom",b,c,d);d=new lt.Controls.ImageViewerPanZoomInteractiveMode;d.set_enableZoom(!1);d.set_enablePinchZoom(!1);d.set_doubleTapSizeMode(lt.Controls.ControlSizeMode.none);
a["Interactive.Pan"]=lt.Documents.UI.DocumentViewerCommand._create("Interactive.Pan",b,c,d);d=new lt.Controls.ImageViewerPanZoomInteractiveMode;d.set_enablePan(!1);d.set_zoomKeyModifier(lt.Controls.Keys.none);d.set_enableZoom(!0);d.set_enablePinchZoom(!0);d.set_doubleTapSizeMode(lt.Controls.ControlSizeMode.none);a["Interactive.Zoom"]=lt.Documents.UI.DocumentViewerCommand._create("Interactive.Zoom",b,c,d);var e=new lt.Controls.ImageViewerZoomToInteractiveMode;e.add_workCompleted(function(){var a=Type.safeCast(e.get_imageViewer().get_tag(),
lt.Documents.UI.DocumentViewer);null!=a&&a.get_commands().run("Interactive.PanZoom",null)});a["Interactive.ZoomTo"]=lt.Documents.UI.DocumentViewerCommand._create("Interactive.ZoomTo",b,c,e);d=new lt.Controls.ImageViewerMagnifyGlassInteractiveMode;a["Interactive.MagnifyGlass"]=lt.Documents.UI.DocumentViewerCommand._create("Interactive.MagnifyGlass",b,c,d);d=new lt.Controls.ImageViewerRubberBandInteractiveMode;a["Interactive.RubberBand"]=lt.Documents.UI.DocumentViewerCommand._create("Interactive.RubberBand",
b,c,d);d=new lt.Documents.UI.DocumentViewerSelectTextInteractiveMode;a["Interactive.SelectText"]=lt.Documents.UI.DocumentViewerCommand._create("Interactive.SelectText",b,c,d);a["Interactive.AutoPan"]=lt.Documents.UI.DocumentViewerCommand._createState("Interactive.AutoPan",function(a,b){var c=null;null!=a.get_view().get_imageViewer()&&(c=a.get_view().get_imageViewer().get_interactiveModes().findById(lt.Controls.ImageViewerInteractiveMode.autoPanModeId));return null!=c?(b.set_state(c.get_isEnabled()),
!0):!1},function(a,b,c){if(!b.preRun(a,c))return null;var d=null;null!=a.get_view().get_imageViewer()&&(d=a.get_view().get_imageViewer().get_interactiveModes().findById(lt.Controls.ImageViewerInteractiveMode.autoPanModeId));null!=d&&d.set_isEnabled(!d.get_isEnabled());b.postRun(a,c);return null},null,!0)};lt.Documents.UI._layoutCommands=function(){};lt.Documents.UI._layoutCommands.add=function(a){var b=function(a,b){return null==a.get_view()?!1:a.get_view().get_imageViewer().get_viewLayout()!==b.get_tag()},
c=function(a,b,c){if(!b.preRun(a,c))return null;var d=a.get_view().get_imageViewer();d.set_viewLayout(Type.safeCast(b.get_tag(),lt.Controls.ImageViewerViewLayout));null!=d.get_activeItem()&&d.gotoItem(d.get_activeItem());b.postRun(a,c);a.get_commands().run("View.FitPage",null);return null},d=new lt.Controls.ImageViewerSingleViewLayout,e=new lt.Controls.ImageViewerVerticalViewLayout;e.set_columns(1);var g=new lt.Controls.ImageViewerVerticalViewLayout;g.set_columns(2);var f=new lt.Controls.ImageViewerHorizontalViewLayout;
f.set_rows(1);a["Layout.Single"]=lt.Documents.UI.DocumentViewerCommand._create("Layout.Single",b,c,d);a["Layout.Vertical"]=lt.Documents.UI.DocumentViewerCommand._create("Layout.Vertical",b,c,e);a["Layout.Double"]=lt.Documents.UI.DocumentViewerCommand._create("Layout.Double",b,c,g);a["Layout.Horizontal"]=lt.Documents.UI.DocumentViewerCommand._create("Layout.Horizontal",b,c,f)};lt.Documents.UI._pageCommands=function(){};lt.Documents.UI._pageCommands._getPageNumber=function(a,b){if(!a.get_hasDocument())return 0;
switch(b){case 0:return 1;case 2:return a.get_currentPageNumber()-1;case 3:return a.get_currentPageNumber()+1;case 1:return a.get_pageCount();default:return 1}};lt.Documents.UI._pageCommands.add=function(a){a["Page.GoTo"]=lt.Documents.UI.DocumentViewerCommand._create("Page.GoTo",function(a){var b=null;null!=a.get_view()?b=a.get_view().get_imageViewer():null!=a.get_thumbnails()&&(b=a.get_thumbnails().get_imageViewer());return null==b?!1:1<b.get_items().get_count()},function(a,b,c){if(!b.preRun(a,c))return null;
var f=lt.Documents.UI._commandHelper.getIntParamater(c,1);a.gotoPage(f);b.postRun(a,c);return null},null);var b=function(a,b){var c=a.get_view().get_imageViewer(),f=0<c.get_items().get_count();f&&(f=lt.Documents.UI._pageCommands._getPageNumber(a,b.get_tag()),f=0<f&&f<=c.get_items().get_count()&&f!==a.get_currentPageNumber());return f},c=function(a,b,c){if(!b.preRun(a,c))return null;var f=lt.Documents.UI._pageCommands._getPageNumber(a,b.get_tag());a.gotoPage(f);b.postRun(a,c);return null};a["Page.First"]=
lt.Documents.UI.DocumentViewerCommand._create("Page.First",b,c,0);a["Page.Previous"]=lt.Documents.UI.DocumentViewerCommand._create("Page.Previous",b,c,2);a["Page.Next"]=lt.Documents.UI.DocumentViewerCommand._create("Page.Next",b,c,3);a["Page.Last"]=lt.Documents.UI.DocumentViewerCommand._create("Page.Last",b,c,1)};lt.Documents.UI._textCommands=function(){};lt.Documents.UI._textCommands.add=function(a){a["Text.Copy"]=lt.Documents.UI.DocumentViewerCommand._create("Text.Copy",function(a,b,e){if(!a.get_hasDocument()||
!a.get_pageCount())return!1;b=lt.Documents.UI._commandHelper.getIntParamater(e,0);return a.get_text().hasSelectedText(b)},function(a,b,e){if(!b.preRun(a,e))return null;var g=lt.Documents.UI._commandHelper.getIntParamater(e,0);a.get_text().copy(g);b.postRun(a,e);return null},null);a["Text.SelectAll"]=lt.Documents.UI.DocumentViewerCommand._createSlow("Text.SelectAll",function(a){return a.get_hasDocument()&&0<a.get_pageCount()},function(a,b,e){if(!b.preRun(a,e))return null;var g=lt.Documents.UI._commandHelper.getIntParamater(e,
0);a.get_text().selectAll(g);b.postRun(a,e);return null},function(a,b,e){if(!a.get_text().get_autoGetText())return!1;b=lt.Documents.UI._commandHelper.getIntParamater(e,0);return!a.get_text().hasDocumentPageText(b)},null);a["Text.ClearSelection"]=lt.Documents.UI.DocumentViewerCommand._create("Text.ClearSelection",function(a,b,e){b=lt.Documents.UI._commandHelper.getIntParamater(e,0);return a.get_text().hasSelectedText(b)},function(a,b,e){if(!b.preRun(a,e))return null;var g=lt.Documents.UI._commandHelper.getIntParamater(e,
0);a.get_text().clearSelection(g);b.postRun(a,e);return null},null);a["Text.Export"]=lt.Documents.UI.DocumentViewerCommand._createSlow("Text.Export",function(a){return a.get_hasDocument()&&0<a.get_pageCount()},function(a,b,e){if(!b.preRun(a,e))return null;var g=lt.Documents.UI._commandHelper.getIntParamater(e,0),g=a.get_text().exportText(g);b.postRun(a,e);return g},function(a,b,e){b=lt.Documents.UI._commandHelper.getIntParamater(e,0);return!a.get_text().hasDocumentPageText(b)},null);var b=function(a,
b,e){if(b=!a.get_text().hasDocumentPageText(0))e=lt.Documents.UI._commandHelper.getIntParamater(e,0),null!=a.get_text().get_lastFindText()&&!a.get_text().get_lastFindText().get_gotoNextPage()&&a.get_text().hasDocumentPageText(e)&&(b=!1);return b};a["Text.FindNext"]=lt.Documents.UI.DocumentViewerCommand._createSlow("Text.FindNext",function(a){return a.get_hasDocument()&&null!=a.get_text().get_lastFindText()},function(a,b,e){if(!b.preRun(a,e))return null;var g=a.get_text(),g=g.find(g.get_lastFindText(),
!1,!0);b.postRun(a,e);return g},b,null);a["Text.FindPrevious"]=lt.Documents.UI.DocumentViewerCommand._createSlow("Text.FindPrevious",function(a){return a.get_hasDocument()&&null!=a.get_text().get_lastFindText()},function(a,b,e){if(!b.preRun(a,e))return null;var g=a.get_text(),g=g.find(g.get_lastFindText(),!1,!1);b.postRun(a,e);return g},b,null);a["Text.Get"]=lt.Documents.UI.DocumentViewerCommand._create("Text.Get",function(a,b,e){if(!a.get_hasDocument()||!a.get_pageCount())return!1;b=lt.Documents.UI._commandHelper.getIntParamater(e,
0);return a.get_hasDocument()&&!a.get_text().hasDocumentPageText(b)},function(a,b,e){if(!b.preRun(a,e))return null;var g=lt.Documents.UI._commandHelper.getIntParamater(e,0);g?a.get_text()._doGetDocumentPageText(g,!0,null):a.get_text().getAllDocumentPageText();b.postRun(a,e);return null},null)};lt.Documents.UI._viewCommands=function(){};lt.Documents.UI._viewCommands._addZoom=function(a){var b=function(a,b){var c=a.get_view();if(null==c)return!1;var f=b.get_tag();return f?1===f?c.get_imageViewer().get_scaleFactor()*
c.get_zoomRatio()<c.get_imageViewer().get_maximumScaleFactor():!1:c.get_imageViewer().get_scaleFactor()/c.get_zoomRatio()<c.get_imageViewer().get_maximumScaleFactor()},c=function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_view(),h=f.get_imageViewer(),i=h.get_scaleFactor(),j=b.get_tag();j?1===j&&(i*=f.get_zoomRatio()):i/=f.get_zoomRatio();h.zoom(lt.Controls.ControlSizeMode.none,i,h.get_defaultZoomOrigin());b.postRun(a,c);return null};a["View.ZoomOut"]=lt.Documents.UI.DocumentViewerCommand._create("View.ZoomOut",
b,c,0);a["View.ZoomIn"]=lt.Documents.UI.DocumentViewerCommand._create("View.ZoomIn",b,c,1);a["View.ZoomPercentage"]=lt.Documents.UI.DocumentViewerCommand._create("View.ZoomPercentage",function(a,b,c){if(null==a.get_view())return!1;a=lt.Documents.UI._commandHelper.getDoubleParamater(c,0);return lt.LeadDoubleTools.isZero(a)?!1:!0},function(a,b,c){if(!b.preRun(a,c))return null;var f=lt.Documents.UI._commandHelper.getDoubleParamater(c,0);if(lt.LeadDoubleTools.isZero(f))return null;var h=a.get_view().get_imageViewer();
h.zoom(lt.Controls.ControlSizeMode.none,f/100,h.get_defaultZoomOrigin());b.postRun(a,c);return null},1);b=function(a,b){if(null==a.get_view())return!1;var c=a.get_view().get_imageViewer(),f=b.get_tag();return f===lt.Controls.ControlSizeMode.actualSize?0<c.get_items().get_count()?1!==c.get_scaleFactor():c.get_sizeMode()!==lt.Controls.ControlSizeMode.none&&c.get_sizeMode()!==lt.Controls.ControlSizeMode.actualSize:c.get_sizeMode()!==f};c=function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_view().get_imageViewer(),
h=b.get_tag();f.zoom(h,1,f.get_defaultZoomOrigin());b.postRun(a,c);return null};a["View.FitWidth"]=lt.Documents.UI.DocumentViewerCommand._create("View.FitWidth",b,c,lt.Controls.ControlSizeMode.fitWidth);a["View.FitPage"]=lt.Documents.UI.DocumentViewerCommand._create("View.FitPage",b,c,lt.Controls.ControlSizeMode.fitHeight);a["View.ActualSize"]=lt.Documents.UI.DocumentViewerCommand._create("View.ActualSize",b,c,lt.Controls.ControlSizeMode.actualSize)};lt.Documents.UI._viewCommands._addRotate=function(a){var b=
function(a){return null==a.get_view()?!1:!0},c=function(a,b,c){if(!b.preRun(a,c))return null;var f=a.get_view().get_imageViewer(),h=b.get_tag();f.disableTransitions();f.set_rotateAngle(f.get_rotateAngle()+h);f.enableTransitions();f=a.get_thumbnails();null!=f&&(f.get_imageViewer().disableTransitions(),f.get_imageViewer().set_rotateAngle(f.get_imageViewer().get_rotateAngle()+h),f.get_imageViewer().enableTransitions());a.gotoPage(a.get_currentPageNumber());b.postRun(a,c);return null};a["View.RotateClockwise"]=
lt.Documents.UI.DocumentViewerCommand._create("View.RotateClockwise",b,c,90);a["View.RotateCounterClockwise"]=lt.Documents.UI.DocumentViewerCommand._create("View.RotateCounterClockwise",b,c,-90)};lt.Documents.UI._viewCommands._addMisc=function(a){a["View.ItemType"]=lt.Documents.UI.DocumentViewerCommand._create("View.ItemType",function(a,c,d){return null==a.get_view()?!1:a.get_view().get_itemType()!==d},function(a,c,d){if(!c.preRun(a,d))return null;a.get_view().set_preferredItemType(d);c.postRun(a,
d);return null},null)};lt.Documents.UI._viewCommands.add=function(a){lt.Documents.UI._viewCommands._addRotate(a);lt.Documents.UI._viewCommands._addZoom(a);lt.Documents.UI._viewCommands._addMisc(a)};lt.Documents.UI._internalFindTextResult=function(){this.lastCharacterIndex=this.firstCharacterIndex=-1};lt.Documents.UI._internalFindTextResult.prototype={startIndex:0,clone:function(){var a=new lt.Documents.UI._internalFindTextResult;a.startIndex=this.startIndex;a.firstCharacterIndex=this.firstCharacterIndex;
a.lastCharacterIndex=this.lastCharacterIndex;return a}};lt.Documents.UI._thumbnailsGrid=function(){this._rects=[]};lt.Documents.UI._thumbnailsGrid.getGridIndexForPage=function(a,b){var c=-1;if(null!=a&&0<a.length)for(var d=0;d<a.length&&-1===c;d++)b>=a[d].get_firstPageNumber()&&b<=a[d].get_lastPageNumber()&&(c=d);return c};lt.Documents.UI._thumbnailsGrid.getGridForPage=function(a,b){var c=null;if(null!=a&&0<a.length)for(var d=0;d<a.length&&null==c;d++)b>=a[d].get_firstPageNumber()&&b<=a[d].get_lastPageNumber()&&
(c=a[d]);return c};lt.Documents.UI._thumbnailsGrid.getGridImageRectForPage=function(a,b){return a.get_rects()[b-a.get_firstPageNumber()]};lt.Documents.UI._thumbnailsGrid.deleteGrid=function(a){if(null!=a&&a.length)for(;0<a.length;)a[0].dispose(),a.removeAt(0)};lt.Documents.UI._thumbnailsGrid.prototype={_firstPageNumber:0,get_firstPageNumber:function(){return this._firstPageNumber},set_firstPageNumber:function(a){return this._firstPageNumber=a},_lastPageNumber:0,get_lastPageNumber:function(){return this._lastPageNumber},
set_lastPageNumber:function(a){return this._lastPageNumber=a},_rows:0,get_rows:function(){return this._rows},set_rows:function(a){return this._rows=a},_columns:0,get_columns:function(){return this._columns},set_columns:function(a){return this._columns=a},get_rects:function(){return this._rects},_image:null,get_image:function(){return this._image},set_image:function(a){return this._image=a},_destroy:function(a){a&&(this._image=null)},dispose:function(){this._destroy(!0)}};lt.Documents.UI._thumbnailsWorker=
function(a,b,c){lt.Documents.UI._thumbnailsWorker.initializeBase(this);this._useThumbnailsGrid$1=a;this._gridPixelSize$1=b;this._init$1(c)};lt.Documents.UI._thumbnailsWorker._getThumbnailSize=function(a,b){if(a.get_isEmpty()||!a.get_width()||!a.get_height())return lt.LeadSizeD.create(0,0);var c=parseInt(lt.Documents.Document.documentToPixels(96,a.get_width())),d=parseInt(lt.Documents.Document.documentToPixels(96,a.get_height())),e=lt.LeadRectD.create(0,0,b.get_width(),b.get_height()),e=lt.Controls.ImageViewer.getDestinationRectangle(c,
d,e,lt.Controls.ControlSizeMode.fit,lt.Controls.ControlAlignment.near,lt.Controls.ControlAlignment.near);return 1>e.get_width()||1>e.get_height()?lt.LeadSizeD.create(0,0):lt.LeadSizeD.create(e.get_width(),e.get_height())};lt.Documents.UI._thumbnailsWorker.prototype={destroy:function(a){a&&this.stop();lt.Documents.UI._thumbnailsWorker.callBaseMethod(this,"destroy",[a])},_document$1:null,_useThumbnailsGrid$1:!1,get_useThumbnailsGrid:function(){return this._useThumbnailsGrid$1},_grids$1:null,get_grids:function(){return this._grids$1},
set_grids:function(a){this._grids$1=null;return a},_gridPixelSize$1:0,_thumbSize$1:null,start:function(a){this._document$1=a;if(null!=this._document$1&&this._document$1.pages.get_count())if(this._useThumbnailsGrid$1){this._thumbSize$1=a.images.thumbnailPixelSize;var a=this._document$1.pages.get_count(),b=lt.Documents.UI._documentViewerHelper.parseInt(this._gridPixelSize$1*this._gridPixelSize$1/(parseInt(this._thumbSize$1.get_width())*parseInt(this._thumbSize$1.get_height())));1>b&&(b=1);var c=parseInt(a/
b);a%b&&c++;this._grids$1=[];var d=1,e=0;do{var e=Math.min(a,d+b-1),g=lt.Documents.UI._documentViewerHelper.parseInt(Math.max(1,0<this._gridPixelSize$1?this._gridPixelSize$1/parseInt(this._thumbSize$1.get_width()):a)),f=lt.Documents.UI._documentViewerHelper.parseInt(a/g);a%g&&f++;if(e>=d){var h=new lt.Documents.UI._thumbnailsGrid;h.set_firstPageNumber(d);h.set_lastPageNumber(e);h.set_image(null);h.set_columns(g);for(var i=0,j=0;j<f&&d<=e;j++){for(var k=0;k<g&&d<=e;k++){var l=this._document$1.pages.get_item(d-
1).size,l=lt.Documents.UI._thumbnailsWorker._getThumbnailSize(l,this._thumbSize$1),n=lt.LeadRectD.create(k*this._thumbSize$1.get_width(),j*this._thumbSize$1.get_height(),this._thumbSize$1.get_width(),this._thumbSize$1.get_height()),n=lt.Controls.ImageViewer.getDestinationRectangle(parseInt(l.get_width()),parseInt(l.get_height()),n,lt.Controls.ControlSizeMode.fit,lt.Controls.ControlAlignment.center,lt.Controls.ControlAlignment.center);h.get_rects().add(n);d++}i++}h.set_columns(g);h.set_rows(i);this._grids$1.add(h);
d=e+1}}while(e<a);this.startWork(c)}else this.startWork(this._document$1.pages.get_count())},stop:function(){this.stopWork();this._useThumbnailsGrid$1&&null!=this._grids$1&&(this.beginLockGrids(),lt.Documents.UI._thumbnailsGrid.deleteGrid(this._grids$1),this.endLockGrids(),this._grids$1=null);this._document$1=null},_init$1:function(a){this._useThumbnailsGrid$1?(this.set_maximumPostProcessingCount(1),this.set_autoPostProcessCompleted(!0)):(this.set_maximumPostProcessingCount(a),this.set_autoPostProcessCompleted(!1))},
beginLockGrids:function(){},endLockGrids:function(){},startWork:function(a){null!=this._imageLoader$1&&(this._imageLoader$1.dispose(),this._imageLoader$1=null);0<a&&this._useThumbnailsGrid$1&&(this._imageLoader$1=new lt.ImageLoader);lt.Documents.UI._thumbnailsWorker.callBaseMethod(this,"startWork",[a])},workCompleted:function(){this.get_isWorking()&&null!=this._imageLoader$1&&(this._imageLoader$1.dispose(),this._imageLoader$1=null);lt.Documents.UI._thumbnailsWorker.callBaseMethod(this,"workCompleted")},
_imageLoader$1:null,processItem:function(a){try{if(this.get_isCancelPending())return new lt.Documents.UI._itemsWorkerProcessedEventArgs(this,a,null,null,null);if(this._useThumbnailsGrid$1){var b=this._grids$1[a];this.beginLockGrids();var c=this._document$1.images.getThumbnailsGrid(b.get_firstPageNumber(),b.get_lastPageNumber(),this._gridPixelSize$1);if(null==c)return this.endLockGrids(),new lt.Documents.UI._itemsWorkerProcessedEventArgs(this,a,null,null,Error("Error getting thumbnails grid"));this._imageLoader$1.set_url(c);
return new lt.Documents.UI._itemsWorkerProcessedEventArgs(this,a,this._imageLoader$1,null,null)}var d=this._document$1.pages.get_item(a).getThumbnailImage();return new lt.Documents.UI._itemsWorkerProcessedEventArgs(this,a,d,null,null)}catch(e){return new lt.Documents.UI._itemsWorkerProcessedEventArgs(this,a,null,null,e)}},completeIteration:function(a,b){if(this._useThumbnailsGrid$1){var c=a.get_data1();if(null==c||this.get_isCancelPending())b(a);else{var d=null,e=null,g=null,d=ss.Delegate.create(this,
function(b){try{var c=this._grids$1[a.get_itemIndex()],d;if(b.get_isHTMLImageElement())d=b.get_element();else throw new lt.InvalidOperationException("Thumbnails Grid requires an Image Element");var e=document.createElement("canvas");e.width=d.naturalWidth;e.height=d.naturalHeight;e.getContext("2d").drawImage(d,0,0);c.set_image(e)}catch(g){a.set_data1(null),a.set_error(g)}}),e=function(){a.set_data1(null);a.set_error(Error("Error loading image"))},g=function(c){c.remove_done(d);c.remove_fail(e);c.remove_always(g);
b(a)};c.add_done(d);c.add_fail(e);c.add_always(g);c.run()}}else b(a)}};lt.Documents.UI._itemsWorkerProcessedEventArgs=function(a,b,c,d,e){lt.Documents.UI._itemsWorkerProcessedEventArgs.initializeBase(this);this._itemsWorker$1=a;this._itemIndex$1=b;this._data1$1=c;this._data2$1=d;this._error$1=e};lt.Documents.UI._itemsWorkerProcessedEventArgs.prototype={_itemsWorker$1:null,get__itemsWorker:function(){return this._itemsWorker$1},_itemIndex$1:0,get_itemIndex:function(){return this._itemIndex$1},_data1$1:null,
get_data1:function(){return this._data1$1},set_data1:function(a){return this._data1$1=a},_data2$1:null,get_data2:function(){return this._data2$1},set_data2:function(a){return this._data2$1=a},_error$1:null,get_error:function(){return this._error$1},set_error:function(a){return this._error$1=a}};lt.Documents.UI._itemWorkerCompletedEventArgs=function(a){lt.Documents.UI._itemWorkerCompletedEventArgs.initializeBase(this);this._itemsWorker$1=a};lt.Documents.UI._itemWorkerCompletedEventArgs.prototype={_itemsWorker$1:null,
get__itemsWorker:function(){return this._itemsWorker$1}};lt.Documents.UI._itemsWorker=function(){};lt.Documents.UI._itemsWorker.prototype={dispose:function(){this.destroy(!0)},destroy:function(a){a&&this.stopWork()},_isBackgroundWorker:!1,get_isBackgroundWorker:function(){return this._isBackgroundWorker},set_isBackgroundWorker:function(a){return this._isBackgroundWorker=a},_visited:null,_visitedCount:0,_timeoutVar:0,_postProcessed:null,_postProcessingCount:0,_maximumPostProcessingCount:0,get_maximumPostProcessingCount:function(){return this._maximumPostProcessingCount},
set_maximumPostProcessingCount:function(a){return this._maximumPostProcessingCount=a},_autoPostProcessCompleted:!1,get_autoPostProcessCompleted:function(){return this._autoPostProcessCompleted},set_autoPostProcessCompleted:function(a){return this._autoPostProcessCompleted=a},_itemCount:0,get_itemCount:function(){return this._itemCount},_isWorking:!1,get_isWorking:function(){return this._isWorking},_isCancelPending:!1,get_isCancelPending:function(){return this._isCancelPending},set_isCancelPending:function(a){return this._isCancelPending=
a},_nextItemIndex:0,get_nextItemIndex:function(){return this._nextItemIndex},set_nextItemIndex:function(a){return this._nextItemIndex=a},startWork:function(a){this.stopWork();this._itemCount=a;this._visited=Array(this._itemCount);this._postProcessed=Array(this._itemCount);this._postProcessingCount=0;this.set_nextItemIndex(0);this._isWorking=!0;this._completedHandlerInvoked=this._isCancelPending=!1;0<this._itemCount&&this._doWork(null)},stopWork:function(){this.get_isWorking()&&(this.set_isCancelPending(!0),
this.workCompleted(),this._isWorking=!1)},workCompleted:function(){},add_preProcessItem:function(a){this.__preProcessItem=ss.Delegate.combine(this.__preProcessItem,a)},remove_preProcessItem:function(a){this.__preProcessItem=ss.Delegate.remove(this.__preProcessItem,a)},__preProcessItem_handler_get:function(){null==this.__preProcessItem_handler&&(this.__preProcessItem_handler=ss.EventHandler.create(this,this.add_preProcessItem,this.remove_preProcessItem));return this.__preProcessItem_handler},__preProcessItem:null,
__preProcessItem_handler:null,add_postProcessItem:function(a){this.__postProcessItem=ss.Delegate.combine(this.__postProcessItem,a)},remove_postProcessItem:function(a){this.__postProcessItem=ss.Delegate.remove(this.__postProcessItem,a)},__postProcessItem_handler_get:function(){null==this.__postProcessItem_handler&&(this.__postProcessItem_handler=ss.EventHandler.create(this,this.add_postProcessItem,this.remove_postProcessItem));return this.__postProcessItem_handler},__postProcessItem:null,__postProcessItem_handler:null,
add_completed:function(a){this.__completed=ss.Delegate.combine(this.__completed,a)},remove_completed:function(a){this.__completed=ss.Delegate.remove(this.__completed,a)},__completed_handler_get:function(){null==this.__completed_handler&&(this.__completed_handler=ss.EventHandler.create(this,this.add_completed,this.remove_completed));return this.__completed_handler},__completed:null,__completed_handler:null,_getNextItemIndex:function(a){var b=this.get_nextItemIndex();for(1>b&&(b=0);b<a&&this._visited[b];)b++;
if(b>=a)for(b=0;b<a&&this._visited[b];)b++;return b},_doWork:function(){this._visitedCount=0;this._timeoutVar=-1;this._timeoutVar=setTimeout(ss.Delegate.create(this,this._iterationHandler),0)},_completedHandlerInvoked:!1,_completedHandler:function(){this._completedHandlerInvoked||(this._completedHandlerInvoked=!0,this.workCompleted(),this._isWorking=!1,null!=this.__completed&&this.__completed(this,new lt.Documents.UI._itemWorkerCompletedEventArgs(this)))},postProcessCompleted:function(a,b,c,d){var e=
!1;d?e=this._postProcessed[a]=!0:c?(this._postProcessingCount--,this._postProcessed[a]||(e=this._postProcessed[a]=!0)):(this._postProcessingCount++,this._postProcessed[a]=!1,1<this._maximumPostProcessingCount&&this._postProcessingCount<this._maximumPostProcessingCount&&(e=this._postProcessed[a]=!0));if(e&&!b){if(this._visitedCount>=this._itemCount)return this._completedHandler(),!0;this._timeoutVar=setTimeout(ss.Delegate.create(this,this._iterationHandler),0)}return e},postProcessCompleteAll:function(){-1!==
this._timeoutVar&&(clearTimeout(this._timeoutVar),this._timeoutVar=-1)},completeIteration:function(a,b){b(a)},_doCompleteIteration:function(a){var b=ss.Delegate.create(this,function(b){this._autoPostProcessCompleted&&this.postProcessCompleted(a.get_itemIndex(),!1,!0,!1);this._visitedCount++;null!=this.__postProcessItem&&this.__postProcessItem(this,b)});this.completeIteration(a,b)},_iterationHandler:function(){-1!==this._timeoutVar&&(clearTimeout(this._timeoutVar),this._timeoutVar=-1);if(this.get_isCancelPending())this._completedHandler();
else{var a=this._getNextItemIndex(this._itemCount);if(a>=this._itemCount)this._completedHandler();else{this._visited[a]=!0;var b=null;null!=this.__preProcessItem&&(b=new lt.Documents.UI._itemsWorkerProcessedEventArgs(this,a,null,null,null),this.__preProcessItem(this,b));b=this.processItem(a);this._doCompleteIteration(b)}}}};Object.defineProperty(lt.Documents.UI._itemsWorker.prototype,"preProcessItem",{get:lt.Documents.UI._itemsWorker.prototype.__preProcessItem_handler_get,enumerable:!0,configurable:!0});
Object.defineProperty(lt.Documents.UI._itemsWorker.prototype,"postProcessItem",{get:lt.Documents.UI._itemsWorker.prototype.__postProcessItem_handler_get,enumerable:!0,configurable:!0});Object.defineProperty(lt.Documents.UI._itemsWorker.prototype,"completed",{get:lt.Documents.UI._itemsWorker.prototype.__completed_handler_get,enumerable:!0,configurable:!0});lt.Documents.UI._lT_VersionNumber.registerClass("lt.Documents.UI._lT_VersionNumber");lt.Documents.UI.DocumentViewerAsyncOperation.registerClass("lt.Documents.UI.DocumentViewerAsyncOperation");
lt.Documents.UI.DocumentViewerAnnotations.registerClass("lt.Documents.UI.DocumentViewerAnnotations",null,ss.IDisposable);lt.Documents.UI.ImageViewerAutomationControl.registerClass("lt.Documents.UI.ImageViewerAutomationControl",null,lt.Annotations.Core.IAnnAutomationControl,ss.IDisposable);lt.Documents.UI.DocumentViewerBookmarks.registerClass("lt.Documents.UI.DocumentViewerBookmarks",null,ss.IDisposable);lt.Documents.UI._myDocumentBookmark.registerClass("lt.Documents.UI._myDocumentBookmark");lt.Documents.UI.DocumentViewerCommand.registerClass("lt.Documents.UI.DocumentViewerCommand");
lt.Documents.UI.DocumentViewerCommands.registerClass("lt.Documents.UI.DocumentViewerCommands");lt.Documents.UI.DocumentViewerCreateOptions.registerClass("lt.Documents.UI.DocumentViewerCreateOptions");lt.Documents.UI.DocumentViewerDiagnostics.registerClass("lt.Documents.UI.DocumentViewerDiagnostics");lt.Documents.UI.DocumentViewer.registerClass("lt.Documents.UI.DocumentViewer",null,ss.IDisposable);lt.Documents.UI.AnnotationsInteractiveMode.registerClass("lt.Documents.UI.AnnotationsInteractiveMode",
lt.Controls.ImageViewerInteractiveMode);lt.Documents.UI.DocumentViewerPageLinksInteractiveMode.registerClass("lt.Documents.UI.DocumentViewerPageLinksInteractiveMode",lt.Controls.ImageViewerInteractiveMode);lt.Documents.UI.DocumentViewerSelectTextInteractiveMode.registerClass("lt.Documents.UI.DocumentViewerSelectTextInteractiveMode",lt.Controls.ImageViewerRubberBandInteractiveMode);lt.Documents.UI.DocumentViewerOperationEventArgs.registerClass("lt.Documents.UI.DocumentViewerOperationEventArgs",lt.LeadEventArgs);
lt.Documents.UI.DocumentViewerFindText.registerClass("lt.Documents.UI.DocumentViewerFindText");lt.Documents.UI.DocumentViewerText.registerClass("lt.Documents.UI.DocumentViewerText",null,ss.IDisposable);lt.Documents.UI.DocumentViewerTextItem.registerClass("lt.Documents.UI.DocumentViewerTextItem");lt.Documents.UI.DocumentViewerThumbnails.registerClass("lt.Documents.UI.DocumentViewerThumbnails",null,ss.IDisposable);lt.Documents.UI.DocumentViewerView.registerClass("lt.Documents.UI.DocumentViewerView",
null,ss.IDisposable);lt.Documents.UI.PrintDocumentOptions.registerClass("lt.Documents.UI.PrintDocumentOptions");lt.Documents.UI.DocumentViewerPrintProgress.registerClass("lt.Documents.UI.DocumentViewerPrintProgress");lt.Documents.UI._documentContainer.registerClass("lt.Documents.UI._documentContainer");lt.Documents.UI._pageContainer.registerClass("lt.Documents.UI._pageContainer");lt.Documents.UI._printIndexData.registerClass("lt.Documents.UI._printIndexData");lt.Documents.UI._documentViewerPrintHandler.registerClass("lt.Documents.UI._documentViewerPrintHandler");
lt.Documents.UI.DocumentViewerFactory.registerClass("lt.Documents.UI.DocumentViewerFactory");lt.Documents.UI._documentViewerHelper.registerClass("lt.Documents.UI._documentViewerHelper");lt.Documents.UI._invoker.registerClass("lt.Documents.UI._invoker");lt.Documents.UI._pdfUtils.registerClass("lt.Documents.UI._pdfUtils");lt.Documents.UI._pdfProxyCacheDocumentItem.registerClass("lt.Documents.UI._pdfProxyCacheDocumentItem");lt.Documents.UI._pdfProxyCachePageItem.registerClass("lt.Documents.UI._pdfProxyCachePageItem");
lt.Documents.UI._pdfProxyCacheRemovalItem.registerClass("lt.Documents.UI._pdfProxyCacheRemovalItem");lt.Documents.UI._pdfProxyCache.registerClass("lt.Documents.UI._pdfProxyCache");lt.Documents.UI._pdfPageData.registerClass("lt.Documents.UI._pdfPageData");lt.Documents.UI._pdfRenderingHandler.registerClass("lt.Documents.UI._pdfRenderingHandler");lt.Documents.UI._pdfPageBaseData.registerClass("lt.Documents.UI._pdfPageBaseData");lt.Documents.UI._pdfPageViewData.registerClass("lt.Documents.UI._pdfPageViewData",
lt.Documents.UI._pdfPageBaseData);lt.Documents.UI._pdfPageThumbData.registerClass("lt.Documents.UI._pdfPageThumbData",lt.Documents.UI._pdfPageBaseData);lt.Documents.UI._pdfBaseImageViewer.registerClass("lt.Documents.UI._pdfBaseImageViewer");lt.Documents.UI._pdfViewImageViewer.registerClass("lt.Documents.UI._pdfViewImageViewer",lt.Documents.UI._pdfBaseImageViewer);lt.Documents.UI._pdfThumbnailsImageViewer.registerClass("lt.Documents.UI._pdfThumbnailsImageViewer",lt.Documents.UI._pdfBaseImageViewer);
lt.Documents.UI.BlobHelper.registerClass("lt.Documents.UI.BlobHelper");lt.Documents.UI._renderElement.registerClass("lt.Documents.UI._renderElement");lt.Documents.UI._renderCacheItem.registerClass("lt.Documents.UI._renderCacheItem");lt.Documents.UI._renderCache.registerClass("lt.Documents.UI._renderCache");lt.Documents.UI._itemsWorker.registerClass("lt.Documents.UI._itemsWorker",null,ss.IDisposable);lt.Documents.UI._annotationsWorker.registerClass("lt.Documents.UI._annotationsWorker",lt.Documents.UI._itemsWorker);
lt.Documents.UI._textReviewDrawDesigner.registerClass("lt.Documents.UI._textReviewDrawDesigner",lt.Annotations.Designers.AnnDrawDesigner);lt.Documents.UI._bookmarksWorker.registerClass("lt.Documents.UI._bookmarksWorker",lt.Documents.UI._itemsWorker);lt.Documents.UI._annotationsCommands.registerClass("lt.Documents.UI._annotationsCommands");lt.Documents.UI._commandHelper.registerClass("lt.Documents.UI._commandHelper");lt.Documents.UI._interactiveCommands.registerClass("lt.Documents.UI._interactiveCommands");
lt.Documents.UI._layoutCommands.registerClass("lt.Documents.UI._layoutCommands");lt.Documents.UI._pageCommands.registerClass("lt.Documents.UI._pageCommands");lt.Documents.UI._textCommands.registerClass("lt.Documents.UI._textCommands");lt.Documents.UI._viewCommands.registerClass("lt.Documents.UI._viewCommands");lt.Documents.UI._internalFindTextResult.registerClass("lt.Documents.UI._internalFindTextResult");lt.Documents.UI._thumbnailsGrid.registerClass("lt.Documents.UI._thumbnailsGrid",null,ss.IDisposable,
ss.IDisposable);lt.Documents.UI._thumbnailsWorker.registerClass("lt.Documents.UI._thumbnailsWorker",lt.Documents.UI._itemsWorker);lt.Documents.UI._itemsWorkerProcessedEventArgs.registerClass("lt.Documents.UI._itemsWorkerProcessedEventArgs",lt.LeadEventArgs);lt.Documents.UI._itemWorkerCompletedEventArgs.registerClass("lt.Documents.UI._itemWorkerCompletedEventArgs",lt.LeadEventArgs);lt.Documents.UI._lT_VersionNumber.l_VER_PRODUCT="LEADTOOLS\u00ae for JavaScript";lt.Documents.UI._lT_VersionNumber.l_VER_COMPANYNAME_STR=
"LEAD Technologies, Inc.";lt.Documents.UI._lT_VersionNumber.l_VER_LEGALTRADEMARKS_STR="LEADTOOLS\u00ae is a trademark of LEAD Technologies, Inc.";lt.Documents.UI._lT_VersionNumber.l_VER_LEGALCOPYRIGHT_STR="\u00a9 1991-2017 LEAD Technologies, Inc.";lt.Documents.UI._lT_VersionNumber.l_VER_DLLEXT=".dll";lt.Documents.UI._lT_VersionNumber.l_VER_EXEEXT=".exe";lt.Documents.UI._lT_VersionNumber.l_VER_PLATFORM="";lt.Documents.UI._lT_VersionNumber.l_VER_PLATFORM_FOR="";lt.Documents.UI._lT_VersionNumber.l_VER_PRODUCTNAME_STR=
"LEADTOOLS\u00ae for JavaScript";lt.Documents.UI._lT_VersionNumber.l_VER_ORIGINALFILENAME_STR_XXX="Leadtools.Xxx.dll";lt.Documents.UI._lT_VersionNumber.l_VER_FILEDESCRIPTION_STR_XXX="LEADTOOLS Xxx";lt.Documents.UI._lT_VersionNumber.l_VER_ORIGINALFILENAME_STR_KERNEL="lt.dll";lt.Documents.UI._lT_VersionNumber.l_VER_FILEDESCRIPTION_STR_KERNEL="Leadtools";lt.Documents.UI._lT_VersionNumber.l_VER_ORIGINALFILENAME_STR_CONTROLS="lt.Controls.dll";lt.Documents.UI._lT_VersionNumber.l_VER_FILEDESCRIPTION_STR_CONTROLS=
"Controls";lt.Documents.UI._lT_VersionNumber.l_VER_ORIGINALFILENAME_STR_DOCUMENTS_UI="lt.Documents.UI.dll";lt.Documents.UI._lT_VersionNumber.l_VER_FILEDESCRIPTION_STR_DOCUMENTS_UI="Documents User Interface";lt.Documents.UI._lT_VersionNumber.l_VER_ORIGINALFILENAME_STR_CONTROLS_MEDICAL="lt.Controls.Medical.dll";lt.Documents.UI._lT_VersionNumber.l_VER_FILEDESCRIPTION_STR_CONTROLS_MEDICAL="Medical Controls";lt.Documents.UI._lT_VersionNumber.l_VER_ORIGINALFILENAME_STR_DOCUMENTS="lt.Documents.dll";lt.Documents.UI._lT_VersionNumber.l_VER_FILEDESCRIPTION_STR_DOCUMENTS=
"Documents";lt.Documents.UI._lT_VersionNumber.l_VER_ORIGINALFILENAME_STR_ANNOTATIONS_CORE="lt.Annotations.Core.dll";lt.Documents.UI._lT_VersionNumber.l_VER_FILEDESCRIPTION_STR_ANNOTATIONS_CORE="Annotations Core";lt.Documents.UI._lT_VersionNumber.l_VER_ORIGINALFILENAME_STR_ANNOTATIONS_AUTOMATION="lt.Annotations.Automation.dll";lt.Documents.UI._lT_VersionNumber.l_VER_FILEDESCRIPTION_STR_ANNOTATIONS_AUTOMATION="Annotations Automation";lt.Documents.UI._lT_VersionNumber.l_VER_ORIGINALFILENAME_STR_ANNOTATIONS_DESIGNERS=
"lt.Annotations.Designers.dll";lt.Documents.UI._lT_VersionNumber.l_VER_FILEDESCRIPTION_STR_ANNOTATIONS_DESIGNERS="Annotations Designers";lt.Documents.UI._lT_VersionNumber.l_VER_ORIGINALFILENAME_STR_ANNOTATIONS_RENDERING="lt.Annotations.Rendering.dll";lt.Documents.UI._lT_VersionNumber.l_VER_FILEDESCRIPTION_STR_ANNOTATIONS_RENDERING="Annotations Rendering";lt.Documents.UI._lT_VersionNumber.l_VER_ORIGINALFILENAME_STR_CCOW="Leadtools.Ccow.dll";lt.Documents.UI._lT_VersionNumber.l_VER_FILEDESCRIPTION_STR_CCOW=
"Leadtools CCOW Library";lt.Documents.UI._lT_VersionNumber.l_VER_ORIGINALFILENAME_STR_ANNOTATIONS_DOCUMENTS="Leadtools.Annotations.Documents.dll";lt.Documents.UI._lT_VersionNumber.l_VER_FILEDESCRIPTION_STR_ANNOTATIONS_DOCUMENTS="Annotations Documents";lt.Documents.UI._lT_VersionNumber.l_VER_ORIGINALFILENAME_STR_ANNOTATIONS_LEGACY="Leadtools.Annotations.Legacy.dll";lt.Documents.UI._lT_VersionNumber.l_VER_FILEDESCRIPTION_STR_ANNOTATIONS_LEGACY="Annotations Legacy";lt.Documents.UI._lT_VersionNumber.l_VER_ORIGINALFILENAME_STR_ANNOTATIONS_JAVASCRIPT=
"Leadtools.Annotations.JavaScript.dll";lt.Documents.UI._lT_VersionNumber.l_VER_FILEDESCRIPTION_STR_ANNOTATIONS_JAVASCRIPT="JavaScripot Annotations";lt.Documents.UI._lT_VersionNumber.l_VER_PRODUCTVERSION_DOT_STR="19.0.0.0";lt.Documents.UI._lT_VersionNumber.l_VER_FILEVERSION_DOT_STR="19.0.0.46";lt.Documents.UI.DocumentViewerCommands.pageFirst="Page.First";lt.Documents.UI.DocumentViewerCommands.pageNext="Page.Next";lt.Documents.UI.DocumentViewerCommands.pagePrevious="Page.Previous";lt.Documents.UI.DocumentViewerCommands.pageLast=
"Page.Last";lt.Documents.UI.DocumentViewerCommands.pageGoto="Page.GoTo";lt.Documents.UI.DocumentViewerCommands.viewZoomIn="View.ZoomIn";lt.Documents.UI.DocumentViewerCommands.viewZoomOut="View.ZoomOut";lt.Documents.UI.DocumentViewerCommands.viewZoomPercentage="View.ZoomPercentage";lt.Documents.UI.DocumentViewerCommands.viewFitWidth="View.FitWidth";lt.Documents.UI.DocumentViewerCommands.viewFitPage="View.FitPage";lt.Documents.UI.DocumentViewerCommands.viewActualSize="View.ActualSize";lt.Documents.UI.DocumentViewerCommands.viewRotateClockwise=
"View.RotateClockwise";lt.Documents.UI.DocumentViewerCommands.viewRotateCounterClockwise="View.RotateCounterClockwise";lt.Documents.UI.DocumentViewerCommands.viewItemType="View.ItemType";lt.Documents.UI.DocumentViewerCommands.layoutSingle="Layout.Single";lt.Documents.UI.DocumentViewerCommands.layoutVertical="Layout.Vertical";lt.Documents.UI.DocumentViewerCommands.layoutDouble="Layout.Double";lt.Documents.UI.DocumentViewerCommands.layoutHorizontal="Layout.Horizontal";lt.Documents.UI.DocumentViewerCommands.interactivePanZoom=
"Interactive.PanZoom";lt.Documents.UI.DocumentViewerCommands.interactivePan="Interactive.Pan";lt.Documents.UI.DocumentViewerCommands.interactiveZoom="Interactive.Zoom";lt.Documents.UI.DocumentViewerCommands.interactiveZoomTo="Interactive.ZoomTo";lt.Documents.UI.DocumentViewerCommands.interactiveMagnifyGlass="Interactive.MagnifyGlass";lt.Documents.UI.DocumentViewerCommands.interactiveSelectText="Interactive.SelectText";lt.Documents.UI.DocumentViewerCommands.interactiveAutoPan="Interactive.AutoPan";
lt.Documents.UI.DocumentViewerCommands.interactiveRubberBand="Interactive.RubberBand";lt.Documents.UI.DocumentViewerCommands.textCopy="Text.Copy";lt.Documents.UI.DocumentViewerCommands.textSelectAll="Text.SelectAll";lt.Documents.UI.DocumentViewerCommands.textClearSelection="Text.ClearSelection";lt.Documents.UI.DocumentViewerCommands.textExport="Text.Export";lt.Documents.UI.DocumentViewerCommands.textFindNext="Text.FindNext";lt.Documents.UI.DocumentViewerCommands.textFindPrevious="Text.FindPrevious";
lt.Documents.UI.DocumentViewerCommands.textGet="Text.Get";lt.Documents.UI.DocumentViewerCommands.annotationsUndo="Annotations.Undo";lt.Documents.UI.DocumentViewerCommands.annotationsRedo="Annotations.Redo";lt.Documents.UI.DocumentViewerCommands.annotationsCut="Annotations.Cut";lt.Documents.UI.DocumentViewerCommands.annotationsCopy="Annotations.Copy";lt.Documents.UI.DocumentViewerCommands.annotationsPaste="Annotations.Paste";lt.Documents.UI.DocumentViewerCommands.annotationsDelete="Annotations.Delete";
lt.Documents.UI.DocumentViewerCommands.annotationsSelectAll="Annotations.SelectAll";lt.Documents.UI.DocumentViewerCommands.annotationsClearSelection="Annotations.ClearSelection";lt.Documents.UI.DocumentViewerCommands.annotationsUserModeDesign="Annotations.UserModeDesign";lt.Documents.UI.DocumentViewerCommands.annotationsUserModeRun="Annotations.UserModeRun";lt.Documents.UI.DocumentViewerCommands.annotationsUserModeRender="Annotations.UserModeRender";lt.Documents.UI.DocumentViewerCommands.annotationsBringToFront=
"Annotations.BringToFront";lt.Documents.UI.DocumentViewerCommands.annotationsSendToBack="Annotations.SendToBack";lt.Documents.UI.DocumentViewerCommands.annotationsBringToFirst="Annotations.BringToFirst";lt.Documents.UI.DocumentViewerCommands.annotationsSendToLast="Annotations.SendToLast";lt.Documents.UI.DocumentViewerCommands.annotationsFlip="Annotations.Flip";lt.Documents.UI.DocumentViewerCommands.annotationsReverse="Annotations.Reverse";lt.Documents.UI.DocumentViewerCommands.annotationsGroup="Annotations.Group";
lt.Documents.UI.DocumentViewerCommands.annotationsUngroup="Annotations.Ungroup";lt.Documents.UI.DocumentViewerCommands.annotationsLock="Annotations.Lock";lt.Documents.UI.DocumentViewerCommands.annotationsUnlock="Annotations.Unlock";lt.Documents.UI.DocumentViewerCommands.annotationsResetRotatePoints="Annotations.ResetRotatePoints";lt.Documents.UI.DocumentViewerCommands.annotationsAntiAlias="Annotations.AntiAlias";lt.Documents.UI.DocumentViewerCommands.annotationsProperties="Annotations.Properties";
lt.Documents.UI.DocumentViewerCommands.annotationsUseRotateThumbs="Annotations.UseRotateThumbs";lt.Documents.UI.DocumentViewerCommands.annotationsEnableToolTips="Annotations.EnableToolTips";lt.Documents.UI.DocumentViewerCommands.annotationsRenderOnThumbnails="Annotations.RenderOnThumbnails";lt.Documents.UI.DocumentViewerDiagnostics._fills=["rgba(0,0,0,0.25)","rgba(255,255,255,0.25)"];lt.Documents.UI.DocumentViewerDiagnostics._strokes=["rgba(255,255,255,0.5)","rgba(0,0,0,0.5)"];lt.Documents.UI.DocumentViewerDiagnostics._textColor=
"yellow";lt.Documents.UI.DocumentViewerDiagnostics._font="10px sans-serif";lt.Documents.UI.DocumentViewer.annotationsInteractiveModeId=100;lt.Documents.UI.DocumentViewer.pageLinksInteractiveModeId=101;lt.Documents.UI.DocumentViewer.selectTextInteractiveModeId=102;lt.Documents.UI.DocumentViewerText._selectedFill="rgba(0,0,0,0.25)";lt.Documents.UI._documentViewerPrintHandler.clasS_NAMESPACE="_ltprint_";lt.Documents.UI._documentViewerPrintHandler.clasS_ROOT="root";lt.Documents.UI._documentViewerPrintHandler.clasS_PAGE=
"page";lt.Documents.UI._documentViewerPrintHandler.clasS_PAGE_LAST="page_last";lt.Documents.UI._documentViewerPrintHandler.clasS_ELEMENT="el";lt.Documents.UI._documentViewerPrintHandler.clasS_ANN="ann";lt.Documents.UI._documentViewerPrintHandler.clasS_ROTATE="rotate";lt.Documents.UI._documentViewerPrintHandler._styleBasicElement=null;lt.Documents.UI._documentViewerPrintHandler._stylePageElement=null;lt.Documents.UI._documentViewerPrintHandler._dataUrlCanvas=null;lt.Documents.UI._documentViewerPrintHandler._dataUrlCanvasWidth=
-1;lt.Documents.UI._documentViewerPrintHandler._dataUrlCanvasHeight=-1;(function(){lt.Documents.UI._documentViewerPrintHandler.clasS_ROOT="_ltprint_"+lt.Documents.UI._documentViewerPrintHandler.clasS_ROOT;lt.Documents.UI._documentViewerPrintHandler.clasS_PAGE="_ltprint_"+lt.Documents.UI._documentViewerPrintHandler.clasS_PAGE;lt.Documents.UI._documentViewerPrintHandler.clasS_PAGE_LAST="_ltprint_"+lt.Documents.UI._documentViewerPrintHandler.clasS_PAGE_LAST;lt.Documents.UI._documentViewerPrintHandler.clasS_ELEMENT=
"_ltprint_"+lt.Documents.UI._documentViewerPrintHandler.clasS_ELEMENT;lt.Documents.UI._documentViewerPrintHandler.clasS_ROTATE="_ltprint_"+lt.Documents.UI._documentViewerPrintHandler.clasS_ROTATE;lt.Documents.UI._documentViewerPrintHandler.clasS_ANN="_ltprint_"+lt.Documents.UI._documentViewerPrintHandler.clasS_ANN;var a=document.createElement("style");a.type="text/css";var b,c,d;b={margin:"0",padding:"0","box-sizing":"border-box"};c="@media print {\n"+lt.Documents.UI._documentViewerPrintHandler._createClassText("html, body",
b);c+="}\n";b={position:"relative"};d=String.format(".{0}",lt.Documents.UI._documentViewerPrintHandler.clasS_ROOT);c+=lt.Documents.UI._documentViewerPrintHandler._createClassText(d,b);b={position:"relative","page-break-after":"always"};d=String.format(".{0} .{1}",lt.Documents.UI._documentViewerPrintHandler.clasS_ROOT,lt.Documents.UI._documentViewerPrintHandler.clasS_PAGE);c+=lt.Documents.UI._documentViewerPrintHandler._createClassText(d,b);b={"page-break-after":"avoid"};d=String.format(".{0} .{1}.{2}",
lt.Documents.UI._documentViewerPrintHandler.clasS_ROOT,lt.Documents.UI._documentViewerPrintHandler.clasS_PAGE,lt.Documents.UI._documentViewerPrintHandler.clasS_PAGE_LAST);c+=lt.Documents.UI._documentViewerPrintHandler._createClassText(d,b);b={position:"relative","z-index":"1"};d=String.format(".{0} .{1}",lt.Documents.UI._documentViewerPrintHandler.clasS_ROOT,lt.Documents.UI._documentViewerPrintHandler.clasS_ELEMENT);c+=lt.Documents.UI._documentViewerPrintHandler._createClassText(d,b);b={"-webkit-transform-origin":"top right",
"-moz-transform-origin":"top right","transform-origin":"top right","-webkit-transform":"rotate(-90deg)","-moz-transform":"rotate(-90deg)",transform:"rotate(-90deg)"};d=String.format(".{0} .{1}.{2}",lt.Documents.UI._documentViewerPrintHandler.clasS_ROOT,lt.Documents.UI._documentViewerPrintHandler.clasS_ELEMENT,lt.Documents.UI._documentViewerPrintHandler.clasS_ROTATE);c+=lt.Documents.UI._documentViewerPrintHandler._createClassText(d,b);b={position:"relative","z-index":"2"};d=String.format(".{0} .{1}",
lt.Documents.UI._documentViewerPrintHandler.clasS_ROOT,lt.Documents.UI._documentViewerPrintHandler.clasS_ANN);c+=lt.Documents.UI._documentViewerPrintHandler._createClassText(d,b);a.innerHTML=c;lt.Documents.UI._documentViewerPrintHandler._styleBasicElement=a;a=document.createElement("style");a.type="text/css";b={margin:"0"};c=""+lt.Documents.UI._documentViewerPrintHandler._createClassText("@page",b);a.innerHTML=c;lt.Documents.UI._documentViewerPrintHandler._stylePageElement=a})();lt.Documents.UI._pdfUtils._smallestPossibleImageSrc=
"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";lt.Documents.UI._pdfProxyCache._proxyItems={};lt.Documents.UI._pdfProxyCache._removalQueue=[];lt.Documents.UI._pdfProxyCache.removalQueueLimit=10;lt.Documents.UI.BlobHelper.supportsToBlob=!!HTMLCanvasElement.prototype.toBlob&&(!!window.URL||!!window.webkitURL);lt.Documents.UI.BlobHelper._urlClass=window.URL||window.webkitURL;lt.Documents.UI._renderElement._useCanvas=!1;lt.Documents.UI._renderElement._useCanvas=!(lt.LTHelper.browser===
lt.LTBrowser.safari&&lt.LTHelper.OS===lt.LTOS.iOS);lt.Documents.UI._renderCache._maxRenderBoundaries=[400,700,1100,2200,5E3]})();
